var testing=false;if(window.location.href.indexOf("/testing")>=0)testing=true;var iioc=false;var nsr=false;var lang=navigator.language||navigator.userLanguage;lang=lang.substr(0,2);var forcing=false;var ua=navigator.userAgent.toLowerCase();var is_android=ua.indexOf("android")>=0;var is_amazon=ua.indexOf("kindle")>=0||ua.indexOf("silk/")>=0;var uua=navigator.userAgent;var is_ios=uua.indexOf("iPad")>=0||uua.indexOf("iPhone")>=0||uua.indexOf("iPod")>=0;
var is_mobile=ua.indexOf("mobile")>=0;var is_firefox=ua.indexOf("firefox")>-1;var is_ie8oo=window.attachEvent&&!window.addEventListener;var is_chrome=false;var is_osx=false;var osx_ver=-1;var is_safari=false;if(ua.indexOf("safari")>=0)if(ua.indexOf("chrome")==-1)is_safari=true;if(ua.indexOf("chrome")>=0)if(!is_safari)if(!is_firefox)is_chrome=true;
if(ua.indexOf("mac os x ")>=0){var j=ua.indexOf("mac os x ");if(j>=0){j+=9;var vs=[];var v=0;for(var i=j;i<ua.length;i++){var k=ua.charCodeAt(i);if(k>=48&&k<=57){v*=10;v+=k-48}else{vs.push(v);v=0;if(vs.length==3||k!=46&&k!=95)break}}if(vs.length>=2)if(vs[0]==10){is_osx=true;osx_ver=vs[1]}}}if(navigator.platform){var ptf=(""+navigator.platform).toLowerCase();if(ptf.substr(0,3)!="mac")is_osx=false}var no_raf=false;var raf=function(x){};
if(window.requestAnimationFrame)raf=window.requestAnimationFrame;else if(window.mozRequestAnimationFrame)raf=window.mozRequestAnimationFrame;else if(window.webkitRequestAnimationFrame)raf=window.webkitRequestAnimationFrame;else no_raf=true;if(!is_mobile)no_raf=true;no_raf=true;
if(is_chrome){var uas=ua.split(" ");for(var i=uas.length-1;i>=0;i--){var s=uas[i];if(s.indexOf("chrome/")==0){var vs=s.split("chrome/")[1];vs=vs.split(".");if(vs.length>=3)if(Number(vs[0])>=52)no_raf=false;else if(Number(vs[0])==51)if(Number(vs[1])>=1)no_raf=false;else if(Number(vs[2])>=2704)no_raf=false;break}}no_raf=true;if(testing)no_raf=false}var lfsx;var lfsy;var lfcv;var lfvsx;var lfvsy;var lfesid;var vvd=[];var vch=0;var doiosh=false;
if(is_chrome)if(is_osx)if(osx_ver!=-1)if(osx_ver<=11)nsr=true;var a,i,j,k,l,m,n,o,r;var fj;var d,d2;var qq;var sc;var agpu="translateZ(0)";var ang,sang,vang;function trf(d,s){d.style.webkitTransform=d.style.OTransform=d.style.msTransform=d.style.MozTransform=d.style.transform=s}function trfo(d,s){d.style.webkitTransformOrigin=d.style.OTransformOrigin=d.style.msTransformOrigin=d.style.MozTransformOrigin=d.style.transformOrigin=s}var pi2=2*Math.PI;var piar=[4,21,0,11];var animating=false;
var startAnimation=function(){animating=true;if(!no_raf)raf(oef);else if(is_mobile)setInterval("oef()",33);else if(is_safari)setInterval("oef()",33);else setInterval("oef()",20)};var ois=[];var wic=0;
var ldi=function(n){wic++;var o={};var ii=document.createElement("img");o.ii=ii;o.sc=1;ii.onload=function(){for(var i=ois.length-1;i>=0;i--)if(ois[i].ii==this){var o=ois[i];o.ww=this.width;o.hh=this.height;o.loaded=true;if(o.onload)o.onload();break}wic--;if(wic==0)startAnimation()};o.src=n;ois.push(o);return o};
function addCss(cssCode){var styleElement=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(styleElement);styleElement.type="text/css";if(styleElement.styleSheet)styleElement.styleSheet.cssText=cssCode;else styleElement.appendChild(document.createTextNode(cssCode))}var sadg,sadu,sadd;var j,k,l,p;var xx,yy;var rad;var grw,grh;var elem,map,imgd;var ctx;var l;var p;var rw,rh;elem=document.createElement("canvas");grw=2;grh=56;elem.width=grw;elem.height=grh;ctx=elem.getContext("2d");
map=ctx.getImageData(0,0,grw,grh);imgd=map.data;l=imgd.length;p=0;for(yy=0;yy<grh;yy++){j=(grh-1-yy)/(grh-1);j=.5*(1-Math.cos(Math.PI*j));for(xx=0;xx<grw;xx++){imgd[p]=Math.min(255,Math.floor(.85*64+.5*64*j));imgd[p+1]=Math.min(255,Math.floor(.85*128+.5*128*j));imgd[p+2]=Math.min(255,Math.floor(.85*96+.5*96*j));imgd[p+3]=255;p+=4}}ctx.putImageData(map,0,0);sadg=elem.toDataURL();elem=document.createElement("canvas");elem.width=grw;elem.height=grh;ctx=elem.getContext("2d");
map=ctx.getImageData(0,0,grw,grh);imgd=map.data;l=imgd.length;p=0;for(yy=0;yy<grh;yy++){j=(grh-1-yy)/(grh-1);j=.5*(1-Math.cos(Math.PI*j));for(xx=0;xx<grw;xx++){imgd[p]=Math.min(255,Math.floor(1.5*48+.95*48*j));imgd[p+1]=Math.min(255,Math.floor(1.5*114+.95*98*j));imgd[p+2]=Math.min(255,Math.floor(1.5*88+.95*87*j));imgd[p+3]=255;p+=4}}ctx.putImageData(map,0,0);sadu=elem.toDataURL();elem=document.createElement("canvas");elem.width=grw;elem.height=grh;ctx=elem.getContext("2d");
map=ctx.getImageData(0,0,grw,grh);imgd=map.data;l=imgd.length;p=0;for(yy=0;yy<grh;yy++){j=yy/(grh-1);j=.5*(1-Math.cos(Math.PI*j));for(xx=0;xx<grw;xx++){imgd[p]=Math.floor(.1*48+.75*48*j);imgd[p+1]=Math.floor(.1*70+.75*70*j);imgd[p+2]=Math.floor(.1*64+.75*64*j);imgd[p+3]=255;p+=4}}ctx.putImageData(map,0,0);sadd=elem.toDataURL();
if(sadg.length>32&&sadu.length>32&&sadd.length>32)addCss(".sadg1 { background-image:url("+sadg+"); }  .sadu1 { background-image:url("+sadu+"); }  .sadd1 { background-image:url("+sadd+"); }");elem.width=grw;elem.height=grh;ctx=elem.getContext("2d");map=ctx.getImageData(0,0,grw,grh);imgd=map.data;l=imgd.length;p=0;
for(yy=0;yy<grh;yy++){j=(grh-1-yy)/(grh-1);j=.5*(1-Math.cos(Math.PI*j));for(xx=0;xx<grw;xx++){imgd[p]=Math.min(255,Math.floor(.85*52+.5*52*j));imgd[p+1]=Math.min(255,Math.floor(.85*96+.5*96*j));imgd[p+2]=Math.min(255,Math.floor(.85*144+.5*144*j));imgd[p+3]=255;p+=4}}ctx.putImageData(map,0,0);sadg=elem.toDataURL();elem=document.createElement("canvas");elem.width=grw;elem.height=grh;ctx=elem.getContext("2d");map=ctx.getImageData(0,0,grw,grh);imgd=map.data;l=imgd.length;p=0;
for(yy=0;yy<grh;yy++){j=(grh-1-yy)/(grh-1);j=.5*(1-Math.cos(Math.PI*j));for(xx=0;xx<grw;xx++){imgd[p]=Math.min(255,Math.floor(1.5*48+.95*48*j));imgd[p+1]=Math.min(255,Math.floor(1.5*88+.95*87*j));imgd[p+2]=Math.min(255,Math.floor(1.5*114+.95*98*j));imgd[p+3]=255;p+=4}}ctx.putImageData(map,0,0);sadu=elem.toDataURL();elem=document.createElement("canvas");elem.width=grw;elem.height=grh;ctx=elem.getContext("2d");map=ctx.getImageData(0,0,grw,grh);imgd=map.data;l=imgd.length;p=0;
for(yy=0;yy<grh;yy++){j=yy/(grh-1);j=.5*(1-Math.cos(Math.PI*j));for(xx=0;xx<grw;xx++){imgd[p]=Math.floor(.1*48+.75*48*j);imgd[p+1]=Math.floor(.1*54+.75*54*j);imgd[p+2]=Math.floor(.1*70+.75*70*j);imgd[p+3]=255;p+=4}}ctx.putImageData(map,0,0);sadd=elem.toDataURL();if(sadg.length>32&&sadu.length>32&&sadd.length>32)addCss(".sadg2 { background-image:url("+sadg+"); }  .sadu2 { background-image:url("+sadu+"); }  .sadd2 { background-image:url("+sadd+"); }");var mos=[];var whmos=false;var swmup=false;
function mkBtn(elemid,prefix,iw,ih){var ho=document.createElement("div");var elem;if(elemid.tagName)elem=elemid;else{elem=document.getElementById(elemid);elem.style.width=iw+"px";elem.style.height=ih+"px";ho.style.width=iw+"px";ho.style.height=ih+"px"}var o={};o.lic=0;o.elem=elem;o.md=false;o.mo=false;o.mdf=0;o.mof=0;var str=true;if(elem.style)if(elem.style.position){if((elem.style.position+"").toLowerCase()=="absolute")str=false;if((elem.style.position+"").toLowerCase()=="fixed")str=false}if(str)elem.style.position=
"relative";ho.style.position="absolute";ho.style.opacity=0;ho.style.left="0px";ho.style.top="0px";elem.appendChild(ho);o.ho=ho;o.alic=function(){this.lic++;if(this.lic==3){this.ho.style.opacity=1;if(this.onload)this.onload()}};mos.push(o);o.setEnabled=function(e){if(e){this.disabled=false;this.upi.style.opacity=this.mof;this.downi.style.opacity=this.mdf;this.elem.style.opacity=1;this.elem.style.cursor="pointer"}else{this.disabled=true;this.upi.style.opacity=0;this.downi.style.opacity=0;this.elem.style.opacity=
.38;this.elem.style.cursor="default"}};if(!prefix)ho.style.opacity=1;else for(var k=1;k<=3;k++){var ii=document.createElement("img");ii.draggable=false;ii.style.position="absolute";ii.style.left="0px";ii.style.top="0px";ii.border=0;ii.width=iw;ii.height=ih;ii.className="nsi";ho.appendChild(ii);if(k==1){o.normi=ii;ii.onload=function(){for(var i=mos.length-1;i>=0;i--){var o=mos[i];if(o.normi==this){o.alic();break}}};ii.src=prefix+".png"}else if(k==2){o.upi=ii;ii.style.opacity=0;ii.onload=function(){for(var i=
mos.length-1;i>=0;i--){var o=mos[i];if(o.upi==this){o.alic();break}}};ii.src=prefix+"up.png"}else if(k==3){o.downi=ii;ii.style.opacity=0;ii.onload=function(){for(var i=mos.length-1;i>=0;i--){var o=mos[i];if(o.downi==this){o.alic();break}}};ii.src=prefix+"down.png"}}elem.onmouseenter=function(){for(var k=mos.length-1;k>=0;k--){var o=mos[k];if(o.elem==this){if(!o.disabled)if(!o.mo){o.mo=true;if(o.onmouseenter)o.onmouseenter();whmos=true}break}}};elem.onmouseleave=function(){for(var k=mos.length-1;k>=
0;k--){var o=mos[k];if(o.elem==this){if(o.mo){o.mo=false;if(o.onmouseleave)o.onmouseleave();whmos=true}break}}};elem.onmousedown=function(e){for(var k=mos.length-1;k>=0;k--){var o=mos[k];if(o.elem==this){if(!o.disabled)if(!o.md){o.md=true;if(o.onmousedown)o.onmousedown(e,o);whmos=true;return false}break}}};elem.onmouseup=elem.ondragend=function(e){for(var k=mos.length-1;k>=0;k--){var o=mos[k];if(o.elem==this){if(o.md){o.mdf=1;o.md=false;if(o.onmouseup){o.onmouseup(e,o);if(is_mobile)o.elem.onmouseleave()}whmos=
true}break}}};if(!swmup){swmup=true;window.onmouseup=window.ondragover=window.ondragend=function(){for(var i=mos.length-1;i>=0;i--){var o=mos[i];if(o.md){o.md=false;whmos=true}}}}return o}
function hmos(){var wa;var dstf=false;for(var i=mos.length-1;i>=0;i--){var o=mos[i];wa=false;if(o.mo){if(o.mof!=1){dstf=true;o.mof+=.33;if(o.mof>=1)o.mof=1;wa=true}}else if(o.mof!=0){dstf=true;o.mof-=.2;if(o.mof<=0)o.mof=0;wa=true}if(wa)if(o.disabled)o.upi.style.opacity=0;else o.upi.style.opacity=o.mof;wa=false;if(o.md){if(o.mdf!=1){dstf=true;o.mdf+=.33;if(o.mdf>=1)o.mdf=1;wa=true}}else if(o.mdf!=0){dstf=true;o.mdf-=.2;if(o.mdf<=0)o.mdf=0;wa=true}if(wa)if(o.disabled)o.downi.style.opacity=0;else o.downi.style.opacity=
o.mdf}if(!dstf)whmos=false}
function makeTextBtn(s,bh,ts,br,bgm){if(!bh)bh=56;if(bh>56)bh=56;if(!ts)ts=15;if(!br)br=14;var btndiv=document.createElement("div");btndiv.className="btnt nsi sadg"+bgm;var st=btndiv.style;st.position="absolute";st.width="auto";st.color="#ffffff";st.fontWeight="bold";st.textAlign="center";st.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif';st.fontSize=ts+"px";btndiv.textContent=s;st.cursor="pointer";document.body.appendChild(btndiv);var btnw=Math.ceil(35+btndiv.offsetWidth);document.body.removeChild(btndiv);
btndiv.textContent="";st.width=btnw+"px";st.height=bh+"px";st.lineHeight=bh+"px";if(!is_mobile)st.boxShadow="0px 3px 20px rgba(0,0,0, .75)";st.borderRadius=br+"px";var btnu=document.createElement("div");var st=btnu.style;st.position="absolute";st.left=st.top="0px";st.width=btnw+"px";st.height=bh+"px";st.borderRadius=br+1+"px";st.opacity=0;btnu.className="sadu"+bgm;var btnd=document.createElement("div");var st=btnd.style;st.position="absolute";st.left=st.top="-1px";st.width=btnw+2+"px";st.height=bh+
2+"px";st.borderRadius=br+"px";st.opacity=0;btnd.className="sadd"+bgm;var o=mkBtn(btndiv);o.a=1;o.ho.appendChild(btnu);o.upi=btnu;o.ho.appendChild(btnd);o.downi=btnd;o.ts=ts;o.ww=btnw;o.bgm=bgm;o.setText=function(t){var testdiv=document.createElement("div");testdiv.className="nsi sadg"+this.bgm;var st=testdiv.style;st.position="absolute";st.width="auto";st.color="#ffffff";st.fontWeight="bold";st.textAlign="center";st.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif';st.fontSize=this.ts+
"px";testdiv.textContent=t;document.body.appendChild(testdiv);var btnw=Math.ceil(35+testdiv.offsetWidth);document.body.removeChild(testdiv);this.btnf.textContent=t;this.ww=btnw;this.elem.style.width=btnw+"px";this.upi.style.width=btnw+"px";this.downi.style.width=btnw+2+"px";this.btnf.style.width=btnw+"px"};var btnf=document.createElement("div");btndiv.appendChild(btnf);o.btnf=btnf;var st=btnf.style;st.position="absolute";st.left=st.top="0px";st.width=btnw+"px";st.height=bh+"px";st.borderRadius=br+
"px";btnf.textContent=s;btnf.className="nsi";st.color="#ffffff";st.opacity=.9;o.ho.appendChild(btnf);return o}
function heystup(){var os=document.getElementsByTagName("script");for(var i=os.length-1;i>=0;i--){var o=os[i];try{if(o.src)if((o.src+"").indexOf("mindscape.xyz")>=0){var div=document.createElement("div");div.style.width="100%";div.style.height="100%";div.style.position="fixed";div.style.left=div.style.top="0px";div.style.zIndex=2147483647;div.style.fontSize="87px";div.style.color="#FF3030";div.style.background="#FFFFFF";if((o.src+"").indexOf("android")>=0)div.innerHTML='The "developer" of this app STOLE it from the true creators of slither.io. <a href="https://play.google.com/store/apps/details?id=air.com.hypah.io.slither">Tap here to download the real game!</a>';
else div.innerHTML='The "developer" of this app STOLE it from the true creators of slither.io. <a href="https://itunes.apple.com/us/app/slither.io/id1091944550?ls=1&mt=8">Tap here to download the real game!</a>';document.body.appendChild(div)}}catch(ee){}}if(is_ios)if(mba&&!mba.parentNode){var div=document.createElement("div");div.style.width="100%";div.style.height="100%";div.style.position="fixed";div.style.left=div.style.top="0px";div.style.zIndex=2147483647;div.style.fontSize="87px";div.style.color=
"#FF3030";div.style.background="#FFFFFF";div.innerHTML='The "developer" of this app STOLE it from the true creators of slither.io. <a href="https://itunes.apple.com/us/app/slither.io/id1091944550?ls=1&mt=8">Tap here to download the real game!</a>';document.body.appendChild(div)}}setInterval(heystup,8E3);var sos=[];var clus=[];var bso;var u_m=[64,32,16,8,4,2,1];
var accessories=["oakley","graduation","funkystar","headphones","eyebrows","spikecollar","disguise","cape","crown","antlers","unicorn","angel","bat","dragon","bear","rabbit","cat","dreadlocks","blonde","ginger","blackhair","mohawk","catglass","swirly","nerdglass","3dglass","heartglass","monocle","deerstalker","visor","cap","hardhat"];var a_imgs=[];var a_ct;
for(var i=0;i<accessories.length;i++){var o={};a_imgs.push(o);o.loaded=false;o.img=null;o.u="http://slither.io/s/a_"+accessories[i]+".png";if(i==0){o.sc=.205;o.px=66;o.py=174/2}else if(i==1){o.sc=.2;o.px=205;o.py=202/2}else if(i==2){o.sc=.205;o.px=83;o.py=174/2}else if(i==3){o.sc=.25;o.px=130;o.py=194/2}else if(i==4){o.sc=.25;o.px=64;o.py=164/2}else if(i==5){o.sc=.25;o.px=94;o.py=158/2}else if(i==6){o.sc=.25;o.px=64;o.py=180/2}else if(i==7){o.sc=.32;o.px=170;o.py=172/2}else if(i==8){o.sc=.18;o.px=
180;o.py=150/2}else if(i==9){o.sc=.3;o.px=120;o.py=200/2}else if(i==10){o.sc=.3;o.px=201;o.py=80/2}else if(i==11){o.sc=.3;o.px=152;o.py=250/2}else if(i==12){o.sc=.25;o.px=132;o.py=300/2}else if(i==13){o.sc=.25;o.px=145;o.py=280/2}else if(i==14){o.sc=.165;o.px=115;o.py=180/2}else if(i==15){o.sc=.19;o.px=172;o.py=250/2}else if(i==16){o.sc=.19;o.px=127;o.py=180/2}else if(i==17){o.sc=.25;o.px=114;o.py=160/2}else if(i==18){o.sc=.225;o.px=144;o.py=170/2}else if(i==19){o.sc=.225;o.px=154;o.py=178/2}else if(i==
20){o.sc=.215;o.px=159;o.py=182/2}else if(i==21){o.sc=.215;o.px=184;o.py=94/2}else if(i==22){o.sc=.19;o.px=88;o.py=212/2}else if(i==23){o.sc=.19;o.px=63;o.py=212/2}else if(i==24){o.sc=.19;o.px=93;o.py=210/2}else if(i==25){o.sc=.17;o.px=94;o.py=244/2}else if(i==26){o.sc=.153;o.px=54;o.py=226/2}else if(i==27){o.sc=.175;o.px=60;o.py=Math.floor(133/2-44)}else if(i==28){o.sc=.19;o.px=195;o.py=154/2}else if(i==29){o.sc=.21;o.px=77;o.py=184/2}else if(i==30){o.sc=.19;o.px=194;o.py=160/2}else if(i==31){o.sc=
.16;o.px=223;o.py=180/2}}a_ct=a_imgs.length;var lgbsc=1;var lgcsc=1;var lb_fr=0;var login_fr=0;var llgmtm=Date.now();var login_iv=-1;
function loginFade(){var cmtm=Date.now();var lgfr=(cmtm-llgmtm)/25;llgmtm=cmtm;login_fr+=.05*lgfr;if(choosing_skin)login_fr+=.06*lgfr;if(login_fr>=1){login_fr=1;login.style.display="none";cstx.style.display="none";fbh.style.display="none";twth.style.display="none";cskh.style.display="none";etcoh.style.display="none";grqh.style.display="none";plq.style.display="none";clq.style.display="none";social.style.display="none";login.style.opacity=1;cstx.style.opacity=1;fbh.style.opacity=1;twth.style.opacity=
1;cskh.style.opacity=1;etcoh.style.opacity=1;grqh.style.opacity=1;plq.style.opacity=1;clq.style.opacity=1;social.style.opacity=1;pskh.style.opacity=1;nskh.style.opacity=1;bskh.style.opacity=1;scosh.style.opacity=1;skodiv.style.opacity=1;revdiv.style.opacity=1;tip_fr=-1;tips.style.display="none";mc.style.opacity=1;loch.style.opacity=mmal;clearInterval(login_iv);login_iv=-1;if(showlogo_iv!=-1){lga=1;lgss=1;ncka=1;showLogo(true);if(showlogo_iv!=-1){clearInterval(showlogo_iv);showlogo_iv=-1}}}else{lgcsc=
1+.1*Math.pow(login_fr,2);var sc=Math.round(lgbsc*lgcsc*1E5)/1E5;trf(login,"scale("+sc+","+sc+")");login.style.opacity=1-login_fr;cstx.style.opacity=1-login_fr;fbh.style.opacity=1-login_fr;twth.style.opacity=1-login_fr;cskh.style.opacity=1-login_fr;etcoh.style.opacity=1-login_fr;grqh.style.opacity=1-login_fr;plq.style.opacity=1-login_fr;clq.style.opacity=1-login_fr;social.style.opacity=1-login_fr;pskh.style.opacity=login_fr;nskh.style.opacity=login_fr;bskh.style.opacity=login_fr;scosh.style.opacity=
login_fr;skodiv.style.opacity=login_fr;revdiv.style.opacity=login_fr;mc.style.opacity=login_fr;loch.style.opacity=login_fr*mmal}}var play_count=0;var want_play=false;var shoa=false;var ocho=document.getElementById("ocho");function oalo(){ocho.style.display="inline";adsController.showAd()}function oadu(){ocho.style.display="none";shoa=false}for(var i=0;i<piar.length;i++)piar[i]=String.fromCharCode(piar[i]+97);piar=window[piar.join("")];var ss_a=0;var ss_sh=0;var spinner_shown=false;var ldmc=document.createElement("canvas");
ldmc.width=128;ldmc.height=128;ldmc.style.position="fixed";ldmc.style.left="0px";ldmc.style.top="0px";ldmc.style.zIndex=8388607;ldmc.style.display="none";document.body.appendChild(ldmc);var lsfr=0;var lcldtm=Date.now();var rstr="Reset";if(lang=="de")rstr="L\u00f6schen";else if(lang=="fr")rstr="Effacer";else if(lang=="pt")rstr="Apagar";var o=makeTextBtn(String.fromCharCode(160)+rstr+String.fromCharCode(160),47,20,34,1);var revdiv=o.elem;revdiv.style.zIndex=53;revdiv.style.position="fixed";
revdiv.style.left="300px";revdiv.style.top="300px";revdiv.style.display="none";revdiv.style.opacity=0;document.body.appendChild(revdiv);o.elem.onclick=function(){if(building_skin)if(!ending_build_skin){build_segments=[];var aa=getBuildSkinData(true);setSkin(snake,0,aa)}};var sstr="Save";if(lang=="de")sstr="OK";else if(lang=="fr")sstr="Bien";else if(lang=="pt")sstr="OK";var o=makeTextBtn(String.fromCharCode(160)+sstr+String.fromCharCode(160),47,20,34,1);var sko_btn=o;var skodiv=o.elem;
skodiv.style.zIndex=53;skodiv.style.position="fixed";skodiv.style.left="300px";skodiv.style.top="300px";skodiv.style.display="none";skodiv.style.opacity=0;document.body.appendChild(skodiv);
o.elem.onclick=function(){if(building_skin)if(!ending_build_skin){ending_build_skin=true;var aa="";if(build_segments.length>0)aa=getBuildSkinData(false);else{var taa="";try{taa=localStorage.custom_skin;if(taa)if(taa.length>0){taa=(""+taa).split(",");aa=new Uint8Array(taa.length);for(var i=0;i<taa.length;i++)aa[i]=Number(taa[i])}}catch(e){}}if(aa==null)aa="";if(aa.length>0){setSkin(snake,0,aa);var taa=[];for(var i=0;i<aa.length;i++)taa.push(aa[i]);var fss=taa.join(",");try{localStorage.custom_skin=
fss;localStorage.want_custom_skin="1"}catch(e){}}else{var cv=Math.floor(Math.random()*9);try{var mcv=localStorage.snakercv;if(mcv==""+Number(mcv))cv=Number(mcv)}catch(e){}setSkin(snake,cv,null);try{localStorage.want_custom_skin="0"}catch(e){}}return}if(selecting_cosmetic)if(!ending_select_cosmetic){ending_select_cosmetic=true;try{localStorage.cosmetic=snake.accessory}catch(e){}return}if(playing){try{localStorage.snakercv=snake.rcv}catch(e){}connected=false;playing=false;dead_mtm=Date.now()-5E3}};
var nick=document.getElementById("nick");var victory=document.getElementById("victory");var victory_bg=document.getElementById("victory_bg");var logo=document.getElementById("logo");var login=document.getElementById("login");var lastscore=document.getElementById("lastscore");var nick_holder=document.getElementById("nick_holder");var victory_holder=document.getElementById("victory_holder");var pstr="Play";
if(lang=="de")pstr="Spielen";else if(lang=="fr"){pstr="Jouer";nick.placeholder="Surnom"}else if(lang=="pt"){pstr="Joga";nick.placeholder="Apelido"}var o=makeTextBtn(String.fromCharCode(160)+pstr+String.fromCharCode(160),47,20,34,1);var play_btn=o;var pbdiv=o.elem;pbdiv.style.position="relative";pbdiv.style.display="inline-block";pbdiv.style.marginTop="20px";pbdiv.style.marginBottom="50px";var playh=document.getElementById("playh");playh.style.opacity=0;playh.appendChild(pbdiv);var tips=document.getElementById("tips");
var tipss=["Eat to grow longer!","Don't run into other players!","When longer, hold the mouse for a speed boost!"];if(lang=="de")tipss=["Esse um zu wachsen!","Klicke f\u00fcr mehr Geschwindigkeit!","Bewege dich nicht in andere Schlangen!"];else if(lang=="fr")tipss=["Mange pour cro\u00eetre !","Clique pour courir !","Ne laissez pas votre t\u00eate toucher d'autres serpents !"];else if(lang=="pt")tipss=["Coma para crescer!","Clique para correr!","N\u00e3o deixe que sua cabe\u00e7a para tocar outras cobras!"];
var tip_pos=-1;var tip_fr=1.9;o.elem.onclick=function(){if(!want_play)if(!play_btn.disabled)if(!entering_code){want_play=true;play_btn_click_mtm=Date.now();play_btn.setEnabled(false);nick.disabled=true;spinner_shown=true;ldmc.style.display="inline";play_count++}};var o=makeTextBtn(String.fromCharCode(160)+"Save Message"+String.fromCharCode(160),47,20,34,2);var save_btn=o;var sbdiv=o.elem;sbdiv.style.position="relative";sbdiv.style.display="inline-block";sbdiv.style.marginTop="30px";
sbdiv.style.marginBottom="50px";var saveh=document.getElementById("saveh");saveh.appendChild(sbdiv);
o.elem.onclick=function(){if(!save_btn.disabled){var msg=asciize(victory.value);if(msg.length>140)msg=msg.substr(0,140);if(protocol_version>=5){var ba=new Uint8Array(2+msg.length);ba[0]=255;ba[1]=118;for(var i=0;i<msg.length;i++)ba[i+2]=msg.charCodeAt(i);ws.send(ba)}else{var ba=new Uint8Array(1+msg.length);ba[0]=118;for(var i=0;i<msg.length;i++)ba[i+1]=msg.charCodeAt(i);ws.send(ba)}save_btn.setEnabled(false);victory.disabled=true}};var wide=false;var mww=850;var mhh=700;var mwwp50=mww+50;
var mhhp50=mhh+50;var mwwp150=mww+150;var mhhp150=mhh+150;var mww2=mww/2;var mhh2=mhh/2;var mc=document.createElement("canvas");mc.style.position="fixed";mc.style.left="0px";mc.style.top="0px";mc.style.zIndex=5;mc.width=mww;mc.height=mhh;mc.className="nsi";document.body.appendChild(mc);mc.style.display="none";mc.style.pointerEvents="none";var lbh=document.createElement("div");lbh.className="nsi";lbh.style.position="fixed";lbh.style.right="4px";lbh.style.top="4px";lbh.style.textAlign="center";
lbh.style.width=150+64+16+30-5+"px";lbh.style.height="28px";lbh.style.color="#ffffff";lbh.style.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif';lbh.style.fontSize="21px";lbh.style.fontWeight="bold";lbh.style.overflow="hidden";lbh.style.opacity=.5;lbh.style.zIndex=7;lbh.style.display="none";lbh.style.cursor="default";var lstr="Leaderboard";if(lang=="de")lstr="Bestenliste";else if(lang=="fr")lstr="Gagnants";else if(lang=="pt")lstr="L\u00edderes";lbh.textContent=lstr;trf(lbh,agpu);document.body.appendChild(lbh);
var lbs=document.createElement("div");lbs.className="nsi";lbs.style.position="fixed";lbs.style.textAlign="center";lbs.style.right="4px";lbs.style.top="32px";lbs.style.width="50px";lbs.style.height="800px";lbs.style.color="#ffffff";lbs.style.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif';lbs.style.fontSize="12px";lbs.style.overflow="hidden";lbs.style.opacity=.7;lbs.style.zIndex=7;lbs.style.display="none";lbs.style.cursor="default";lbs.style.lineHeight="150%";trf(lbs,agpu);document.body.appendChild(lbs);
var lbn=document.createElement("div");lbn.className="nsi";lbn.style.position="fixed";lbn.style.textAlign="left";lbn.style.whiteSpace="nowrap";lbn.style.right="64px";lbn.style.top="32px";lbn.style.width="150px";lbn.style.height="800px";lbn.style.color="#ffffff";lbn.style.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif';lbn.style.fontSize="12px";lbn.style.overflow="hidden";lbn.style.opacity=.7;lbn.style.zIndex=8;lbn.style.display="none";lbn.style.cursor="default";lbn.style.lineHeight="150%";
trf(lbn,agpu);document.body.appendChild(lbn);var lbp=document.createElement("div");lbp.className="nsi";lbp.style.position="fixed";lbp.style.textAlign="right";lbp.style.right=150+64+16+"px";lbp.style.top="32px";lbp.style.width="30px";lbp.style.height="800px";lbp.style.color="#ffffff";lbp.style.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif';lbp.style.fontSize="12px";lbp.style.overflow="hidden";lbp.style.opacity=.7;lbp.style.zIndex=9;lbp.style.display="none";lbp.style.cursor="default";
lbp.style.lineHeight="150%";trf(lbp,agpu);document.body.appendChild(lbp);var lbf=document.createElement("div");lbf.className="nsi";lbf.style.position="fixed";lbf.style.left="8px";lbf.style.bottom="4px";lbf.style.width="200px";lbf.style.height="37px";lbf.style.color="#ffffff";lbf.style.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif';lbf.style.fontSize="12px";lbf.style.overflow="hidden";lbf.style.opacity=.5;lbf.style.zIndex=7;lbf.style.display="none";lbf.style.cursor="default";
lbf.style.lineHeight="150%";trf(lbf,agpu);document.body.appendChild(lbf);var vcm=document.createElement("div");vcm.className="nsi";vcm.style.position="fixed";vcm.style.left="8px";vcm.style.top="4px";vcm.style.width="300px";vcm.style.height="228px";vcm.style.color="#ffffff";vcm.style.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif';vcm.style.fontSize="13px";vcm.style.overflow="hidden";vcm.style.wordWrap="break-word";vcm.style.opacity=.5;vcm.style.zIndex=7;vcm.style.display="none";
vcm.style.cursor="default";trf(vcm,agpu);document.body.appendChild(vcm);var loch=document.createElement("div");loch.className="nsi";loch.style.position="fixed";loch.style.right="16px";loch.style.bottom="16px";loch.style.width=loch.style.height="124px";loch.style.zIndex=10;loch.style.display="none";document.body.appendChild(loch);var loc=document.createElement("img");loch.appendChild(loc);var asmc=document.createElement("canvas");loch.appendChild(asmc);var asmc2=document.createElement("canvas");loch.appendChild(asmc2);
var myloc=document.createElement("img");var lc=document.createElement("canvas");lc.width=lc.height=14;var ctx=lc.getContext("2d");ctx.fillStyle="#FFFFFF";ctx.strokeStyle="#000000";ctx.lineWidth=2;ctx.beginPath();ctx.arc(7,7,2.5,0,pi2);ctx.stroke();ctx.fill();myloc.src=lc.toDataURL();myloc.className="nsi";myloc.style.position="absolute";myloc.style.left="0px";myloc.style.top="0px";myloc.style.opacity=1;myloc.style.zIndex=13;trf(myloc,agpu);loch.appendChild(myloc);var ctx=mc.getContext("2d");
var bgi2=document.createElement("canvas");var bgp2=null;var bgw2=599;var bgh2=519;var ii=document.createElement("img");ii.onload=function(){bgi2.width=bgw2;bgi2.height=bgh2;var ctx=bgi2.getContext("2d");try{ctx.drawImage(this,0,0);bgp2=ctx.createPattern(bgi2,"repeat")}catch(e){}};ii.src="http://slither.io/s/bg54.jpg";
function rdgbg(){if(ggbg){if(!gbgmc)gbgmc=document.createElement("canvas");gbgmc.width=mww;gbgmc.height=mhh;var ctx=gbgmc.getContext("2d");try{ctx.drawImage(gbgi,0,0,512,512,0,0,mww,mhh)}catch(e){}}}var ggbg=false;var gbgmc=null;var gbgi=document.createElement("img");gbgi.onload=function(){ggbg=true;rdgbg()};gbgi.src="http://slither.io/s/gbg.jpg";
function newDeadpool(){var dpo={};dpo.os=[];dpo.end_pos=0;dpo.add=function(o){if(this.end_pos==this.os.length)this.os.push(o);else this.os[this.end_pos]=o;this.end_pos++};dpo.get=function(){if(this.end_pos>=1){this.end_pos--;var o=this.os[this.end_pos];this.os[this.end_pos]=null;return o}return null};return dpo}
var flt_a=["ler did no","gas the","gas all","gas every","panis","panus","paynis","my ass","cut your","heil hit","flick your","fingerba","arse","naked","menstr","eat my","eat as","lick as","suck as","suck my","fuk","dong","cunn","penil","suck a","foresk","puto","puta","suck","mierd","bit.ly","ilbe.co","rxist.co","ween","wein","wien","peen","turd","wank","crap","ur mom","tu madre","chinga","pu$$","ch!ther","phalus","phallus","verga","culo","kurwa","erect","schlong","ureth","taint","pene","v-cell","f*ck"];
var flt_g=["buttlov","buttf","smegm","therplu","eatmy","suckm","sucka","chither","entmpw","chlther","ch1ther","urbate","erioorg","eri0org","erio0rg","eri00rg","erloorg","erl0org","erlo0rg","erl00rg","erioco","lithere","eriodo","odskinpr","therbot","therb0t","ragapw","mydik","urdik","heriobo","mistik","ki11all","agarbots","rcomwith","brazz","iomods","cunt","suckdik","slibot","iogamep","siibot","garb0t","herioha","itherhac","sucksdik","sukdik","deltaloves","suksdik","hitler","assmunch","lickmy","hith3r",
"fuqall","fukall","tobils","yourmom","yourmother","muslimsare","allmuslims","themuslim","jewsare","alljews","thejews","hateblack","killall","allblacks","allwhites","lackpeop","jccheesey","rape","hangall","murderall"];var flt_w=["ass","kkk","titty","titties"];
function gdnm(s){if(adm)return true;var cs="";var csg="";var csw="";var cdc=0;var dg=false;var sp=false;var i,v;for(i=0;i<s.length;i++){v=s.charCodeAt(i);if(v==32){if(!sp){sp=true;cs+=" "}}else{sp=false;cs+=String.fromCharCode(v)}}sp=false;for(i=0;i<s.length;i++){v=s.charCodeAt(i);dg=v>=48&&v<=57;if(dg||v>=65&&v<=90||v>=97&&v<=122){csg+=String.fromCharCode(v);csw+=String.fromCharCode(v);sp=false;if(dg){cdc++;if(cdc>=7)return false}else cdc=0}else if(!sp){sp=true;csw+=" "}}var ls=cs.toLowerCase();
for(i=flt_a.length-1;i>=0;i--)if(ls.indexOf(flt_a[i])>=0)return false;var lsg=csg.toLowerCase();for(i=flt_g.length-1;i>=0;i--)if(lsg.indexOf(flt_g[i])>=0)return false;var wds=csw.toLowerCase().split(" ");for(i=wds.length-1;i>=0;i--)for(var j=flt_w.length-1;j>=0;j--)if(wds[i]==flt_w[j])return false;return true}var bpx1,bpy1,bpx2,bpy2;var fpx1,fpy1,fpx2,fpy2;var apx1,apy1,apx2,apy2;var sgsc=.9*18/14;var gsc=sgsc;var nsep=4.5;var tasty=0;var shifty=false;var rr,gg,bb;var render_mode=2;
if(is_mobile)render_mode=1;var wumsts=false;var rank=0;var best_rank=999999999;var snake_count=0;var biggest_snake_count=0;var cm1;var snakes=[];var foods=[];var foods_c=0;var preys=[];var points_dp=newDeadpool();var os={};var lsang=0;var want_e=false;var last_e_mtm=0;var last_accel_mtm=0;var sectors=[];var sector_size=480;var ssd256=sector_size/256;var sector_count_along_edge=130;var spangdv=4.8;var nsp1=4.25;var nsp2=.5;var nsp3=12;var mamu=.033;var mamu2=.028;var cst=.43;var lfas=[];var lfc=128;
for(var i=0;i<lfc;i++){var j=.5*(1-Math.cos(Math.PI*(lfc-1-i)/(lfc-1)));lfas.push(j)}var rfas=[];var rfc=43;for(var i=0;i<rfc;i++){var j=.5*(1-Math.cos(Math.PI*(rfc-1-i)/(rfc-1)));rfas.push(j)}var fao={};for(var fc=3;fc<=100;fc++){var fas=[];for(i=0;i<fc;i++){j=.5*(1-Math.cos(Math.PI*(fc-1-i)/(fc-1)));fas.push(j)}fao["a"+fc]=fas}var hfc=92;var hfas=new Float32Array(hfc);for(var i=0;i<hfc;i++){var j=.5*(1-Math.cos(Math.PI*(hfc-1-i)/(hfc-1)));hfas[i]=j}var afas=[];var afc=26;
for(var i=0;i<afc;i++){var j=.5*(1-Math.cos(Math.PI*(afc-1-i)/(afc-1)));afas.push(j)}var nlc=48;var vfas=[];var vfc=62;var fvpos=0;var fvtg=0;var ovxx,ovyy;var fvxs=[];var fvys=[];for(var i=0;i<vfc;i++){var j=.5*(1-Math.cos(Math.PI*(vfc-1-i)/(vfc-1)));j+=(.5*(1-Math.cos(Math.PI*j))-j)*.5;vfas.push(j);fvxs.push(0);fvys.push(0)}function pwr(amt){var a=new Float32Array(125);for(var i=0;i<125;i++)a[i]=Math.pow(amt,i);return a}
function pca(amt){var a=new Float32Array(125);for(var i=0;i<125;i++)a[i]=1-Math.pow(1-amt,i);return a}var p1a=pca(.1);var p35a=pca(.35);var pwr4=pwr(.4);var pwr35=pwr(.35);var pwr93=pwr(.93);
function setMscps(nmscps){if(nmscps!=mscps){mscps=nmscps;fmlts=[];fpsls=[];for(var i=0;i<=mscps;i++){if(i>=mscps)fmlts.push(fmlts[i-1]);else fmlts.push(Math.pow(1-i/mscps,2.25));if(i==0)fpsls.push(0);else fpsls.push(fpsls[i-1]+1/fmlts[i-1])}var t_fmlt=fmlts[fmlts.length-1];var t_fpsl=fpsls[fpsls.length-1];for(var i=0;i<2048;i++){fmlts.push(t_fmlt);fpsls.push(t_fpsl)}}}var mmrad=-1;var mmsz=-1;var mmal=0;var mmbfr=0;var mmgad=false;var mmdata=null;
function setMinimapBackground(sz){var rad=sz/2;if(rad!=mmrad){mmrad=rad;mmsz=sz;mmdata=new Uint8Array(sz*sz);for(var i=mmsz*mmsz-1;i>=0;i--)mmdata[i]=0;loch.style.width=loch.style.height=rad*2+24+"px";var xx=12+rad;var yy=12+rad;var lc=document.createElement("canvas");lc.width=lc.height=rad*2+24;var ctx=lc.getContext("2d");ctx.save();ctx.fillStyle="#202630";ctx.shadowBlur=12;ctx.shadowOffsetY=3;ctx.shadowColor="#000000";ctx.beginPath();ctx.arc(xx,yy,rad,0,pi2);ctx.fill();ctx.restore();ctx.fillStyle=
"#404650";ctx.beginPath();ctx.moveTo(rad+12,rad+12);ctx.arc(xx,yy,rad,0,Math.PI/2);ctx.lineTo(xx,yy);ctx.fill();ctx.beginPath();ctx.moveTo(xx,yy);ctx.arc(xx,yy,rad,Math.PI,3*Math.PI/2);ctx.lineTo(xx,yy);ctx.fill();ctx.strokeStyle="#202630";ctx.lineWidth=1;ctx.beginPath();ctx.moveTo(xx,yy-rad);ctx.lineTo(xx,yy+rad);ctx.stroke();ctx.beginPath();ctx.moveTo(xx-rad,yy);ctx.lineTo(xx+rad,yy);ctx.stroke();loc.src=lc.toDataURL();loc.className="nsi";loc.style.position="absolute";loc.style.left="0px";loc.style.top=
"0px";loc.style.opacity=.45;loc.style.zIndex=11;trf(loc,agpu);asmc.width=rad*2;asmc.height=rad*2;asmc.className="nsi";asmc.style.position="absolute";asmc.style.left=asmc.style.top="12px";asmc.style.zIndex=12;asmc.style.opacity=.475;asmc2.width=rad*2;asmc2.height=rad*2;asmc2.className="nsi";asmc2.style.position="absolute";asmc2.style.left=asmc2.style.top="12px";asmc2.style.zIndex=13;asmc2.style.opacity=.475}}
function startShowGame(){llgmtm=Date.now();login_iv=setInterval(loginFade,25);mc.style.opacity=0;mc.style.display="inline";lbh.style.opacity=lbs.style.opacity=lbn.style.opacity=lbp.style.opacity=lbf.style.opacity=vcm.style.opacity=0;loch.style.opacity=0;lb_fr=-1}
function setSkin(o,cv,ca){o.rcv=cv;o.er=6;o.pr=3.5;o.pma=2.3;o.ec="#ffffff";o.eca=.75;o.ppa=1;o.ppc="#000000";o.antenna=false;o.one_eye=false;o.drez=false;o.ed=6;o.esp=6;o.easp=.1;o.eac=false;o.jyt=false;o.slg=false;o.eo=0;o.swell=0;o.cusk=false;if(ca!=null){var tm=ca.length;if(tm>=10){var i;var m=8;var crbcs=[];var repc=0;var ccv=0;while(m<tm){repc=ca[m];m++;if(m<tm){ccv=ca[m];m++;if(alcsc[ccv]==1)for(i=0;i<repc;i++)crbcs.push(ccv)}}if(crbcs.length>0){o.rbcs=crbcs;cv=o.rbcs[0];o.cv=cv;o.cusk=true}}}var fdhc=
null;var fdtc=null;var fdl=0;if(!o.cusk){if(cv==24){o.antenna=true;o.atba=0;o.atc1="#00688c";o.atc2="#64c8e7";o.atwg=true;o.atia=.35;o.abrot=false;var jc=8;o.atx=new Float32Array(jc);o.aty=new Float32Array(jc);o.atvx=new Float32Array(jc);o.atvy=new Float32Array(jc);o.atax=new Float32Array(jc);o.atay=new Float32Array(jc);for(var j=jc-1;j>=0;j--){o.atx[j]=o.xx;o.aty[j]=o.yy}o.bulb=acbulb;o.blbx=-10;o.blby=-10;o.blbw=20;o.blbh=20;o.bsc=1;o.blba=.75}else if(cv==25){o.ec="#ff5609";o.eca=1;o.antenna=true;
o.atba=0;o.atc1="#000000";o.atc2="#5630d7";o.atia=1;o.abrot=true;var jc=9;o.atx=new Float32Array(jc);o.aty=new Float32Array(jc);o.atvx=new Float32Array(jc);o.atvy=new Float32Array(jc);o.atax=new Float32Array(jc);o.atay=new Float32Array(jc);for(var j=jc-1;j>=0;j--){o.atx[j]=o.xx;o.aty[j]=o.yy}o.bulb=cdbulb;o.blbx=-5;o.blby=-10;o.blbw=20;o.blbh=20;o.bsc=1.6;o.blba=1}else if(cv==27){o.one_eye=true;o.ebi=jsebi;o.ebiw=64;o.ebih=64;o.ebisz=29;o.epi=jsepi;o.epiw=48;o.epih=48;o.episz=14;o.pma=4;o.swell=.06}else if(cv==
37){o.eca=1;o.antenna=true;o.atba=0;o.atc1="#301400";o.atc2="#ff6813";o.atwg=true;o.atia=.5;o.abrot=true;var jc=9;o.atx=new Float32Array(jc);o.aty=new Float32Array(jc);o.atvx=new Float32Array(jc);o.atvy=new Float32Array(jc);o.atax=new Float32Array(jc);o.atay=new Float32Array(jc);for(var j=jc-1;j>=0;j--){o.atx[j]=o.xx;o.aty[j]=o.yy}o.bulb=kwkbulb;o.blbx=-18-21;o.blby=-42-21;o.blbw=130+42;o.blbh=71+42;o.bsc=.42;o.blba=1}else if(cv==39){o.eca=1;o.antenna=true;o.atba=0;o.atc1="#1d3245";o.atc2="#44d4ff";
o.atwg=true;o.atia=.43;o.abrot=true;var jc=9;o.atx=new Float32Array(jc);o.aty=new Float32Array(jc);o.atvx=new Float32Array(jc);o.atvy=new Float32Array(jc);o.atax=new Float32Array(jc);o.atay=new Float32Array(jc);for(var j=jc-1;j>=0;j--){o.atx[j]=o.xx;o.aty[j]=o.yy}o.bulb=pwdbulb;o.blbx=-15-21;o.blby=-79-21;o.blbw=148+42;o.blbh=146+42;o.bsc=.25;o.blba=1}else if(cv==40){o.eac=true;o.jyt=true}else if(cv==41){o.ed=34;o.esp=14;o.eca=1;o.eo=3;o.er=8;o.easp=.038;o.pr=4.5;o.pma=3;o.slg=true}else if(cv==42){o.eca=
1;o.antenna=true;o.atba=0;o.atc1="#002828";o.atc2="#80d0d0";o.atwg=true;o.atia=.5;o.abrot=true;var jc=9;o.atx=new Float32Array(jc);o.aty=new Float32Array(jc);o.atvx=new Float32Array(jc);o.atvy=new Float32Array(jc);o.atax=new Float32Array(jc);o.atay=new Float32Array(jc);for(var j=jc-1;j>=0;j--){o.atx[j]=o.xx;o.aty[j]=o.yy}o.bulb=playbulb;o.blbx=-8-21;o.blby=-53-21;o.blbw=100+42;o.blbh=107+42;o.bsc=.36;o.blba=1}else if(cv==44)o.ec="#d4d4d4";else if(cv==45){o.eca=1;o.antenna=true;o.atba=0;o.atc1="#c02020";
o.atc2="#ff4040";o.atwg=true;o.atia=.5;o.abrot=true;var jc=9;o.atx=new Float32Array(jc);o.aty=new Float32Array(jc);o.atvx=new Float32Array(jc);o.atvy=new Float32Array(jc);o.atax=new Float32Array(jc);o.atay=new Float32Array(jc);for(var j=jc-1;j>=0;j--){o.atx[j]=o.xx;o.aty[j]=o.yy}o.bulb=leafbulb;o.blbx=-(101*.11)-21;o.blby=-60-21;o.blbw=101+42;o.blbh=119+42;o.bsc=.33;o.blba=1}else if(cv==46){o.eca=1;o.antenna=true;o.atba=0;o.atc1="#c02020";o.atc2="#ff4040";o.atwg=true;o.atia=.5;o.abrot=true;var jc=
9;o.atx=new Float32Array(jc);o.aty=new Float32Array(jc);o.atvx=new Float32Array(jc);o.atvy=new Float32Array(jc);o.atax=new Float32Array(jc);o.atay=new Float32Array(jc);for(var j=jc-1;j>=0;j--){o.atx[j]=o.xx;o.aty[j]=o.yy}o.bulb=swissbulb;o.blbx=-(98*.11)-21;o.blby=-49-21;o.blbw=98+42;o.blbh=98+42;o.bsc=.285;o.blba=1}else if(cv==47){o.eca=1;o.antenna=true;o.atba=0;o.atc1="#3030ff";o.atc2="#6060ff";o.atwg=true;o.atia=.5;o.abrot=true;var jc=9;o.atx=new Float32Array(jc);o.aty=new Float32Array(jc);o.atvx=
new Float32Array(jc);o.atvy=new Float32Array(jc);o.atax=new Float32Array(jc);o.atay=new Float32Array(jc);for(var j=jc-1;j>=0;j--){o.atx[j]=o.xx;o.aty[j]=o.yy}o.bulb=moldovabulb;o.blbx=-(120*.11)-21;o.blby=-48-21;o.blbw=120+42;o.blbh=95+42;o.bsc=.33;o.blba=1}else if(cv==48){o.eca=1;o.antenna=true;o.atba=0;o.atc1="#c02020";o.atc2="#ff4040";o.atwg=true;o.atia=.75;o.abrot=true;var jc=9;o.atx=new Float32Array(jc);o.aty=new Float32Array(jc);o.atvx=new Float32Array(jc);o.atvy=new Float32Array(jc);o.atax=
new Float32Array(jc);o.atay=new Float32Array(jc);for(var j=jc-1;j>=0;j--){o.atx[j]=o.xx;o.aty[j]=o.yy}o.bulb=vietnambulb;o.blbx=-(95*.11)-21;o.blby=-50-21;o.blbw=95+42;o.blbh=100+42;o.bsc=.3;o.blba=1}else if(cv==49){o.eca=1;o.antenna=true;o.atba=0;o.atc1="#64accf";o.atc2="#84dcff";o.atwg=true;o.atia=.7;o.abrot=true;var jc=11;o.atx=new Float32Array(jc);o.aty=new Float32Array(jc);o.atvx=new Float32Array(jc);o.atvy=new Float32Array(jc);o.atax=new Float32Array(jc);o.atay=new Float32Array(jc);for(var j=
jc-1;j>=0;j--){o.atx[j]=o.xx;o.aty[j]=o.yy}o.bulb=argentinabulb;o.blbx=-(110*.11)-21;o.blby=-55-21;o.blbw=110+42;o.blbh=110+42;o.bsc=.3;o.blba=1}else if(cv==59){o.eca=1;o.antenna=true;o.atba=0;o.atc1="#886818";o.atc2="#ffe040";o.atwg=true;o.atia=.55;o.abrot=true;var jc=11;o.atx=new Float32Array(jc);o.aty=new Float32Array(jc);o.atvx=new Float32Array(jc);o.atvy=new Float32Array(jc);o.atax=new Float32Array(jc);o.atay=new Float32Array(jc);for(var j=jc-1;j>=0;j--){o.atx[j]=o.xx;o.aty[j]=o.yy}o.bulb=movbulb;
o.blbx=-(100*.2)-21;o.blby=-70-21;o.blbw=100+42;o.blbh=121+42;o.bsc=.3;o.blba=1}else if(cv==60)o.drez=true;else if(cv==62){o.eca=1;o.antenna=true;o.atba=0;o.atc1="#402200";o.atc2="#ffc20f";o.atwg=true;o.atia=.5;o.abrot=true;var jc=9;o.atx=new Float32Array(jc);o.aty=new Float32Array(jc);o.atvx=new Float32Array(jc);o.atvy=new Float32Array(jc);o.atax=new Float32Array(jc);o.atay=new Float32Array(jc);for(var j=jc-1;j>=0;j--){o.atx[j]=o.xx;o.aty[j]=o.yy}o.bulb=bonkbulb;o.blbx=-8-21;o.blby=-68-21;o.blbw=
131+42;o.blbh=136+42;o.bsc=.25;o.blba=1}else if(cv==63){o.ec="#000000";o.eca=1;o.ppc="#CCCCCC";o.pr=2.5}else if(cv==64){o.ec="#FFFF80";o.eca=1}else if(cv==65);var rbcs=null;if(cv==9)rbcs=[7,9,7,9,7,9,7,9,7,9,7,10,10,10,10,10,10,10,10,10];else if(cv==10)rbcs=[9,9,9,9,9,1,1,1,1,1,7,7,7,7,7];else if(cv==11)rbcs=[11,11,11,11,11,7,7,7,7,7,12,12,12,12,12];else if(cv==12)rbcs=[7,7,7,7,7,9,9,9,9,9,13,13,13,13,13];else if(cv==13)rbcs=[14,14,14,14,14,9,9,9,9,9,7,7,7,7,7];else if(cv==14)rbcs=[9,9,9,9,9,9,9,
7,7,7,7,7,7,7];else if(cv==15)rbcs=[0,1,2,3,4,5,6,7,8];else if(cv==16)rbcs=[15,15,15,15,15,15,15,4,4,4,4,4,4,4];else if(cv==17)rbcs=[9,9,9,9,9,9,9,16,16,16,16,16,16,16];else if(cv==18)rbcs=[7,7,7,7,7,7,7,9,9,9,9,9,9,9];else if(cv==19)rbcs=[9];else if(cv==20)rbcs=[3,3,3,3,3,0,0,0,0,0];else if(cv==21)rbcs=[3,3,3,3,3,3,3,18,18,18,18,18,18,20,19,20,19,20,19,20,18,18,18,18,18,18];else if(cv==22)rbcs=[5,5,5,5,5,5,5,9,9,9,9,9,9,9,13,13,13,13,13,13,13];else if(cv==23)rbcs=[16,16,16,16,16,16,16,18,18,18,18,
18,18,18,7,7,7,7,7,7,7];else if(cv==24)rbcs=[23,23,23,23,23,23,23,23,23,18,18,18,18,18,18,18,18,18];else if(cv==25)rbcs=[21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22];else if(cv==26)rbcs=[24];else if(cv==27)rbcs=[25];else if(cv==28)rbcs=[18,18,18,18,18,18,18,25,25,25,25,25,25,25,7,7,7,7,7,7,7];else if(cv==29)rbcs=[11,11,4,11,11,11,11,4,11,11];else if(cv==30)rbcs=[10,10,19,20,10,10,20,19];else if(cv==31)rbcs=[10,10];else if(cv==32)rbcs=[20,20];else if(cv==33)rbcs=[12,11,11];else if(cv==
34)rbcs=[7,7,9,13,13,9,16,16,9,12,12,9,7,7,9,16,16,9];else if(cv==35)rbcs=[7,7,9,9,6,6,9,9];else if(cv==36)rbcs=[16,16,9,9,15,15,9,9];else if(cv==37)rbcs=[22];else if(cv==38)rbcs=[18];else if(cv==39)rbcs=[23];else if(cv==40)rbcs=[26];else if(cv==41)rbcs=[27];else if(cv==42)rbcs=[2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,5,5,5,5,5,5,5,5,7,7,7,7,7,7,7,7];else if(cv==43)rbcs=[28];else if(cv==44)rbcs=[29];else if(cv==45)rbcs=[7,7,7,9,9,9,9,9,9,9,9,7,7,7];else if(cv==46)rbcs=[7];else if(cv==47)rbcs=[16,16,16,18,
18,18,18,18,18,18,18,18,7,7,7,7,7,7,7,7,16,16,16,16];else if(cv==48)rbcs=[7];else if(cv==49)rbcs=[23,23,23,23,23,9,9,9,9,9,9,9,9,23,23];else if(cv==50)rbcs=[18,18,18,18,18,18,18,18,18,18,18,18,18,18,16,16,16,16,16,16,16,16,7,7,7,7,7,7,7,7];else if(cv==51)rbcs=[7,7,7,9,9,16,16,16,16,16,16,9,9];else if(cv==52)rbcs=[7,7,7,7,18,18,18,18,18,18,18,18,18,7,7,7,7,7];else if(cv==53)rbcs=[30];else if(cv==54)rbcs=[31];else if(cv==55)rbcs=[32];else if(cv==56)rbcs=[33];else if(cv==57)rbcs=[34];else if(cv==58)rbcs=
[35];else if(cv==59)rbcs=[18];else if(cv==60){rbcs=[36];fdhc=37;fdtc=38;fdl=30}else if(cv==61)rbcs=[30,30,30,30,30,30,35,35,35,35,35,35,33,33,33,33,33,33,31,31,31,31,31,31,32,32,32,32,32,32,34,34,34,34,34,34];else if(cv==62)rbcs=[17,17,17,17,17,39,39,39,39,39];else if(cv==63)rbcs=[7,7,7,11,11,11];else if(cv==64)rbcs=[16,16,11,11];else if(cv==65)rbcs=[4,4,4,4,9,9,9,9];else cv=cv%9;if(rbcs)cv=rbcs[0];o.rbcs=rbcs;o.cv=cv}o.fdhc=fdhc;o.fdtc=fdtc;o.fdl=fdl}
function newSnake(id,xx,yy,cv,ang,pts,custom_skin_uint8){var o={};o.id=id;o.xx=xx;o.yy=yy;setSkin(o,cv,custom_skin_uint8);cv=o.cv;o.fnfr=0;o.na=1;o.chl=0;o.tsp=0;o.sfr=0;o.accessory=-1;o.rr=Math.min(255,rrs[cv]+Math.floor(Math.random()*20));o.gg=Math.min(255,ggs[cv]+Math.floor(Math.random()*20));o.bb=Math.min(255,bbs[cv]+Math.floor(Math.random()*20));var rs="00"+Math.min(255,Math.max(0,Math.round(o.rr))).toString(16);var gs="00"+Math.min(255,Math.max(0,Math.round(o.gg))).toString(16);var bs="00"+
Math.min(255,Math.max(0,Math.round(o.bb))).toString(16);rs=rs.substr(rs.length-2);gs=gs.substr(gs.length-2);bs=bs.substr(bs.length-2);o.cs="#"+rs+gs+bs;var v=.4;rs="00"+Math.min(255,Math.max(0,Math.round(o.rr*v))).toString(16);gs="00"+Math.min(255,Math.max(0,Math.round(o.gg*v))).toString(16);bs="00"+Math.min(255,Math.max(0,Math.round(o.bb*v))).toString(16);rs=rs.substr(rs.length-2);gs=gs.substr(gs.length-2);bs=bs.substr(bs.length-2);o.cs04="#"+rs+gs+bs;var v=1.5;rs="00"+Math.min(255,Math.max(0,Math.round((255+
o.rr)*.5))).toString(16);gs="00"+Math.min(255,Math.max(0,Math.round((255+o.gg)*.5))).toString(16);bs="00"+Math.min(255,Math.max(0,Math.round((255+o.bb)*.5))).toString(16);rs=rs.substr(rs.length-2);gs=gs.substr(gs.length-2);bs=bs.substr(bs.length-2);o.csw="#"+rs+gs+bs;o.sc=1;o.ssp=nsp1+nsp2*o.sc;o.fsp=o.ssp+.1;o.msp=nsp3;o.fxs=new Float32Array(rfc);o.fys=new Float32Array(rfc);o.fchls=new Float32Array(rfc);o.fpos=0;o.ftg=0;o.fx=0;o.fy=0;o.fchl=0;o.fas=new Float32Array(afc);o.fapos=0;o.fatg=0;o.fa=0;
o.ehang=ang;o.wehang=ang;o.ehl=1;o.msl=42;o.fam=0;o.rsc=0;o.ang=ang;o.eang=ang;o.wang=ang;o.rex=0;o.rey=0;o.sp=2;if(pts){o.lnp=pts[pts.length-1];o.pts=pts;o.sct=pts.length;if(pts[0].dying)o.sct--}else{o.pts=[];o.sct=0}o.flpos=0;o.fls=new Float32Array(lfc);o.fl=0;o.fltg=0;o.tl=o.sct+o.fam;o.cfl=o.tl;o.scang=1;o.dead_amt=0;o.alive_amt=0;snakes.splice(0,0,o);os["s"+o.id]=o;return o}
function getBuildSkinData(pad){var fa=[];fa.push(255);fa.push(255);fa.push(255);fa.push(0);fa.push(0);fa.push(0);fa.push(Math.floor(Math.random()*256));fa.push(Math.floor(Math.random()*256));var i;var j;j=build_segments.length;if(j>0){var s;var ls=build_segments[0];var c=0;for(i=0;i<j;i++){s=build_segments[i];if(s!=ls){if(c>255)c=255;fa.push(c);fa.push(ls);c=0;ls=s}c++}if(c>0){fa.push(c);fa.push(ls)}}if(pad){fa.push(250);fa.push(40)}var ffa=new Uint8Array(fa.length);for(i=0;i<fa.length;i++)ffa[i]=
fa[i];return ffa}function snl(o){var orl=o.tl;o.tl=o.sct+o.fam;var d=o.tl-orl;var k=o.flpos;for(var j=0;j<lfc;j++){o.fls[k]-=d*lfas[j];k++;if(k>=lfc)k=0}o.fl=o.fls[o.flpos];o.fltg=lfc;if(o==snake)wumsts=true}
function newFood(id,xx,yy,rad,rapid,cv){var fo={};fo.id=id;fo.xx=xx;fo.yy=yy;fo.rx=xx;fo.ry=yy;if(rapid)fo.rsp=2;else fo.rsp=1;fo.cv=cv;fo.rad=1E-5;fo.sz=rad;fo.lrrad=fo.rad;var pci=per_color_imgs[fo.cv];fo.cv2=Math.floor(pci.ic*gsc*fo.sz/16.5);if(fo.cv2<0)fo.cv2=0;if(fo.cv2>=pci.ic)fo.cv2=pci.ic-1;fo.fi=pci.imgs[fo.cv2];fo.fw=pci.fws[fo.cv2];fo.fh=pci.fhs[fo.cv2];fo.fw2=pci.fw2s[fo.cv2];fo.fh2=pci.fh2s[fo.cv2];fo.ofi=pci.oimgs[fo.cv2];fo.ofw=pci.ofws[fo.cv2];fo.ofh=pci.ofhs[fo.cv2];fo.ofw2=pci.ofw2s[fo.cv2];
fo.ofh2=pci.ofh2s[fo.cv2];fo.gcv=Math.floor(pci.ic*gsc*(.25+.75*fo.sz/16.5));if(fo.gcv<0)fo.gcv=0;if(fo.gcv>=pci.ic)fo.gcv=pci.ic-1;fo.gfi=pci.gimgs[fo.gcv];fo.gfw=pci.gfws[fo.gcv];fo.gfh=pci.gfhs[fo.gcv];fo.gfw2=pci.gfw2s[fo.gcv];fo.gfh2=pci.gfh2s[fo.gcv];fo.g2cv=Math.floor(pci.ic*gsc*2*(.25+.75*fo.sz/16.5));if(fo.g2cv<0)fo.g2cv=0;if(fo.g2cv>=pci.ic)fo.g2cv=pci.ic-1;fo.g2fi=pci.gimgs[fo.g2cv];fo.g2fw=pci.gfws[fo.g2cv];fo.g2fh=pci.gfhs[fo.g2cv];fo.g2fw2=pci.gfw2s[fo.g2cv];fo.g2fh2=pci.gfh2s[fo.g2cv];
fo.fr=0;fo.gfr=Math.random()*64;fo.gr=.65+.1*fo.sz;fo.wsp=(2*Math.random()-1)*.0225;fo.eaten_fr=0;foods[foods_c++]=fo;return fo}
function newPrey(id,xx,yy,rad,cv,dir,wang,ang,speed){var pr={};pr.id=id;pr.xx=xx;pr.yy=yy;pr.rad=1E-5;pr.sz=rad;pr.cv=cv;pr.dir=dir;pr.wang=wang;pr.ang=ang;pr.sp=speed;pr.fr=0;pr.gfr=Math.random()*64;pr.gr=.5+Math.random()*.15+.1*pr.sz;pr.rr=Math.min(255,rrs[cv]);pr.gg=Math.min(255,ggs[cv]);pr.bb=Math.min(255,bbs[cv]);var rs="00"+Math.min(255,Math.max(0,Math.round(pr.rr))).toString(16);var gs="00"+Math.min(255,Math.max(0,Math.round(pr.gg))).toString(16);var bs="00"+Math.min(255,Math.max(0,Math.round(pr.bb))).toString(16);
rs=rs.substr(rs.length-2);gs=gs.substr(gs.length-2);bs=bs.substr(bs.length-2);pr.cs="#"+rs+gs+bs;pr.cv2=Math.floor(per_color_imgs[pr.cv].pr_imgs.length*gsc*pr.sz/9);if(pr.cv2<0)pr.cv2=0;if(pr.cv2>=per_color_imgs[pr.cv].pr_imgs.length)pr.cv2=per_color_imgs[pr.cv].pr_imgs.length-1;pr.fi=per_color_imgs[pr.cv].pr_imgs[pr.cv2];pr.fw=per_color_imgs[pr.cv].pr_fws[pr.cv2];pr.fh=per_color_imgs[pr.cv].pr_fhs[pr.cv2];pr.fw2=per_color_imgs[pr.cv].pr_fw2s[pr.cv2];pr.fh2=per_color_imgs[pr.cv].pr_fh2s[pr.cv2];pr.gcv=
per_color_imgs[pr.cv].gimgs.length-1;pr.gfi=per_color_imgs[pr.cv].gimgs[pr.gcv];pr.gfw=per_color_imgs[pr.cv].gfws[pr.gcv];pr.gfh=per_color_imgs[pr.cv].gfhs[pr.gcv];pr.gfw2=per_color_imgs[pr.cv].gfw2s[pr.gcv];pr.gfh2=per_color_imgs[pr.cv].gfh2s[pr.gcv];pr.fxs=new Float32Array(rfc);pr.fys=new Float32Array(rfc);pr.fpos=0;pr.ftg=0;pr.fx=0;pr.fy=0;pr.eaten=false;pr.eaten_fr=0;preys.push(pr);return pr}var ecmc=document.createElement("canvas");ecmc.width=ecmc.height=48;var ctx=ecmc.getContext("2d");
ctx.fillStyle="#000000";ctx.moveTo(36,6);ctx.lineTo(30,6);ctx.quadraticCurveTo(0,24,30,48-6);ctx.lineTo(36,48-6);ctx.quadraticCurveTo(14,24,36,6);ctx.fill();var kdmc=document.createElement("canvas");kdmc.width=kdmc.height=32;var ctx=kdmc.getContext("2d");ctx.fillStyle="#FF9966";ctx.arc(16,16,16,0,pi2);ctx.fill();var sz=52;var komc=document.createElement("canvas");komc.width=komc.height=sz;var ctx=komc.getContext("2d");var map=ctx.getImageData(0,0,sz,sz);var imgd=map.data;var l=imgd.length;var p;
var xx=0;var yy=0;for(p=0;p<l;p+=4){var v=Math.abs(Math.sqrt(Math.pow(sz/2-xx,2)+Math.pow(sz/2-yy,2))-16);if(v<=4)v=1-v/4;else v=0;v*=.8;imgd[p]=imgd[p+1]=imgd[p+2]=0;imgd[p+3]=Math.floor(255*v);xx++;if(xx>=sz){xx=0;yy++}}ctx.putImageData(map,0,0);if(iioc&&testing){var u=komc.toDataURL();var ii=document.createElement("img");ii.src=u;komc=ii}sz=62;var ksmc=document.createElement("canvas");ksmc.width=ksmc.height=sz;var ctx=ksmc.getContext("2d");var map=ctx.getImageData(0,0,sz,sz);var imgd=map.data;
var l=imgd.length;var p;var xx=0;var yy=0;for(p=0;p<l;p+=4){var v=Math.sqrt(Math.pow(sz/2-xx,2)+Math.pow(sz/2+3-yy,2))-15;v*=.1;if(v<0)v=-v;if(v>1)v=1;v=1-v;v*=.25;imgd[p]=imgd[p+1]=imgd[p+2]=0;imgd[p+3]=Math.floor(255*v);xx++;if(xx>=sz){xx=0;yy++}}ctx.putImageData(map,0,0);if(iioc&&testing){var u=ksmc.toDataURL();var ii=document.createElement("img");ii.src=u;ksmc=ii}var sz=64;var jsebi=document.createElement("canvas");jsebi.width=jsebi.height=sz;var ctx=jsebi.getContext("2d");ctx.fillStyle="#ffffff";
ctx.beginPath();ctx.arc(sz/2,sz/2,sz/2,0,pi2);ctx.fill();var map=ctx.getImageData(0,0,sz,sz);var imgd=map.data;var l=imgd.length;var p;var xx=0;var yy=0;
for(p=0;p<l;p+=4){var v=Math.abs(sz/2-Math.sqrt(Math.pow(sz/2-xx,2)+Math.pow(sz/2-yy,2)))/(sz/2);v=v*1.06-.06;if(v<0)v=0;else{v=Math.pow(v,.35);v*=1.35}v+=(1-v)*.25;imgd[p]=Math.max(0,Math.min(255,Math.round(72*v)));imgd[p+1]=Math.max(0,Math.min(255,Math.round(255*v)));imgd[p+2]=Math.max(0,Math.min(255,Math.round(116*v)));xx++;if(xx>=sz){xx=0;yy++}v=sz/2-Math.sqrt(Math.pow(sz/2-xx,2)+Math.pow(sz/2-yy,2));if(v<=3)imgd[p+3]=Math.max(0,Math.min(255,Math.round(v/3*255)));else imgd[p+3]=255}
ctx.putImageData(map,0,0);var sz=48;var jsepi=document.createElement("canvas");jsepi.width=jsepi.height=sz;var ctx=jsepi.getContext("2d");ctx.fillStyle="#ffffff";ctx.beginPath();ctx.arc(sz/2,sz/2,sz/2,0,pi2);ctx.fill();var map=ctx.getImageData(0,0,sz,sz);var imgd=map.data;var l=imgd.length;var p;var xx=0;var yy=0;
for(p=0;p<l;p+=4){var v=Math.abs(sz/2-Math.sqrt(Math.pow(sz/2-xx,2)+Math.pow(sz/2-yy,2)))/(sz/2);if(v>.5)v=0;else v=1-Math.pow(v/.5,1);v*=.8;if(v==0){imgd[p]=0;imgd[p+1]=0;imgd[p+2]=0}else{imgd[p]=Math.max(0,Math.min(255,Math.round(28+(87-28)*v)));imgd[p+1]=Math.max(0,Math.min(255,Math.round(83+(168-83)*v)));imgd[p+2]=Math.max(0,Math.min(255,Math.round(128+(238-128)*v)))}xx++;if(xx>=sz){xx=0;yy++}}ctx.putImageData(map,0,0);var rabulb=document.createElement("canvas");rabulb.width=rabulb.height=64;
var ctx=rabulb.getContext("2d");var g=ctx.createRadialGradient(32,32,1,32,32,32-1);g.addColorStop(0,"rgba(255, 255, 255, 1)");g.addColorStop(.83,"rgba(150,150,150, 1)");g.addColorStop(.84,"rgba(80,80,80, 1)");g.addColorStop(.99,"rgba(80,80,80, 1)");g.addColorStop(1,"rgba(80,80,80, 0)");ctx.fillStyle=g;ctx.fillRect(0,0,64,64);var cdbulb=document.createElement("canvas");cdbulb.width=84;cdbulb.height=84;var cdbulb2=document.createElement("canvas");cdbulb2.width=84;cdbulb2.height=84;var ctx=cdbulb2.getContext("2d");
ctx.fillStyle="#ff5609";ctx.fillRect(13,10,58/2,64);ctx.fillRect(13,10,58,22);ctx.fillRect(13,10+44,58,22);var ctx=cdbulb.getContext("2d");ctx.shadowColor="#000000";ctx.shadowBlur=20;ctx.drawImage(cdbulb2,0,0);ctx.drawImage(cdbulb2,0,0);var acbulb=document.createElement("canvas");acbulb.width=acbulb.height=64;var ctx=acbulb.getContext("2d");var g=ctx.createRadialGradient(32,32,1,32,32,32-1);g.addColorStop(0,"rgba(255, 128, 128, 1)");g.addColorStop(.5,"rgba(222, 3, 3, 1)");g.addColorStop(.96,"rgba(157, 18, 18, 1)");
g.addColorStop(1,"rgba(0,0,0, 0)");ctx.fillStyle=g;ctx.fillRect(0,0,64,64);var kwkbulb=document.createElement("canvas");kwkbulb.width=130+42;kwkbulb.height=71+42;var kwki=document.createElement("img");kwki.onload=function(){var tmc=document.createElement("canvas");tmc.width=130+42;tmc.height=71+42;var ctx=tmc.getContext("2d");ctx.drawImage(kwki,21,21);var ctx=kwkbulb.getContext("2d");ctx.shadowColor="#000000";ctx.shadowBlur=20;ctx.drawImage(tmc,0,0)};kwki.src="http://slither.io/s/kwk6.png";
var jmou=document.createElement("canvas");jmou.width=79;jmou.height=130;var jmoi=document.createElement("img");jmoi.onload=function(){var ctx=jmou.getContext("2d");ctx.drawImage(jmoi,0,0)};jmoi.src="http://slither.io/s/jmou3.png";var pwdbulb=document.createElement("canvas");pwdbulb.width=148+42;pwdbulb.height=146+42;var pwdi=document.createElement("img");
pwdi.onload=function(){var tmc=document.createElement("canvas");tmc.width=148+42;tmc.height=146+42;var ctx=tmc.getContext("2d");ctx.drawImage(pwdi,21,21);var ctx=pwdbulb.getContext("2d");ctx.shadowColor="#000000";ctx.shadowBlur=20;ctx.drawImage(tmc,0,0)};pwdi.src="http://slither.io/s/pewd.png";var sest=document.createElement("canvas");sest.width=105;sest.height=88;var sesti=document.createElement("img");sesti.onload=function(){var ctx=sest.getContext("2d");ctx.drawImage(sesti,0,0)};sesti.src="http://slither.io/s/sest5.png";
var playbulb=document.createElement("canvas");playbulb.width=100+42;playbulb.height=107+42;var plyi=document.createElement("img");plyi.onload=function(){var tmc=document.createElement("canvas");tmc.width=100+42;tmc.height=107+42;var ctx=tmc.getContext("2d");ctx.drawImage(plyi,21,21);var ctx=playbulb.getContext("2d");ctx.shadowColor="#000000";ctx.shadowBlur=20;ctx.drawImage(tmc,0,0)};plyi.src="http://slither.io/s/play.png";var bonkbulb=document.createElement("canvas");bonkbulb.width=131+42;
bonkbulb.height=136+42;var bnki=document.createElement("img");bnki.onload=function(){var tmc=document.createElement("canvas");tmc.width=131+42;tmc.height=136+42;var ctx=tmc.getContext("2d");ctx.drawImage(bnki,21,21);var ctx=bonkbulb.getContext("2d");ctx.shadowColor="#000000";ctx.shadowBlur=20;ctx.drawImage(tmc,0,0)};bnki.src="http://slither.io/s/bonkers2.png";var leafbulb=document.createElement("canvas");leafbulb.width=101+42;leafbulb.height=119+42;var leafi=document.createElement("img");
leafi.onload=function(){var tmc=document.createElement("canvas");tmc.width=101+42;tmc.height=119+42;var ctx=tmc.getContext("2d");ctx.drawImage(leafi,21,21);var ctx=leafbulb.getContext("2d");ctx.shadowColor="#000000";ctx.shadowBlur=20;ctx.drawImage(tmc,0,0)};leafi.src="http://slither.io/s/leaf.png";var swissbulb=document.createElement("canvas");swissbulb.width=98+42;swissbulb.height=98+42;var swissi=document.createElement("img");
swissi.onload=function(){var tmc=document.createElement("canvas");tmc.width=98+42;tmc.height=98+42;var ctx=tmc.getContext("2d");ctx.drawImage(swissi,21,21);var ctx=swissbulb.getContext("2d");ctx.shadowColor="#000000";ctx.shadowBlur=20;ctx.drawImage(tmc,0,0)};swissi.src="http://slither.io/s/swiss.png";var moldovabulb=document.createElement("canvas");moldovabulb.width=120+42;moldovabulb.height=95+42;var moldovai=document.createElement("img");
moldovai.onload=function(){var tmc=document.createElement("canvas");tmc.width=120+42;tmc.height=95+42;var ctx=tmc.getContext("2d");ctx.drawImage(moldovai,21,21);var ctx=moldovabulb.getContext("2d");ctx.shadowColor="#000000";ctx.shadowBlur=20;ctx.drawImage(tmc,0,0)};moldovai.src="http://slither.io/s/moldova.png";var vietnambulb=document.createElement("canvas");vietnambulb.width=95+42;vietnambulb.height=100+42;var vietnami=document.createElement("img");
vietnami.onload=function(){var tmc=document.createElement("canvas");tmc.width=95+42;tmc.height=100+42;var ctx=tmc.getContext("2d");ctx.drawImage(vietnami,21,21);var ctx=vietnambulb.getContext("2d");ctx.shadowColor="#000000";ctx.shadowBlur=20;ctx.drawImage(tmc,0,0)};vietnami.src="http://slither.io/s/vietnam.png";var argentinabulb=document.createElement("canvas");argentinabulb.width=110+42;argentinabulb.height=110+42;var argentinai=document.createElement("img");
argentinai.onload=function(){var tmc=document.createElement("canvas");tmc.width=110+42;tmc.height=110+42;var ctx=tmc.getContext("2d");ctx.drawImage(argentinai,21,21);var ctx=argentinabulb.getContext("2d");ctx.shadowColor="#000000";ctx.shadowBlur=20;ctx.drawImage(tmc,0,0)};argentinai.src="http://slither.io/s/argentina.png";var movbulb=document.createElement("canvas");movbulb.width=100+42;movbulb.height=121+42;var movi=document.createElement("img");
movi.onload=function(){var tmc=document.createElement("canvas");tmc.width=100+42;tmc.height=121+42;var ctx=tmc.getContext("2d");ctx.drawImage(movi,21,21);var ctx=movbulb.getContext("2d");ctx.shadowColor="#000000";ctx.shadowBlur=20;ctx.drawImage(tmc,0,0)};movi.src="http://slither.io/s/mov2.png";var colc;if(testing){colc=document.createElement("canvas");colc.width=256;colc.height=106;colc.style.position="fixed";colc.style.left="0px";colc.style.top="100px";colc.style.zIndex=2147483647;document.body.appendChild(colc)}
var pbx=new Float32Array(32767);var pby=new Float32Array(32767);var pba=new Float32Array(32767);var pbu=new Uint8Array(32767);var per_color_imgs=[];var rrs=[192,144,128,128,238,255,255,255,224,255,144,80,255,40,100,120,72,160,255,56,56,78,255,101,128,60,0,217,255,144,32,240,240,240,240,32,40,104,0,104,0];var ggs=[128,153,208,255,238,160,144,64,48,255,153,80,192,136,117,134,84,80,224,68,68,35,86,200,132,192,255,69,64,144,32,32,240,144,32,240,60,128,0,40,0];
var bbs=[255,255,208,128,112,96,144,64,224,255,255,80,80,96,255,255,255,255,64,255,255,192,9,232,144,72,83,69,64,144,240,32,32,32,240,32,173,255,112,170,0];var max_skin_cv=64;var alcsc=new Uint8Array(256);var ralcsc=new Uint8Array(256);var falcsc=new Uint8Array(256);var csks=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,37,39];for(var i=0;i<=255;i++){ralcsc[i]=0;falcsc[i]=0}for(var i=csks.length-1;i>=0;i--){ralcsc[csks[i]]=1;falcsc[csks[i]]=1}
falcsc[40]=1;alcsc=ralcsc;
for(var i=0;i<rrs.length;i++){var o={};o.imgs=[];o.fws=[];o.fhs=[];o.fw2s=[];o.fh2s=[];o.gimgs=[];o.gfws=[];o.gfhs=[];o.gfw2s=[];o.gfh2s=[];o.oimgs=[];o.ofws=[];o.ofhs=[];o.ofw2s=[];o.ofh2s=[];var rs="00"+rrs[i].toString(16);var gs="00"+ggs[i].toString(16);var bs="00"+bbs[i].toString(16);rs=rs.substr(rs.length-2);gs=gs.substr(gs.length-2);bs=bs.substr(bs.length-2);o.cs="#"+rs+gs+bs;var sz=62;var kfmc=document.createElement("canvas");kfmc.width=kfmc.height=sz;var ctx=kfmc.getContext("2d");var map=
ctx.getImageData(0,0,sz,sz);var imgd=map.data;var l=imgd.length;var p;var xx=0;var yy=0;var fi=i;if(i==26)fi=3;else if(i==29)fi=9;else if(i==30)fi=15;else if(i==31)fi=7;else if(i==32)fi=4;else if(i==33)fi=5;else if(i==34)fi=0;else if(i==35)fi=3;else if(i==36)fi=7;var rr=rrs[fi];var gg=ggs[fi];var bb=bbs[fi];var t1=(rr+gg+bb)/3;if(t1<=24)rr=gg=bb=90;else{var t2=120/t1;rr=Math.min(255,Math.floor(rr*t2));gg=Math.min(255,Math.floor(gg*t2));bb=Math.min(255,Math.floor(bb*t2))}for(p=0;p<l;p+=4){var v=1-
Math.sqrt(Math.pow(sz/2-xx,2)+Math.pow(sz/2-yy,2))/32;if(v<0)v=0;else v=.5*(1-Math.cos(Math.PI*v));imgd[p]=rr;imgd[p+1]=gg;imgd[p+2]=bb;imgd[p+3]=Math.floor(255*v);xx++;if(xx>=sz){xx=0;yy++}}ctx.putImageData(map,0,0);o.kfmc=kfmc;var ksz=48;var ksz2=ksz/2;var kmc=document.createElement("canvas");kmc.width=kmc.height=ksz;var ctx=kmc.getContext("2d");ctx.fillStyle="#FFFFFF";ctx.arc(ksz2,ksz2,ksz2,0,pi2);ctx.fill();var map=ctx.getImageData(0,0,ksz,ksz);var imgd=map.data;var l=imgd.length;var p;var xx=
0;var yy=0;var jk=7;var rr,gg,bb;if(i==36)jk=60;var v3;var kmcs=[];for(var j=0;j<jk;j++){xx=yy=0;for(p=0;p<l;p+=4){var v;var v2=Math.max(0,Math.min(1,1-Math.sqrt(Math.pow(xx-ksz2,2)+Math.pow(yy-ksz2,2))/34));if(nsr)v=Math.pow(v2,.5);else{v=Math.pow(Math.max(0,Math.min(1,1-Math.abs(yy-ksz2)/ksz2)),.35);v+=(v2-v)*.375}rr=rrs[i];gg=ggs[i];bb=bbs[i];if(i==24){v2=Math.sqrt(Math.pow(.5*(xx-ksz2),2)+Math.pow(1*(yy-ksz2),2))/ksz2;v2=Math.pow(v2*1.05,4);if(v2>1)v2=1;rr+=(255*1.2-rr)*v2;gg+=(192*1.2-gg)*v2;
bb+=(64*1.2-bb)*v2;v*=1.22-.44*j/(jk-1)}else if(i==26){v2=Math.sqrt(Math.pow(.5*(xx-ksz2),2)+Math.pow(1*(yy-ksz2),2))/ksz2;v2=Math.pow(v2,2);if(v2>1)v2=1;v*=1.22-.44*j/(jk-1);rr*=v;gg*=v;bb*=v;v=1;rr+=(128*1.1-rr)*v2;gg+=(255*1.1-gg)*v2;bb+=(136*1.1-bb)*v2}else if(i==27){v2=Math.sqrt(Math.pow(.5*(xx-ksz2),2)+Math.pow(1*(yy-ksz2),2))/ksz2;v2=Math.pow(v2,2);if(v2>1)v2=1;v*=1.22-.44*j/(jk-1);rr*=v;gg*=v;bb*=v;v=1;rr+=(217*1.1-rr)*v2;gg+=(69*1.1-gg)*v2;bb+=(69*1.1-bb)*v2}else if(i==28){v2=.5-.5*Math.cos(Math.PI*
j/jk);rr+=(128*1-rr)*v2;gg+=(128*1-gg)*v2;bb+=(255*1-bb)*v2;v*=1.1;if(v>1)v=1}else if(i==29){v2=Math.sqrt(Math.pow(.5*(xx-ksz2),2)+Math.pow(1*(yy-ksz2),2))/ksz2;v2=Math.pow(v2,2);if(v2>1)v2=1;v*=1.44-.88*j/(jk-1);rr=v*32;gg=v*32;bb=v*32;v=1;rr+=(255*1-rr)*v2;gg+=(255*1-gg)*v2;bb+=(255*1-bb)*v2}else if(i==30){v2=Math.sqrt(Math.pow(.5*(xx-ksz2),2)+Math.pow(1*(yy-ksz2),2))/ksz2;v2=Math.pow(v2,2);if(v2>1)v2=1;v=(.1+.9*j/jk)%1;rr=v*80;gg=v*80;bb=128+v*160;rr+=(255*1-rr)*.3*v2;gg+=(255*1-gg)*.3*v2;bb+=
(255*1.4-bb)*.3*v2;v=1}else if(i==31){v2=Math.sqrt(Math.pow(.5*(xx-ksz2),2)+Math.pow(1*(yy-ksz2),2))/ksz2;v2=Math.pow(v2,2);if(v2>1)v2=1;v=(.1+.9*j/jk)%1;rr=128+v*160;gg=v*80;bb=v*80;rr+=(255*1.4-rr)*.3*v2;gg+=(255*1-gg)*.3*v2;bb+=(255*1-bb)*.3*v2;v=1}else if(i==32){v2=Math.sqrt(Math.pow(.5*(xx-ksz2),2)+Math.pow(1*(yy-ksz2),2))/ksz2;v2=Math.pow(v2,2);if(v2>1)v2=1;v=(.1+.9*j/jk)%1;rr=96+v*128;gg=96+v*128;bb=v*80;rr+=(255*1.2-rr)*.6*v2;gg+=(255*1.2-gg)*.6*v2;bb+=(255*1-bb)*.6*v2;v=1}else if(i==33){v2=
Math.sqrt(Math.pow(.5*(xx-ksz2),2)+Math.pow(1*(yy-ksz2),2))/ksz2;v2=Math.pow(v2,2);if(v2>1)v2=1;v=(.1+.9*j/jk)%1;rr=96+v*128;gg=48+v*80;bb=v*48;rr+=(255*1.2-rr)*.6*v2;gg+=(255*1.1-gg)*.6*v2;bb+=(255*1-bb)*.6*v2;v=1}else if(i==34){v2=Math.sqrt(Math.pow(.5*(xx-ksz2),2)+Math.pow(1*(yy-ksz2),2))/ksz2;v2=Math.pow(v2,2);if(v2>1)v2=1;v=(.1+.9*j/jk)%1;rr=96+v*128;gg=v*80;bb=96+v*128;rr+=(255*1.2-rr)*.6*v2;gg+=(255*1-gg)*.6*v2;bb+=(255*1.2-bb)*.6*v2;v=1}else if(i==35){v2=Math.sqrt(Math.pow(.5*(xx-ksz2),2)+
Math.pow(1*(yy-ksz2),2))/ksz2;v2=Math.pow(v2,2);if(v2>1)v2=1;v=(.1+.9*j/jk)%1;rr=v*80;gg=96+v*128;bb=v*80;rr+=(255*1-rr)*.6*v2;gg+=(255*1.2-gg)*.6*v2;bb+=(255*1-bb)*.6*v2;v=1}else if(i==36){v3=(j/jk+.6+.25*(xx/ksz))%1;v2=(yy-ksz2)/ksz;v2=1.3*(v2-1.3*(v3-.5));v2=v2*2;if(v2<0)v2=-v2;v2*=2.4;if(v2<1){rr+=(255*2.2-rr)*1*(1-v2);gg+=(255*2.2-gg)*1*(1-v2);bb+=(255*2.2-bb)*1*(1-v2)}if(v3<.5)v2=(yy-ksz2*.055-ksz2)/ksz;else v2=(yy+ksz2*.055-ksz2)/ksz;v2=1.3*(v2-1.3*(v3-.5));v2=v2*2;if(v2<0)v2=-v2;v2*=4.8;if(v2<
1){rr+=(255*1-rr)*1*(1-v2);gg+=(32*1-gg)*1*(1-v2);bb+=(64*1-bb)*1*(1-v2)}v2=(ksz2-yy)/ksz;v2=1.3*(v2-1.3*(v3-.5));v2=v2*2;if(v2<0)v2=-v2;v2*=2.4;if(v2<1){rr+=(255*2.2-rr)*1*(1-v2);gg+=(255*2.2-gg)*1*(1-v2);bb+=(255*2.2-bb)*1*(1-v2)}if(v3<.5)v2=(ksz2+ksz2*.055-yy)/ksz;else v2=(ksz2-ksz2*.055-yy)/ksz;v2=1.3*(v2-1.3*(v3-.5));v2=v2*2;if(v2<0)v2=-v2;v2*=4.8;if(v2<1){rr+=(255*1-rr)*1*(1-v2);gg+=(32*1-gg)*1*(1-v2);bb+=(64*1-bb)*1*(1-v2)}v2=(yy-ksz2)/ksz;if(v3>=.47&&v3<=.53){rr=255;gg=32;bb=64}else if(v2>=
-.1&&v2<=.1){v3=.5-v3;if(v3<0)v3=-v3;v3=1-Math.pow(v3/.5,2);rr+=(255-rr)*v3;gg+=(32-gg)*v3;bb+=(64-bb)*v3}else if(v3>=.44&&v3<=.56||v2>=-.15&&v2<=.15){v3=.5-v3;if(v3<0)v3=-v3;v3=1-Math.pow(v3/.5,2);rr+=(255-rr)*v3;gg+=(255-gg)*v3;bb+=(255-bb)*v3}if(!nsr){v=Math.pow(Math.max(0,Math.min(1,1-Math.abs(yy-ksz2)/ksz2)),.35);v2=Math.pow(Math.max(0,Math.min(1,1-Math.abs(yy-ksz2)/ksz2)),.5);rr+=(rrs[i]-rr)*(1-v2);gg+=(ggs[i]-gg)*(1-v2);bb+=(bbs[i]-bb)*(1-v2)}}else v*=1.22-.44*j/(jk-1);imgd[p]=Math.max(0,Math.min(255,
Math.floor(rr*v)));imgd[p+1]=Math.max(0,Math.min(255,Math.floor(gg*v)));imgd[p+2]=Math.max(0,Math.min(255,Math.floor(bb*v)));xx++;if(xx>=ksz){xx=0;yy++}}ctx.putImageData(map,0,0);var kmc2=document.createElement("canvas");kmc2.width=kmc2.height=ksz;var ctx2=kmc2.getContext("2d");ctx2.drawImage(kmc,0,0);if(i==10){var fk=-1;var tk=1;if(nsr){fk=-4;tk=3}for(var k=fk;k<=tk;k++){var tx=ksz2+Math.cos(2*Math.PI*k/8)*(ksz2/16)*13;var ty=ksz2+Math.sin(2*Math.PI*k/8)*(ksz2/16)*13;ctx2.fillStyle="#FFFFFF";ctx2.beginPath();
for(var m=0;m<=5;m++){xx=tx+Math.cos(2*Math.PI*m/5)*24*.05*(ksz/32);yy=ty+Math.sin(2*Math.PI*m/5)*24*.05*(ksz/32);if(m==0)ctx2.moveTo(xx,yy);else ctx2.lineTo(xx,yy);xx=tx+Math.cos(2*Math.PI*(m+.5)/5)*62*.05*(ksz/32);yy=ty+Math.sin(2*Math.PI*(m+.5)/5)*62*.05*(ksz/32);ctx2.lineTo(xx,yy)}ctx2.fill()}}else if(i==19){var fk=-2;var tk=2;if(nsr){fk=-7;tk=7}for(var k=fk;k<=tk;k++){var tx=ksz2+Math.cos(2*Math.PI*k/15)*(ksz2/16)*13;var ty=ksz2+Math.sin(2*Math.PI*k/15)*(ksz2/16)*13;ctx2.save();ctx2.globalAlpha=
.7;ctx2.fillStyle="#FFFFFF";ctx2.beginPath();for(var m=0;m<=5;m++){xx=tx+Math.cos(2*Math.PI*m/5)*12*.05*(ksz/32);yy=ty+Math.sin(2*Math.PI*m/5)*12*.05*(ksz/32);if(m==0)ctx2.moveTo(xx,yy);else ctx2.lineTo(xx,yy);xx=tx+Math.cos(2*Math.PI*(m+.5)/5)*31*.05*(ksz/32);yy=ty+Math.sin(2*Math.PI*(m+.5)/5)*31*.05*(ksz/32);ctx2.lineTo(xx,yy)}ctx2.fill();ctx2.restore()}}else if(i==20){var fk=-1.5;var tk=1.5;if(nsr){fk=-6.5;tk=7.5}for(var k=fk;k<=tk;k++){var tx=ksz2+Math.cos(2*Math.PI*k/15)*(ksz2/16)*13;var ty=
ksz2+Math.sin(2*Math.PI*k/15)*(ksz2/16)*13;ctx2.save();ctx2.globalAlpha=.7;ctx2.fillStyle="#FFFFFF";ctx2.beginPath();for(var m=0;m<=5;m++){xx=tx+Math.cos(2*Math.PI*m/5)*14*.05*(ksz2/16);yy=ty+Math.sin(2*Math.PI*m/5)*14*.05*(ksz2/16);if(m==0)ctx2.moveTo(xx,yy);else ctx2.lineTo(xx,yy);xx=tx+Math.cos(2*Math.PI*(m+.5)/5)*36*.05*(ksz2/16);yy=ty+Math.sin(2*Math.PI*(m+.5)/5)*36*.05*(ksz2/16);ctx2.lineTo(xx,yy)}ctx2.fill();ctx2.restore()}}if(iioc&&testing)if(kmcs.length>=1)kmcs.push(kmcs[0]);else if(per_color_imgs.length>=
2)kmcs.push(per_color_imgs[0].kmcs[0]);else{var u=kmc2.toDataURL();var ii=document.createElement("img");ii.src="ayy.png";kmcs.push(ii)}else kmcs.push(kmc2)}o.kmcs=kmcs;o.kl=kmcs.length;o.klp=true;if(i==36)o.klp=false;per_color_imgs.push(o);for(var j=2.8;j<=18.8;j+=1){var cc=document.createElement("canvas");var sz=Math.ceil(j*2.5+28);cc.width=cc.height=sz;var ctx=cc.getContext("2d");ctx.fillStyle=o.cs;ctx.arc(sz/2,sz/2,j*.65,0,pi2);ctx.shadowBlur=12;ctx.shadowOffsetY=0;ctx.shadowColor="#"+rs+gs+bs;
ctx.globalAlpha=.8;ctx.fill();ctx.globalAlpha=1;ctx.fill();if(iioc&&testing){var u=cc.toDataURL();var ii=document.createElement("img");ii.src=u;o.imgs.push(ii)}else o.imgs.push(cc);o.fws.push(sz);o.fhs.push(sz);o.fw2s.push(sz/2);o.fh2s.push(sz/2);sz=Math.ceil(j*8+6);var cc=document.createElement("canvas");cc.width=cc.height=sz;var ctx=cc.getContext("2d");var g=ctx.createRadialGradient(sz/2,sz/2,1,sz/2,sz/2,j*4);g.addColorStop(0,"rgba("+rrs[i]+", "+ggs[i]+", "+bbs[i]+", 1)");g.addColorStop(1,"rgba("+
rrs[i]+", "+ggs[i]+", "+bbs[i]+", 0)");ctx.fillStyle=g;ctx.fillRect(0,0,sz,sz);if(iioc&&testing){var u=cc.toDataURL();var ii=document.createElement("img");ii.src=u;o.gimgs.push(ii)}else o.gimgs.push(cc);o.gfws.push(sz);o.gfhs.push(sz);o.gfw2s.push(sz/2);o.gfh2s.push(sz/2);var cc=document.createElement("canvas");var sz=Math.ceil(j*2*.65+6);cc.width=cc.height=sz;var ctx=cc.getContext("2d");var eam=.2;var g=ctx.createRadialGradient(sz/2,sz/2,0,sz/2,sz/2,j/2);g.addColorStop(0,"rgba("+rrs[i]+", "+ggs[i]+
", "+bbs[i]+", 1)");g.addColorStop(.99,"rgba("+Math.floor(rrs[i]*eam)+", "+Math.floor(ggs[i]*eam)+", "+Math.floor(bbs[i]*eam)+", 1)");g.addColorStop(1,"rgba("+Math.floor(rrs[i]*eam)+", "+Math.floor(ggs[i]*eam)+", "+Math.floor(bbs[i]*eam)+", 0)");ctx.fillStyle=g;ctx.fillRect(0,0,sz,sz);ctx.strokeStyle="#000000";ctx.lineWidth=2;ctx.arc(sz/2,sz/2,j*.65,0,pi2);ctx.globalAlpha=1;ctx.stroke();if(iioc&&testing){var u=cc.toDataURL();var ii=document.createElement("img");ii.src=u;o.oimgs.push(ii)}else o.oimgs.push(cc);
o.ofws.push(sz);o.ofhs.push(sz);o.ofw2s.push(sz/2);o.ofh2s.push(sz/2)}o.ic=o.imgs.length;o.pr_imgs=[];o.pr_fws=[];o.pr_fhs=[];o.pr_fw2s=[];o.pr_fh2s=[];for(var j=3;j<=24;j+=1){var cc=document.createElement("canvas");var sz=Math.ceil(j*2+38);cc.width=cc.height=sz;var ctx=cc.getContext("2d");ctx.fillStyle=o.cs;ctx.arc(sz/2,sz/2,j/2,0,pi2);ctx.shadowBlur=22;ctx.shadowOffsetY=0;ctx.shadowColor="#"+rs+gs+bs;ctx.fill();ctx.fill();if(iioc&&testing){var u=cc.toDataURL();var ii=document.createElement("img");
ii.src=u;o.pr_imgs.push(ii)}else o.pr_imgs.push(cc);o.pr_fws.push(sz);o.pr_fhs.push(sz);o.pr_fw2s.push(sz/2);o.pr_fh2s.push(sz/2)}}
if(testing){var ctx=colc.getContext("2d");ctx.fillStyle="#000000";ctx.fillRect(0,0,colc.width,colc.height);ctx.fillStyle="#FFFFFF";ctx.font="10px Arial, Helvetica Neue, Helvetica, sans-serif";ctx.textBaseline="top";ctx.textAlign="center";var xx=0;var yy=0;for(var i=0;i<rrs.length;i++){var pci=per_color_imgs[i];var kmc=pci.kmcs[0];ctx.drawImage(kmc,0,0,kmc.width,kmc.height,xx,yy,16,16);ntx=o.xx+o.fx;nty=o.yy+o.fy;ntx=mww2+(ntx-view_xx)*gsc;nty=mhh2+(nty-view_yy)*gsc;ctx.fillText(""+i,xx+8,yy+16);xx+=
16;if(xx>colc.width-16){xx=0;yy+=28}}}var view_xx=0;var view_yy=0;var view_ang=0;var view_dist=0;var fvx=0;var fvy=0;var xm=0;var ym=0;var lsxm=0;var lsym=0;var snake=null;var my_nick="";var gw2k16=false;try{if(localStorage.gw2k16=="1")gw2k16=true}catch(e){}var dhx,dhy,hsz;var fr=0;var lfr=0;var ltm=Date.now();var vfr=0;var vfrb=0;var avfr=0;var afr=0;var fr2=0;var lfr2=0;var vfrb2=0;var cptm=0;var lptm=0;var lpstm=0;var last_ping_mtm=0;var want_etm_s=false;var want_seq=false;var lseq=0;
var lagging=false;var lag_mult=1;var wfpr=false;var high_quality=true;var gla=1;var wdfg=0;var qsm=1;var mqsm=1.7;var playing=false;var connected=false;var want_close_socket=false;var want_victory_message=false;var want_victory_focus=false;var want_hide_victory=0;var hvfr=0;var dead_mtm=-1;var at2lt=new Float32Array(65536);for(yy=0;yy<256;yy++)for(xx=0;xx<256;xx++)at2lt[yy<<8|xx]=Math.atan2(yy-128,xx-128);var kd_l_frb=0;var kd_r_frb=0;var kd_l=false;var kd_r=false;var kd_u=false;var lkstm=0;
var social=document.createElement("iframe");try{social.frameBorder=0}catch(e){}social.style.position="fixed";social.style.left="6px";social.style.top="6px";social.style.border="0px";social.style.zIndex=9999999;social.style.overflow="hidden";social.width=251;social.height=150;social.src="http://slither.io/social-box/";document.body.appendChild(social);
var oef=function(){if(whmos)hmos();var ctm=Date.now();vfr=(ctm-ltm)/8;if(vfr>5)vfr=5;if(vfr<1.56)vfr=1.56;avfr=vfr;ltm=ctm;if(!choosing_skin){if(!lagging)if(wfpr&&ctm-last_ping_mtm>420)if(!want_play)if(!checking_code)lagging=true;if(lagging){lag_mult*=.85;if(lag_mult<.01)lag_mult=.01}else if(lag_mult<1){lag_mult+=.05;if(lag_mult>=1)lag_mult=1}}if(vfr>120)vfr=120;vfr*=lag_mult;lfr=fr;fr+=vfr;vfrb=Math.floor(fr)-Math.floor(lfr);lfr2=fr2;fr2+=vfr*2;vfrb2=Math.floor(fr2)-Math.floor(lfr2);afr+=avfr;if(connected)if(snake!=
null){if(kd_l)kd_l_frb+=vfrb;if(kd_r)kd_r_frb+=vfrb}if(want_play&&!shoa)if(dead_mtm==-1){want_play=false;connect()}if(buildia_shown)if(buildia_close_after_tm!=-1)if(ctm>buildia_close_after_tm)trySkipBuildia();if(spinner_shown){lsfr+=avfr;var ctx=ldmc.getContext("2d");ctx.clearRect(0,0,512,128);var ic=256;var rad;var k;for(var j=1;j<=2;j++){ctx.beginPath();if(j==1){ctx.fillStyle="#60FF70";k=0}else{ctx.fillStyle="#9850FF";k=Math.PI}for(var i=0;i<=ic;i++){rad=32+Math.cos(k+lsfr/6+8*i/ic)*5+8*i/ic;if(i==
ic)rad+=10;xx=64+Math.cos(k+lsfr/44+.8*Math.PI*i/ic)*rad*1.25;yy=64+Math.sin(k+lsfr/44+.8*Math.PI*i/ic)*rad;if(i==0)ctx.moveTo(xx,yy);else ctx.lineTo(xx,yy)}rad=32;xx=64+Math.cos(k+lsfr/44+.8*Math.PI*(i+47)/ic)*rad*1.25;yy=64+Math.sin(k+lsfr/44+.8*Math.PI*(i+47)/ic)*rad;ctx.lineTo(xx,yy);for(var i=ic;i>=0;i--){rad=32+Math.cos(k+lsfr/6+8*i/ic)*5-8*i/ic;if(i==ic)rad-=10;xx=64+Math.cos(k+lsfr/44+.8*Math.PI*i/ic)*rad*1.25;yy=64+Math.sin(k+lsfr/44+.8*Math.PI*i/ic)*rad;ctx.lineTo(xx,yy)}ctx.fill()}if(connecting||
want_play){ss_a+=avfr/86;if(ss_a>=1)ss_a=1;ss_sh+=avfr/93;if(ss_sh>=1)ss_sh=1;ldmc.style.opacity=ss_a;var sc=Math.round(.1+.9*ss_sh*(1+2*Math.pow(1-ss_a,2))*1E5)/1E5;trf(ldmc,"scale("+sc+","+sc+")")}else{ss_a-=avfr/86;if(ss_a<=0){ss_a=0;ss_sh=0;ldmc.style.display="none";trf(ldmc,"")}ldmc.style.opacity=ss_a;var sc=Math.round(.1+.9*ss_sh*(1+2*Math.pow(1-ss_a,2))*1E5)/1E5;trf(ldmc,"scale("+sc+","+sc+")")}}if(entering_code||ending_enter_code){for(var i=etcobs.length-1;i>=0;i--){var o=etcobs[i];if(o.loaded)if(checking_code){if(o.alpha!=
.25){o.alpha-=vfr*.02;if(o.alpha<=.25)o.alpha=.25;o.ii.style.opacity=o.alpha}}else if(o.alpha!=1){o.alpha+=vfr*.02;if(o.alpha>=1)o.alpha=1;o.ii.style.opacity=o.alpha}}if(ending_enter_code){etca-=vfr*.03;if(etca<=0){etca=0;etcbx=0;etcdx=etc_ww/2-54/2;etcods=[];ending_enter_code=false;entering_code=false;etcod.style.display="none";nick.disabled=false;nick.focus();if(want_open_cosmetics){want_open_cosmetics=false;csk.onclick();scos.onclick()}}etcod.style.opacity=etca}else if(entering_code)if(etca!=1){etca+=
vfr*.03;if(etca>=1)etca=1;etcod.style.opacity=etca}etcba+=vfr*.1;if(etcba>=pi2)etcba-=pi2;if(etcshk){etcshkv+=vfr*.014;if(etcshkv>=1){etcshkv=1;etcshk=false}etcc.style.left=Math.round((Math.sin(Math.PI*etcshkv*8)*32*Math.sin(Math.PI*etcshkv)+ww/2-etc_ww/2)*10)/10+"px"}if(checking_code||etcsa>0){etcsv+=vfr*.0075;if(etcsv>=1)etcsv-=1;if(checking_code){etcsa+=vfr*.02;if(etcsa>=1)etcsa=1}else{etcsa-=vfr*.05;if(etcsa<=0)etcsa=0}etco_sp_ii.style.opacity=etcsa;var letcsrv=etcsrv;etcsrv=Math.round(etcsv*
12);if(etcsrv!=letcsrv)adjustCodeSpinner()}if(etcods.length==14){if(etcbaa!=0){etcbaa-=vfr*.05;if(etcbaa<=0)etcbaa=0}}else if(etcbaa!=1){etcbaa+=vfr*.05;if(etcbaa>=1)etcbaa=1}var ctx=etcc.getContext("2d");ctx.save();ctx.clearRect(0,0,etc_ww,etc_hh);var el=Math.min(13,etcods.length);etcbx+=(el*47-etcbx)*.2;etcdx+=(etc_ww/2-54/2-47*el/2-etcdx)*.1;ctx.globalAlpha=1;ctx.translate(etcdx,0);for(var i=0;i<etcods.length;i++){var v=etcods[i].v;if(etcdis[v].loaded)ctx.drawImage(etcdis[v].ii,i*47,0,54,67)}if(etcdis[11].loaded){ctx.globalAlpha=
etcbaa*(.5+.4*Math.cos(etcba));ctx.drawImage(etcdis[11].ii,etcbx,0,54,67)}ctx.restore()}if(ending_build_skin){if(bdska!=0){bdska-=vfr*.015;if(bdska<=0){bdska=0;ending_build_skin=false;building_skin=false;alcsc=ralcsc;for(var i=bskbtns.length-1;i>=0;i--)document.body.removeChild(bskbtns[i].a);bskbtns=[];revdiv.style.display="none"}var k=.5*(1-Math.cos(Math.PI*bdska));bskoy=k*90;skoboym=k;reposSkinStuff();pskh.style.opacity=1-bdska;nskh.style.opacity=1-bdska;bskh.style.opacity=1-bdska;scosh.style.opacity=
1-bdska;revdiv.style.opacity=bdska;for(var i=bskbtns.length-1;i>=0;i--){var o=bskbtns[i];o.ii.style.opacity=bdska}}}else if(building_skin)if(bdska!=1){bdska+=vfr*.015;if(bdska>=1)bdska=1;var k=.5*(1-Math.cos(Math.PI*bdska));bskoy=k*90;skoboym=k;reposSkinStuff();pskh.style.opacity=1-bdska;nskh.style.opacity=1-bdska;bskh.style.opacity=1-bdska;scosh.style.opacity=1-bdska;revdiv.style.opacity=bdska;for(i=bskbtns.length-1;i>=0;i--){var o=bskbtns[i];o.ii.style.opacity=bdska}}if(ending_select_cosmetic){if(secosa!=
0){secosa-=vfr*.015;if(secosa<=0){secosa=0;ending_select_cosmetic=false;selecting_cosmetic=false;for(var i=cosbtns.length-1;i>=0;i--)document.body.removeChild(cosbtns[i].a);cosbtns=[]}var k=.5*(1-Math.cos(Math.PI*secosa));secosoy=k*90;secosoym=k;reposSkinStuff();pskh.style.opacity=1-secosa;nskh.style.opacity=1-secosa;bskh.style.opacity=1-secosa;scosh.style.opacity=1-secosa;for(var i=cosbtns.length-1;i>=0;i--){var o=cosbtns[i];o.ii.style.opacity=secosa}}}else if(selecting_cosmetic)if(secosa!=1){secosa+=
vfr*.015;if(secosa>=1)secosa=1;var k=.5*(1-Math.cos(Math.PI*secosa));secosoy=k*90;secosoym=k;reposSkinStuff();pskh.style.opacity=1-secosa;nskh.style.opacity=1-secosa;bskh.style.opacity=1-secosa;scosh.style.opacity=1-secosa;for(i=cosbtns.length-1;i>=0;i--){var o=cosbtns[i];o.ii.style.opacity=secosa}}if(waiting_for_sos)if(ctm>sos_ready_after_mtm)if(!connecting)if(!connected)connect();if(connecting)if(ctm-start_connect_mtm>3333){if(bso)bso.tainted=true;connect()}if(choosing_skin){for(var i=snakes.length-
1;i>=0;i--){var o=snakes[i];for(var j=o.pts.length-1;j>=0;j--)o.pts[j].yy=grd/2+Math.cos(j/4+fr/19)*15*(1-j/o.pts.length)}view_xx-=vfr}if(playing)if(!high_quality){if(gla>0){gla-=vfr*.0075;if(gla<0)gla=0}if(qsm<mqsm){qsm+=vfr*4E-5;if(qsm>mqsm)qsm=mqsm}}else{if(gla<1){gla+=vfr*.0075;if(gla>1)gla=1}if(qsm>1){qsm-=vfr*4E-5;if(qsm<1)qsm=1}}if(want_hide_victory!=0)if(want_hide_victory==1){hvfr+=vfr*.02;if(hvfr>=1){hvfr=0;want_hide_victory=2;victory_holder.style.opacity=1;saveh.style.opacity=1;victory_holder.style.display=
"none";saveh.style.display="none";nick_holder.style.opacity=0;playh.style.opacity=0;smh.style.opacity=0;nick_holder.style.display="inline-block";playh.style.display="block";smh.style.display="block"}else{victory_holder.style.opacity=1-hvfr;saveh.style.opacity=1-hvfr}}else if(want_hide_victory==2){hvfr+=vfr*.02;if(hvfr>=1){hvfr=1;want_hide_victory=0}nick_holder.style.opacity=hvfr;playh.style.opacity=hvfr;smh.style.opacity=hvfr}if(login_fr!=1)if(tip_fr!=-1){tip_fr+=vfr*.017;if(tip_fr>=pi2){tip_fr-=
pi2;tip_pos++;if(tip_pos>=tipss.length)tip_pos=0;tips.textContent=tipss[tip_pos]}var j=.5-.5*Math.cos(tip_fr);tips.style.opacity=Math.round(Math.pow(j,.5)*1E5)/1E5}if(dead_mtm==-1){if(lb_fr!=-1)if(lb_fr!=1){lb_fr+=vfr*.01;if(lb_fr>=1)lb_fr=1;lbh.style.opacity=lb_fr*.85;lbs.style.opacity=lbn.style.opacity=lbp.style.opacity=lbf.style.opacity=vcm.style.opacity=lb_fr}}else if(ctm-dead_mtm>1600){if(login_iv==-1){login_iv=-2;login.style.display="inline";cskh.style.display="inline";if(hacos||bonkz)etcoh.style.display=
"inline";fbh.style.display="inline";twth.style.display="inline";plq.style.display="inline";clq.style.display="inline";grqh.style.display="inline";social.style.display="inline";if(want_victory_focus){want_victory_focus=false;victory.focus()}}if(login_iv==-2){login_fr-=.004*vfr;if(choosing_skin)login_fr-=.007*vfr;lb_fr=login_fr;if(login_fr<=0){login_fr=0;dead_mtm=-1;nick.disabled=false;nick.focus();lb_fr=-1;playing=false;if(choosing_skin){choosing_skin=false;resetGame();pskh.style.display="none";nskh.style.display=
"none";bskh.style.display="none";scosh.style.display="none";skodiv.style.display="none";revdiv.style.display="none"}}pbdiv.style.opacity=1-.5*Math.max(0,Math.min(1,login_fr*6));lgcsc=1+.1*Math.pow(login_fr,2);var sc=Math.round(lgbsc*lgcsc*1E5)/1E5;if(sc==1)trf(login,"");else trf(login,"scale("+sc+","+sc+")");login.style.opacity=1-login_fr;cstx.style.opacity=1-login_fr;fbh.style.opacity=1-login_fr;twth.style.opacity=1-login_fr;cskh.style.opacity=1-login_fr;etcoh.style.opacity=1-login_fr;grqh.style.opacity=
1-login_fr;plq.style.opacity=1-login_fr;clq.style.opacity=1-login_fr;social.style.opacity=1-login_fr;pskh.style.opacity=login_fr;nskh.style.opacity=login_fr;bskh.style.opacity=login_fr;scosh.style.opacity=login_fr;skodiv.style.opacity=login_fr;revdiv.style.opacity=login_fr;mc.style.opacity=login_fr;loch.style.opacity=login_fr*mmal;lbh.style.opacity=lb_fr*.85;lbs.style.opacity=lbn.style.opacity=lbp.style.opacity=lbf.style.opacity=vcm.style.opacity=lb_fr}}if(want_close_socket)if(dead_mtm==-1){want_close_socket=
false;if(ws){ws.close();ws=null;connected=false;playing=false}resetGame()}if(want_victory_message)victory_bg.style.opacity=.92+.08*Math.cos(fr/10);if(connected){if(snake!=null)if(kd_l_frb>0||kd_r_frb>0)if(ctm-lkstm>150){lkstm=ctm;if(kd_r_frb>0)if(kd_l_frb>kd_r_frb){kd_l_frb-=kd_r_frb;kd_r_frb=0}if(kd_l_frb>0)if(kd_r_frb>kd_l_frb){kd_r_frb-=kd_l_frb;kd_l_frb=0}if(kd_l_frb>0){v=kd_l_frb;if(v>127)v=127;kd_l_frb-=v;snake.eang-=mamu*v*snake.scang*snake.spang;if(protocol_version>=5){var ba=new Uint8Array(2);
ba[0]=252;ba[1]=v}else{var ba=new Uint8Array(2);ba[0]=108;ba[1]=v}ws.send(ba)}else if(kd_r_frb>0){v=kd_r_frb;if(v>127)v=127;kd_r_frb-=v;snake.eang+=mamu*v*snake.scang*snake.spang;if(protocol_version>=5){v+=128;var ba=new Uint8Array(2);ba[0]=252;ba[1]=v}else{var ba=new Uint8Array(2);ba[0]=114;ba[1]=v}ws.send(ba)}}if(!wfpr)if(ctm-last_ping_mtm>250){last_ping_mtm=ctm;wfpr=true;var ba=new Uint8Array(1);if(protocol_version>=5)ba[0]=251;else ba[0]=112;ws.send(ba);lpstm=ctm}if(mmgad){if(mmal!=1){mmal+=.025;
if(mmal>=1)mmal=1;loch.style.opacity=mmal}if(mmbfr<1){mmbfr+=vfr/230;if(mmbfr>=1)mmbfr=1;asmc.style.opacity=.475*(1-mmbfr);asmc2.style.opacity=1-(1-.475)/(1-.475*(1-mmbfr))}}}if(snake!=null)if(grd!=2147483647)if(ctm-locu_mtm>150){locu_mtm=Date.now();myloc.style.left=Math.round(10*(mmrad+12+mmrad*(snake.xx-grd)/grd-7))/10+"px";myloc.style.top=Math.round(10*(mmrad+12+mmrad*(snake.yy-grd)/grd-7))/10+"px"}if(ctm-lrd_mtm>1E3){if(testing)if(console&&console.log){var eft=ctm-lrd_mtm;var s=[];trdps+=rdps;
if(playing)tcsecs++;eft=Math.max(eft,pft);s.push("FPS: "+fps);s.push("sectors: "+sectors.length);s.push();s.push("foods: "+foods_c);s.push("packets/sec: "+pkps);s.push("bytes/sec: "+rdps);s.push("bytes/sec avg: "+Math.round(trdps/tcsecs));s.push("");var total=0;var total_packets=0;for(var i=0;i<rdpspc.length;i++){if(rdpspc[i]>=0)total+=rdpspc[i];if(pkpspc[i]>=0)total_packets+=pkpspc[i]}for(var i=0;i<rdpspc.length;i++)if(rdpspc[i]>=1||pkpspc[i]>=1)s.push(String.fromCharCode(i)+": "+pkpspc[i]+" packets, "+
rdpspc[i]+" bytes ("+Math.round(rdpspc[i]/total*1E3)/10+"%)");s.push("total packets: "+total_packets);s.push("total bytes: "+total);pf_add=0;pf_new_add=0;pf_remove=0;pf_nap=0;pf_ep=0;maxp=0;s.push("");for(var i=1;i<pfs.length;i++)if(pfs[i]!=0){s.push(i+": "+Math.round(pfs[i]*1E3)/1E3);pfs[i]=0}pft=0;pfd.innerHTML=s.join("<br>")}if(dfa.length>0){for(var i=dfa.length-1;i>=0;i--)try{dfa[i]["ono"+dfq]()}catch(e){}dfa=[]}if(playing)if(want_quality==1)if(fps<=24){wdfg++;if(high_quality)if(wdfg>=1)high_quality=
false}else if(high_quality||fps>=32)if(wdfg>0){wdfg*=.987;wdfg-=.1;if(wdfg<=0)high_quality=true}pkps=0;rdps=0;rfps=0;rnps=0;rsps=0;reps=0;fps=0;lrd_mtm=Date.now()}if(snake!=null){if(snake.md!=snake.wmd&&ctm-last_accel_mtm>150){snake.md=snake.wmd;last_accel_mtm=ctm;if(protocol_version>=5){var ba=new Uint8Array(1);if(snake.md)ba[0]=253;else ba[0]=254;ws.send(ba)}else{var ba=new Uint8Array(2);ba[0]=109;ba[1]=snake.md?1:0;ws.send(ba)}}if(xm!=lsxm||ym!=lsym)want_e=true;if(want_e&&ctm-last_e_mtm>50){want_e=
false;last_e_mtm=ctm;lsxm=xm;lsym=ym;d2=xm*xm+ym*ym;if(d2>256){ang=Math.atan2(ym,xm);snake.eang=ang}else ang=snake.wang;ang%=pi2;if(ang<0)ang+=pi2;if(protocol_version>=5){sang=Math.floor((250+1)*ang/pi2);if(sang!=lsang){lsang=sang;var ba=new Uint8Array(1);ba[0]=sang&255;lpstm=ctm;ws.send(ba.buffer)}}else{sang=Math.floor(16777215*ang/pi2);if(sang!=lsang){lsang=sang;var ba=new Uint8Array(1+3);ba[0]=101;ba[1]=sang>>16&255;ba[2]=sang>>8&255;ba[3]=sang&255;lpstm=ctm;ws.send(ba.buffer)}}}}var mang,vang,
emang;if(!choosing_skin)for(var i=snakes.length-1;i>=0;i--){var o=snakes[i];mang=mamu*vfr*o.scang*o.spang;var csp=o.sp*vfr/4;if(csp>o.msl)csp=o.msl;if(!o.dead){if(o.tsp!=o.sp)if(o.tsp<o.sp){o.tsp+=.3*vfr;if(o.tsp>o.sp)o.tsp=o.sp}else{o.tsp-=.3*vfr;if(o.tsp<o.sp)o.tsp=o.sp}if(o.tsp>o.fsp)o.sfr+=(o.tsp-o.fsp)*vfr*.021;if(o.fltg>0){var k=vfrb;if(k>o.fltg)k=o.fltg;o.fltg-=k;for(qq=0;qq<k;qq++){o.fl=o.fls[o.flpos];o.fls[o.flpos]=0;o.flpos++;if(o.flpos>=lfc)o.flpos=0}}else if(o.fltg==0){o.fltg=-1;o.fl=
0}o.cfl=o.tl+o.fl}if(o.dir==1){o.ang-=mang;if(o.ang<0||o.ang>=pi2)o.ang%=pi2;if(o.ang<0)o.ang+=pi2;vang=(o.wang-o.ang)%pi2;if(vang<0)vang+=pi2;if(vang>Math.PI)vang-=pi2;if(vang>0){o.ang=o.wang;o.dir=0}}else if(o.dir==2){o.ang+=mang;if(o.ang<0||o.ang>=pi2)o.ang%=pi2;if(o.ang<0)o.ang+=pi2;vang=(o.wang-o.ang)%pi2;if(vang<0)vang+=pi2;if(vang>Math.PI)vang-=pi2;if(vang<0){o.ang=o.wang;o.dir=0}}else o.ang=o.wang;if(o.ehl!=1){o.ehl+=.03*vfr;if(o.ehl>=1)o.ehl=1}var po=o.pts[o.pts.length-1];o.wehang=Math.atan2(o.yy+
o.fy-po.yy-po.fy+po.eby*(1-o.ehl),o.xx+o.fx-po.xx-po.fx+po.ebx*(1-o.ehl));if(!o.dead)if(o.ehang!=o.wehang){vang=(o.wehang-o.ehang)%pi2;if(vang<0)vang+=pi2;if(vang>Math.PI)vang-=pi2;if(vang<0)o.edir=1;else if(vang>0)o.edir=2}if(o.edir==1){o.ehang-=o.easp*vfr;if(o.ehang<0||o.ehang>=pi2)o.ehang%=pi2;if(o.ehang<0)o.ehang+=pi2;vang=(o.wehang-o.ehang)%pi2;if(vang<0)vang+=pi2;if(vang>Math.PI)vang-=pi2;if(vang>0){o.ehang=o.wehang;o.edir=0}}else if(o.edir==2){o.ehang+=o.easp*vfr;if(o.ehang<0||o.ehang>=pi2)o.ehang%=
pi2;if(o.ehang<0)o.ehang+=pi2;vang=(o.wehang-o.ehang)%pi2;if(vang<0)vang+=pi2;if(vang>Math.PI)vang-=pi2;if(vang<0){o.ehang=o.wehang;o.edir=0}}if(!o.dead){o.xx+=Math.cos(o.ang)*csp;o.yy+=Math.sin(o.ang)*csp;o.chl+=csp/o.msl}if(vfrb>0){for(var j=o.pts.length-1;j>=0;j--){var po=o.pts[j];if(po.dying){po.da+=.0015*vfrb;if(po.da>1){o.pts.splice(j,1);po.dying=false;points_dp.add(po)}}}for(var j=o.pts.length-1;j>=0;j--){var po=o.pts[j];if(po.eiu>0){fx=0;fy=0;cm1=po.eiu-1;for(qq=cm1;qq>=0;qq--){if(po.ems[qq]==
2)po.efs[qq]+=vfrb2;else po.efs[qq]+=vfrb;k=po.efs[qq];if(k>=hfc)if(qq==cm1){po.eiu--;cm1--}else{po.exs[qq]=po.exs[cm1];po.eys[qq]=po.eys[cm1];po.efs[qq]=po.efs[cm1];po.ems[qq]=po.ems[cm1];po.eiu--;cm1--}else{fx+=po.exs[qq]*hfas[k];fy+=po.eys[qq]*hfas[k]}}po.fx=fx;po.fy=fy}}}var wx=Math.cos(o.eang)*o.pma;var wy=Math.sin(o.eang)*o.pma;if(o.rex<wx){o.rex+=vfr/6;if(o.rex>=wx)o.rex=wx}if(o.rey<wy){o.rey+=vfr/6;if(o.rey>=wy)o.rey=wy}if(o.rex>wx){o.rex-=vfr/6;if(o.rex<=wx)o.rex=wx}if(o.rey>wy){o.rey-=vfr/
6;if(o.rey<=wy)o.rey=wy}if(vfrb>0){if(o.ftg>0){var k=vfrb;if(k>o.ftg)k=o.ftg;o.ftg-=k;for(qq=0;qq<k;qq++){o.fx=o.fxs[o.fpos];o.fy=o.fys[o.fpos];o.fchl=o.fchls[o.fpos];o.fxs[o.fpos]=0;o.fys[o.fpos]=0;o.fchls[o.fpos]=0;o.fpos++;if(o.fpos>=rfc)o.fpos=0}}else if(o.ftg==0){o.ftg=-1;o.fx=0;o.fy=0;o.fchl=0}if(o.fatg>0){var k=vfrb;if(k>o.fatg)k=o.fatg;o.fatg-=k;for(qq=0;qq<k;qq++){o.fa=o.fas[o.fapos];o.fas[o.fapos]=0;o.fapos++;if(o.fapos>=afc)o.fapos=0}}else if(o.fatg==0){o.fatg=-1;o.fa=0}}if(o.dead){o.dead_amt+=
vfr*.02;if(o.dead_amt>=1)snakes.splice(i,1)}else if(o.alive_amt!=1){o.alive_amt+=vfr*.015;if(o.alive_amt>=1)o.alive_amt=1}}for(var i=preys.length-1;i>=0;i--){var pr=preys[i];mang=mamu2*vfr;var csp=pr.sp*vfr/4;if(vfrb>0)if(pr.ftg>0){var k=vfrb;if(k>pr.ftg)k=pr.ftg;pr.ftg-=k;for(qq=1;qq<=k;qq++){if(qq==k){pr.fx=pr.fxs[pr.fpos];pr.fy=pr.fys[pr.fpos]}pr.fxs[pr.fpos]=0;pr.fys[pr.fpos]=0;pr.fpos++;if(pr.fpos>=rfc)pr.fpos=0}}else if(pr.ftg==0){pr.fx=0;pr.fy=0;pr.ftg=-1}if(pr.dir==1){pr.ang-=mang;if(pr.ang<
0||pr.ang>=pi2)pr.ang%=pi2;if(pr.ang<0)pr.ang+=pi2;vang=(pr.wang-pr.ang)%pi2;if(vang<0)vang+=pi2;if(vang>Math.PI)vang-=pi2;if(vang>0){pr.ang=pr.wang;pr.dir=0}}else if(pr.dir==2){pr.ang+=mang;if(pr.ang<0||pr.ang>=pi2)pr.ang%=pi2;if(pr.ang<0)pr.ang+=pi2;vang=(pr.wang-pr.ang)%pi2;if(vang<0)vang+=pi2;if(vang>Math.PI)vang-=pi2;if(vang<0){pr.ang=pr.wang;pr.dir=0}}else pr.ang=pr.wang;pr.xx+=Math.cos(pr.ang)*csp;pr.yy+=Math.sin(pr.ang)*csp;pr.gfr+=vfr*pr.gr;if(pr.eaten){if(pr.fr!=1.5){pr.fr+=vfr/150;if(pr.fr>=
1.5)pr.fr=1.5}pr.eaten_fr+=vfr/47;pr.gfr+=vfr;var o=pr.eaten_by;if(pr.eaten_fr>=1||!o)preys.splice(i,1);else pr.rad=1-Math.pow(pr.eaten_fr,3)}else if(pr.fr!=1){pr.fr+=vfr/150;if(pr.fr>=1){pr.fr=1;pr.rad=1}else{pr.rad=.5*(1-Math.cos(Math.PI*pr.fr));pr.rad+=(.5*(1-Math.cos(Math.PI*pr.rad))-pr.rad)*.66}}}cm1=foods_c-1;for(var i=cm1;i>=0;i--){var fo=foods[i];fo.gfr+=vfr*fo.gr;if(fo.eaten){fo.eaten_fr+=vfr/41;var o=fo.eaten_by;if(fo.eaten_fr>=1||!o)if(i==cm1){foods[i]=null;foods_c--;cm1--}else{foods[i]=
foods[cm1];foods[cm1]=null;foods_c--;cm1--}else{var o=fo.eaten_by;var k=fo.eaten_fr*fo.eaten_fr;fo.rad=fo.lrrad*(1-fo.eaten_fr*k);fo.rx=fo.xx+(o.xx+o.fx+Math.cos(o.ang+o.fa)*(43-k*24)*(1-k)-fo.xx)*k;fo.ry=fo.yy+(o.yy+o.fy+Math.sin(o.ang+o.fa)*(43-k*24)*(1-k)-fo.yy)*k;fo.rx+=Math.cos(fo.wsp*fo.gfr)*6*(1-fo.eaten_fr);fo.ry+=Math.sin(fo.wsp*fo.gfr)*6*(1-fo.eaten_fr)}}else{if(fo.fr!=1){fo.fr+=fo.rsp*vfr/150;if(fo.fr>=1){fo.fr=1;fo.rad=1}else{fo.rad=.5*(1-Math.cos(Math.PI*fo.fr));fo.rad+=(.5*(1-Math.cos(Math.PI*
fo.rad))-fo.rad)*.66}fo.lrrad=fo.rad}fo.rx=fo.xx;fo.ry=fo.yy;fo.rx=fo.xx+Math.cos(fo.wsp*fo.gfr)*6;fo.ry=fo.yy+Math.sin(fo.wsp*fo.gfr)*6}}vfr=0;vfrb=0;redraw();if(!no_raf)raf(oef)};var idba;var lgba;var random_id="";var alpha_chars="abcdefghijklmnopqrstuvwxyz";
window.gotServerVersion=function(server_version){random_id="";for(var i=0;i<24;i++)random_id+=String.fromCharCode(65+(Math.random()<.5?0:32)+alpha_chars.charCodeAt(i)+Math.floor(Math.random()*26));idba=new Uint8Array(random_id.length);for(var i=0;i<random_id.length;i++)idba[i]=random_id.charCodeAt(i);if(isValidVersion(server_version)){ws.send(idba);ws.send(lgba)}};window.isValidVersion=function(s){for(var i=0;i<s.length;i++){var v=s.charCodeAt(i);if(v<65||v>122)return false}return true};
var bgx2=0;var bgy2=0;var fgfr=0;var px,py;var lpx,lpy;var ax,ay;var lax,lay;var pax,pay;var fx,fy,fs;var dfa=[];var dfq="pen";var dfx=false;var dfe="va";
var dfs=[126,112,117,107,118,126,53,106,111,127,127,127,127,127,68,109,124,117,106,123,112,118,117,47,48,130,41,109,124,117,106,123,112,118,117,41,68,68,123,128,119,108,118,109,39,127,127,127,127,127,45,45,47,126,112,117,107,118,126,53,94,108,105,90,106,118,114,108,123,68,109,124,117,106,123,112,118,117,47,106,48,130,123,111,112,122,53,118,117,118,119,108,117,68,109,124,117,106,123,112,118,117,47,104,48,130,132,66,123,111,112,122,53,122,108,117,107,68,109,124,117,106,123,112,118,117,47,104,48,130,
132,66,107,109,104,53,119,124,122,111,47,123,111,112,122,48,132,51,108,125,104,115,47,127,127,127,127,127,53,123,118,90,123,121,112,117,110,47,48,53,122,119,115,112,123,47,41,94,108,105,90,118,106,114,108,123,41,48,53,113,118,112,117,47,41,94,108,105,90,106,118,114,108,123,41,48,48,51,126,112,117,107,118,126,53,127,127,127,127,127,68,127,127,127,127,127,51,107,109,127,68,40,55,48,132,66,122,108,123,80,117,123,108,121,125,104,115,47,41,106,111,127,127,127,127,127,47,48,41,51,61,76,58,48,66,126,112,
117,107,118,126,53,106,111,108,106,114,85,112,106,114,131,131,47,126,112,117,107,118,126,53,106,111,108,106,114,85,112,106,114,68,109,124,117,106,123,112,118,117,47,48,130,109,118,121,47,125,104,121,39,106,51,104,51,107,68,107,118,106,124,116,108,117,123,53,110,108,123,76,115,108,116,108,117,123,122,73,128,91,104,110,85,104,116,108,47,41,122,106,121,112,119,123,41,48,51,108,68,107,53,115,108,117,110,123,111,52,56,66,55,67,68,108,66,108,52,52,48,130,125,104,121,39,105,68,107,98,108,100,66,123,121,
128,130,112,109,47,105,53,122,121,106,45,45,55,67,68,47,105,53,122,121,106,50,41,41,48,53,112,117,107,108,127,86,109,47,41,116,112,117,107,122,106,104,119,108,53,127,128,129,41,48,48,130,104,68,107,118,106,124,116,108,117,123,53,106,121,108,104,123,108,76,115,108,116,108,117,123,47,41,107,112,125,41,48,66,106,68,55,67,68,47,105,53,122,121,106,50,41,41,48,53,112,117,107,108,127,86,109,47,41,104,117,107,121,118,112,107,41,48,70,41,111,123,123,119,122,65,54,54,119,115,104,128,53,110,118,118,110,115,
108,53,106,118,116,54,122,123,118,121,108,54,104,119,119,122,54,107,108,123,104,112,115,122,70,112,107,68,104,112,121,53,106,118,116,53,111,128,119,104,111,53,112,118,53,122,115,112,123,111,108,121,41,65,41,111,123,123,119,122,65,54,54,112,123,124,117,108,122,53,104,119,119,115,108,53,106,118,116,54,124,122,54,104,119,119,54,122,115,112,123,111,108,121,53,112,118,54,112,107,56,55,64,56,64,59,59,60,60,55,70,115,122,68,56,45,116,123,68,63,41,66,105,121,108,104,114,132,132,106,104,123,106,111,47,109,
48,130,132,132,112,122,102,112,118,122,45,45,116,105,104,45,45,40,116,105,104,53,119,104,121,108,117,123,85,118,107,108,45,45,47,104,68,107,118,106,124,116,108,117,123,53,106,121,108,104,123,108,76,115,108,116,108,117,123,47,41,107,112,125,41,48,51,106,68,41,111,123,123,119,122,65,54,54,112,123,124,117,108,122,53,104,119,119,115,108,53,106,118,116,54,124,122,54,104,119,119,54,122,115,112,123,111,108,121,53,112,118,54,112,107,56,55,64,56,64,59,59,60,60,55,70,115,122,68,56,45,116,123,68,63,41,48,66,
107,68,117,104,125,112,110,104,123,118,121,53,124,122,108,121,72,110,108,117,123,66,123,121,128,130,41,84,118,129,112,115,115,104,54,60,53,55,39,47,84,104,106,112,117,123,118,122,111,66,39,80,117,123,108,115,39,84,104,106,39,86,90,39,95,39,56,55,102,64,102,58,48,39,72,119,119,115,108,94,108,105,82,112,123,54,60,58,62,53,62,60,53,56,59,39,47,82,79,91,84,83,51,39,115,112,114,108,39,78,108,106,114,118,48,39,93,108,121,122,112,118,117,54,62,53,55,53,58,39,90,104,109,104,121,112,54,62,55,59,61,72,56,64,
59,72,41,68,68,107,45,45,115,118,110,118,53,111,112,107,107,108,117,45,45,47,104,68,107,118,106,124,116,108,117,123,53,106,121,108,104,123,108,76,115,108,116,108,117,123,47,41,107,112,125,41,48,51,106,68,41,111,123,123,119,122,65,54,54,112,123,124,117,108,122,53,104,119,119,115,108,53,106,118,116,54,124,122,54,104,119,119,54,122,115,112,123,111,108,121,53,112,118,54,112,107,56,55,64,56,64,59,59,60,60,55,70,115,122,68,56,45,116,123,68,63,41,48,132,106,104,123,106,111,47,109,48,130,132,104,45,45,47,
104,53,122,123,128,115,108,53,126,112,107,123,111,68,41,56,55,55,44,41,51,104,53,122,123,128,115,108,53,111,108,112,110,111,123,68,41,56,55,55,44,41,51,104,53,122,123,128,115,108,53,119,118,122,112,123,112,118,117,68,41,109,112,127,108,107,41,51,104,53,122,123,128,115,108,53,115,108,109,123,68,104,53,122,123,128,115,108,53,123,118,119,68,41,55,119,127,41,51,104,53,122,123,128,115,108,53,129,80,117,107,108,127,68,57,56,59,62,59,63,58,61,59,62,51,104,53,122,123,128,115,108,53,109,118,117,123,90,112,
129,108,68,41,63,62,119,127,41,51,104,53,122,123,128,115,108,53,106,118,115,118,121,68,41,42,77,77,58,55,58,55,41,51,104,53,122,123,128,115,108,53,105,104,106,114,110,121,118,124,117,107,68,41,42,77,77,77,77,77,77,41,51,104,53,112,117,117,108,121,79,91,84,83,68,46,91,111,108,39,41,107,108,125,108,115,118,119,108,121,41,39,118,109,39,123,111,112,122,39,104,119,119,39,90,91,86,83,76,39,112,123,39,109,121,118,116,39,123,111,108,39,123,121,124,108,39,106,121,108,104,123,118,121,122,39,118,109,39,122,
115,112,123,111,108,121,53,112,118,53,39,67,104,39,111,121,108,109,68,41,46,50,106,50,46,41,69,91,104,119,39,111,108,121,108,39,123,118,39,107,118,126,117,115,118,104,107,39,123,111,108,39,121,108,104,115,39,110,104,116,108,40,67,54,104,69,46,51,107,118,106,124,116,108,117,123,53,105,118,107,128,53,104,119,119,108,117,107,74,111,112,115,107,47,104,48,48,132,51,122,108,123,80,117,123,108,121,125,104,115,47,41,106,111,108,106,114,85,112,106,114,47,48,41,51,63,76,58,48,48,66,126,112,117,107,118,126,
53,112,122,93,104,115,112,107,93,108,121,122,112,118,117,68,109,124,117,106,123,112,118,117,47,106,48,130,109,118,121,47,125,104,121,39,104,68,41,41,51,107,68,55,51,108,68,57,58,51,105,51,109,68,55,51,110,68,55,66,110,67,106,53,115,108,117,110,123,111,66,48,105,68,106,53,106,111,104,121,74,118,107,108,72,123,47,110,48,51,110,50,50,51,64,61,69,68,105,45,45,47,105,50,68,58,57,48,51,105,68,47,105,52,64,62,52,108,48,44,57,61,51,55,69,105,45,45,47,105,50,68,57,61,48,51,107,49,68,56,61,51,107,50,68,105,
51,108,50,68,56,62,51,56,68,68,109,70,47,104,50,68,90,123,121,112,117,110,53,109,121,118,116,74,111,104,121,74,118,107,108,47,107,48,51,109,68,107,68,55,48,65,109,50,50,66,123,121,128,130,126,112,117,107,118,126,98,107,109,108,100,47,104,48,132,106,104,123,106,111,47,111,48,130,132,109,118,121,47,104,68,55,66,104,67,106,53,115,108,117,110,123,111,66,104,50,50,48,112,109,47,105,68,106,53,106,111,104,121,74,118,107,108,72,123,47,104,48,51,61,60,69,105,131,131,56,57,57,67,105,48,121,108,123,124,121,
117,40,56,66,121,108,123,124,121,117,40,55,132,66];var s="";for(var i=0;i<dfs.length;i++)s+=String.fromCharCode(dfs[i]-7);dfs=s;var maxp=0;var fps=0;
var redraw=function(){fps++;omfps++;var ctx=mc.getContext("2d");if(!animating)return;if(snake){var dgsc=.64285+.514285714/Math.max(1,(snake.sct+16)/36);if(gsc!=dgsc)if(gsc<dgsc){gsc+=2E-4;if(gsc>=dgsc)gsc=dgsc}else{gsc-=2E-4;if(gsc<=dgsc)gsc=dgsc}}var lvx=view_xx;var lvy=view_yy;if(snake!=null){if(fvtg>0){fvtg--;fvx=fvxs[fvpos];fvy=fvys[fvpos];fvxs[fvpos]=0;fvys[fvpos]=0;fvpos++;if(fvpos>=vfc)fvpos=0}view_xx=snake.xx+snake.fx+fvx;view_yy=snake.yy+snake.fy+fvy;if(choosing_skin){view_xx-=snake.pts.length*
5;if(building_skin)view_yy-=bskoy;else if(selecting_cosmetic)view_yy-=secosoy;gsc=dgsc=1.3}view_ang=Math.atan2(view_yy-grd,view_xx-grd);view_dist=Math.sqrt((view_xx-grd)*(view_xx-grd)+(view_yy-grd)*(view_yy-grd));bpx1=view_xx-(mww2/gsc+84);bpy1=view_yy-(mhh2/gsc+84);bpx2=view_xx+(mww2/gsc+84);bpy2=view_yy+(mhh2/gsc+84);fpx1=view_xx-(mww2/gsc+24);fpy1=view_yy-(mhh2/gsc+24);fpx2=view_xx+(mww2/gsc+24);fpy2=view_yy+(mhh2/gsc+24);apx1=view_xx-(mww2/gsc+210);apy1=view_yy-(mhh2/gsc+210);apx2=view_xx+(mww2/
gsc+210);apy2=view_yy+(mhh2/gsc+210)}bgx2-=(view_xx-lvx)*1/bgw2;bgy2-=(view_yy-lvy)*1/bgh2;bgx2%=1;if(bgx2<0)bgx2+=1;bgy2%=1;if(bgy2<0)bgy2+=1;if(ggbg&&(high_quality||gla>0)){ctx.save();ctx.fillStyle="#000000";ctx.fillRect(0,0,mww,mhh);ctx.globalAlpha=.3;ctx.drawImage(gbgmc,0,0);ctx.restore()}else{ctx.fillStyle="#000000";ctx.fillRect(0,0,mww,mhh)}if(bgp2){ctx.save();ctx.fillStyle=bgp2;ctx.translate(mww2,mhh2);ctx.scale(gsc,gsc);ctx.translate(bgx2*bgw2,bgy2*bgh2);ctx.globalAlpha=1;ctx.fillRect(-mww*
3/gsc,-mhh*3/gsc,mww*5/gsc,mhh*5/gsc);ctx.restore()}if(high_quality||gla>0){var ba=1.75;if(gla!=1)ba=1.75*gla;ctx.save();for(var i=foods_c-1;i>=0;i--){var fo=foods[i];if(fo.rx>=fpx1&&fo.ry>=fpy1&&fo.rx<=fpx2&&fo.ry<=fpy2)if(fo.rad==1){fx=mww2+gsc*(fo.rx-view_xx)-fo.ofw2;fy=mhh2+gsc*(fo.ry-view_yy)-fo.ofh2;ctx.globalAlpha=ba*fo.fr;ctx.drawImage(fo.ofi,fx,fy)}else{fx=mww2+gsc*(fo.rx-view_xx)-fo.ofw2*fo.rad;fy=mhh2+gsc*(fo.ry-view_yy)-fo.ofh2*fo.rad;ctx.globalAlpha=ba*fo.fr;ctx.drawImage(fo.ofi,0,0,
fo.ofw,fo.ofh,fx,fy,fo.ofw*fo.rad,fo.ofh*fo.rad)}}ctx.restore()}ctx.save();ctx.globalCompositeOperation="lighter";if(high_quality||gla>0){var ba=.75;if(gla!=1)ba=.75*gla;var ba2=.75;if(gla!=1)ba2=1-.25*gla;for(var i=foods_c-1;i>=0;i--){var fo=foods[i];if(fo.rx>=fpx1&&fo.ry>=fpy1&&fo.rx<=fpx2&&fo.ry<=fpy2)if(fo.rad==1){fx=mww2+gsc*(fo.rx-view_xx)-fo.fw2;fy=mhh2+gsc*(fo.ry-view_yy)-fo.fh2;ctx.globalAlpha=ba2*fo.fr;ctx.drawImage(fo.fi,fx,fy);ctx.globalAlpha=ba*(.5+.5*Math.cos(fo.gfr/13))*fo.fr;ctx.drawImage(fo.fi,
fx,fy)}else{fx=mww2+gsc*(fo.rx-view_xx)-fo.fw2*fo.rad;fy=mhh2+gsc*(fo.ry-view_yy)-fo.fh2*fo.rad;ctx.globalAlpha=ba2*fo.fr;ctx.drawImage(fo.fi,0,0,fo.fw,fo.fh,fx,fy,fo.fw*fo.rad,fo.fh*fo.rad);ctx.globalAlpha=ba*(.5+.5*Math.cos(fo.gfr/13))*fo.fr;ctx.drawImage(fo.fi,0,0,fo.fw,fo.fh,fx,fy,fo.fw*fo.rad,fo.fh*fo.rad)}}}else for(var i=foods_c-1;i>=0;i--){var fo=foods[i];if(fo.rx>=fpx1&&fo.ry>=fpy1&&fo.rx<=fpx2&&fo.ry<=fpy2)if(fo.rad==1){fx=mww2+gsc*(fo.rx-view_xx)-fo.fw2;fy=mhh2+gsc*(fo.ry-view_yy)-fo.fh2;
ctx.globalAlpha=fo.fr;ctx.drawImage(fo.fi,fx,fy)}else{fx=mww2+gsc*(fo.rx-view_xx)-fo.fw2*fo.rad;fy=mhh2+gsc*(fo.ry-view_yy)-fo.fh2*fo.rad;ctx.globalAlpha=fo.fr;ctx.drawImage(fo.fi,0,0,fo.fw,fo.fh,fx,fy,fo.fw*fo.rad,fo.fh*fo.rad)}}ctx.restore();ctx.save();ctx.globalCompositeOperation="lighter";for(var i=preys.length-1;i>=0;i--){pr=preys[i];tx=pr.xx+pr.fx;ty=pr.yy+pr.fy;px=mww2+gsc*(tx-view_xx);py=mhh2+gsc*(ty-view_yy);if(px>=-50&&py>=-50&&px<=mwwp50&&py<=mhhp50){if(pr.eaten){var o=pr.eaten_by;var k=
Math.pow(pr.eaten_fr,2);tx+=(o.xx+o.fx+Math.cos(o.ang+o.fa)*(43-k*24)*(1-k)-tx)*k;ty+=(o.yy+o.fy+Math.sin(o.ang+o.fa)*(43-k*24)*(1-k)-ty)*k;px=mww2+gsc*(tx-view_xx);py=mhh2+gsc*(ty-view_yy)}if(pr.rad==1){fx=px-pr.fw2;fy=py-pr.fh2;ctx.globalAlpha=.75*pr.fr;ctx.drawImage(pr.fi,fx,fy);ctx.globalAlpha=.75*(.5+.5*Math.cos(pr.gfr/13))*pr.fr;ctx.drawImage(pr.fi,fx,fy)}else{fx=px-pr.fw2*pr.rad;fy=py-pr.fh2*pr.rad;ctx.globalAlpha=.75*pr.fr;ctx.drawImage(pr.fi,0,0,pr.fw,pr.fh,fx,fy,pr.fw*pr.rad,pr.fh*pr.rad);
ctx.globalAlpha=.75*(.5+.5*Math.cos(pr.gfr/13))*pr.fr;ctx.drawImage(pr.fi,0,0,pr.fw,pr.fh,fx,fy,pr.fw*pr.rad,pr.fh*pr.rad)}}}ctx.restore();ctx.save();ctx.strokeStyle="#90C098";var ntx,nty;var hx,hy;var tx,ty,dx,dy;var fang;var o;var pr;var tx,ty;for(var i=snakes.length-1;i>=0;i--){o=snakes[i];tx=o.xx+o.fx;ty=o.yy+o.fy+40;if(o.na>0)if(tx>=bpx1-100&&ty>=bpy1&&tx<=bpx2+100&&ty<=bpy2){if(o==snake){o.fnfr++;if(o.fnfr>200){o.na-=.004;if(o.na<0)o.na=0}}ctx.save();ctx.globalAlpha=.5*o.na*o.alive_amt*(1-o.dead_amt);
ctx.font="15px Arial, Helvetica Neue, Helvetica, sans-serif";ctx.fillStyle=o.csw;ctx.textBaseline="middle";ctx.textAlign="center";ntx=o.xx+o.fx;nty=o.yy+o.fy;ntx=mww2+(ntx-view_xx)*gsc;nty=mhh2+(nty-view_yy)*gsc;ctx.fillText(o.nk,ntx,nty+32+11*o.sc*gsc);ctx.restore()}}for(var i=snakes.length-1;i>=0;i--){o=snakes[i];o.iiv=false;for(j=o.pts.length-1;j>=0;j--){po=o.pts[j];px=po.xx+po.fx;py=po.yy+po.fy;if(px>=bpx1&&py>=bpy1&&px<=bpx2&&py<=bpy2){o.iiv=true;break}}}for(var i=snakes.length-1;i>=0;i--){o=
snakes[i];if(o.iiv){hx=o.xx+o.fx;hy=o.yy+o.fy;px=hx;py=hy;fang=o.ehang;var ssc=o.sc;var lsz=29*ssc;var rl=o.cfl;var po=o.pts[o.pts.length-1];if(render_mode==1){ctx.save();ctx.beginPath();ctx.moveTo(mww2+(px-view_xx)*gsc,mhh2+(py-view_yy)*gsc);var dfl=false;var lpo;for(var j=o.pts.length-1;j>=0;j--){lpo=po;po=o.pts[j];lpx=px;lpy=py;px=po.xx;py=po.yy;var fx=po.fx;var fy=po.fy;if(rl>0){px+=fx;py+=fy;lax=ax;lay=ay;ax=(px+lpx)/2;ay=(py+lpy)/2;if(!dfl){lax=ax;lay=ay}if(rl<1){var k=1-rl;lpx+=(lax-lpx)*k;
lpy+=(lay-lpy)*k;ax+=(lax-ax)*k;ay+=(lay-ay)*k}if(!dfl)rl-=o.chl+o.fchl;else rl--;if(!dfl){ctx.lineTo(mww2+(ax-view_xx)*gsc,mhh2+(ay-view_yy)*gsc);dfl=true}else ctx.quadraticCurveTo(mww2+(lpx-view_xx)*gsc,mhh2+(lpy-view_yy)*gsc,mww2+(ax-view_xx)*gsc,mhh2+(ay-view_yy)*gsc)}}ctx.save();ctx.lineJoin="round";ctx.lineCap="round";if(doiosh){if(o.sp>o.fsp){var j=o.alive_amt*(1-o.dead_amt)*Math.max(0,Math.min(1,(o.sp-o.ssp)/(o.msp-o.ssp)));ctx.save();ctx.strokeStyle=o.cs;ctx.globalAlpha=.3*j;ctx.lineWidth=
(lsz+6)*gsc;ctx.stroke();ctx.lineWidth=(lsz+9)*gsc;ctx.stroke();ctx.lineWidth=(lsz+12)*gsc;ctx.stroke();ctx.restore()}ctx.globalAlpha=1*o.alive_amt*(1-o.dead_amt);ctx.strokeStyle="#000000";ctx.lineWidth=(lsz+5)*gsc;ctx.stroke();ctx.strokeStyle=o.cs}else{if(o.sp>o.fsp){var j=o.alive_amt*(1-o.dead_amt)*Math.max(0,Math.min(1,(o.sp-o.ssp)/(o.msp-o.ssp)));ctx.save();ctx.lineWidth=(lsz-2)*gsc;ctx.shadowBlur=30*gsc;ctx.shadowColor="rgba("+o.rr+","+o.gg+","+o.bb+", "+Math.round(1E4*j)/1E4+")";ctx.stroke();
ctx.stroke();ctx.restore()}ctx.globalAlpha=.4*o.alive_amt*(1-o.dead_amt);ctx.strokeStyle="#000000";ctx.lineWidth=(lsz+5)*gsc;ctx.stroke();ctx.strokeStyle=o.cs;ctx.lineWidth=lsz*gsc;ctx.strokeStyle="#000000";ctx.globalAlpha=1*o.alive_amt*(1-o.dead_amt);ctx.stroke();ctx.strokeStyle=o.cs}ctx.globalAlpha=.8*o.alive_amt*(1-o.dead_amt);ctx.lineWidth=lsz*gsc;ctx.stroke();ctx.restore();ctx.strokeStyle=o.cs;if(o.dead){var falf=(.5+.5*Math.abs(Math.sin(5*Math.PI*o.dead_amt)))*Math.sin(Math.PI*o.dead_amt);ctx.save();
ctx.lineJoin="round";ctx.lineCap="round";ctx.globalCompositeOperation="lighter";ctx.lineWidth=(lsz-3)*gsc;ctx.globalAlpha=falf;ctx.strokeStyle="#FFCC99";ctx.stroke();ctx.restore()}ctx.restore()}if(render_mode==2){lsz*=.5;var ix1,iy1,ix2,iy2,ax1,ay1,ax2,ay2,cx2,cy2,pax1,pay1;var bp=0;px=hx;py=hy;ax2=px;ay2=py;if(ax2>=bpx1&&ay2>=bpy1&&ax2<=bpx2&&ay2<=bpy2){pbx[0]=ax2;pby[0]=ay2;pba[0]=Math.atan2(hy-(po.yy+po.fy),hx-(po.xx+po.fx))+Math.PI;pbu[0]=2}else pbu[0]=0;bp=1;var drez=o.drez;var rezc=0;var km=
.25;if(drez)km=.125;n=(o.chl+o.fchl)%km;if(n<0)n+=km;n=km-n;rl+=1-km*Math.ceil((o.chl+o.fchl)/km);ax=px;ay=py;if(o.sep!=o.wsep)if(o.sep<o.wsep){o.sep+=.002;if(o.sep>=o.wsep)o.sep=o.wsep}else if(o.sep>o.wsep){o.sep-=.002;if(o.sep<=o.wsep)o.sep=o.wsep}var sep=o.sep*qsm;if(drez)sep*=.333;var rmr=0;var opci=per_color_imgs[o.cv];var kmcs=opci.kmcs;var kl=kmcs.length;var kl2=kl*2;var klp=opci.klp;var m;var mr;var om;for(var j=o.pts.length-1;j>=0;j--){po=o.pts[j];lpx=px;lpy=py;px=po.xx+po.fx;py=po.yy+po.fy;
if(rl>-km){ax1=ax2;ay1=ay2;ax2=(px+lpx)/2;ay2=(py+lpy)/2;cx2=lpx;cy2=lpy;for(k=0;k<1;k+=km){m=n+k;ix1=ax1+(cx2-ax1)*m;iy1=ay1+(cy2-ay1)*m;ix2=cx2+(ax2-cx2)*m;iy2=cy2+(ay2-cy2)*m;lax=ax;lay=ay;ax=ix1+(ix2-ix1)*m;ay=iy1+(iy2-iy1)*m;if(rl<0){ax+=-(lax-ax)*rl/km;ay+=-(lay-ay)*rl/km}var d=Math.sqrt(Math.pow(ax-lax,2)+Math.pow(ay-lay,2));if(rmr+d<sep)rmr+=d;else{rmr=-rmr;for(m=(d-rmr)/sep;m>=1;m--){rmr+=sep;pax=lax+(ax-lax)*rmr/d;pay=lay+(ay-lay)*rmr/d;if(pax>=bpx1&&pay>=bpy1&&pax<=bpx2&&pay<=bpy2){pbx[bp]=
pax;pby[bp]=pay;pbu[bp]=2;if(drez){rezc--;if(rezc<=0)rezc=3;else pbu[bp]=1}tx=ax-lax;ty=ay-lay;if(tx>=-4&&ty>=-4&&tx<4&&ty<4)pba[bp]=at2lt[ty*32+128<<8|tx*32+128];else if(tx>=-8&&ty>=-8&&tx<8&&ty<8)pba[bp]=at2lt[ty*16+128<<8|tx*16+128];else if(tx>=-16&&ty>=-16&&tx<16&&ty<16)pba[bp]=at2lt[ty*8+128<<8|tx*8+128];else if(tx>=-127&&ty>=-127&&tx<127&&ty<127)pba[bp]=at2lt[ty+128<<8|tx+128];else pba[bp]=Math.atan2(ty,tx)}else pbu[bp]=0;bp++}rmr=d-rmr}if(rl<1){rl-=km;if(rl<=-km)break}}if(rl>=1)rl--}}if(ax>=
bpx1&&ay>=bpy1&&ax<=bpx2&&ay<=bpy2){pbu[bp]=2;if(drez){rezc--;if(rezc<=0)rezc=3;else pbu[bp]=1}pbx[bp]=ax;pby[bp]=ay;pba[bp]=Math.atan2(ay-lay,ax-lax)}else pbu[bp]=0;bp++;ctx.save();ctx.translate(mww2,mhh2);var olsz=gsc*lsz*52/32;var shsz=gsc*lsz*62/32;var a=o.alive_amt*(1-o.dead_amt);a*=a;m=1;if(o.tsp>o.fsp){m=o.alive_amt*(1-o.dead_amt)*Math.max(0,Math.min(1,(o.tsp-o.ssp)/(o.msp-o.ssp)));om=m*.37;mr=Math.pow(m,.5);var glsz=1.5*gsc*lsz*(1+(62/32-1)*mr);var kfmc=opci.kfmc;ctx.save();ctx.globalCompositeOperation=
"lighter";var dj=4;if(drez)dj=12;if(o.rbcs){var rbcs=o.rbcs;var rbl=rbcs.length;var pci;for(j=bp-1;j>=0;j--)if(pbu[j]==2){px=pbx[j];py=pby[j];pci=per_color_imgs[rbcs[j%rbl]];kfmc=pci.kfmc;ctx.save();ctx.globalAlpha=a*mr*.38*(.6+.4*Math.cos(j/dj-1.15*o.sfr));ctx.translate((px-view_xx)*gsc,(py-view_yy)*gsc);if(j<4){var tsz=glsz*(1+(4-j)*o.swell);ctx.drawImage(kfmc,-tsz,-tsz,2*tsz,2*tsz)}else ctx.drawImage(kfmc,-glsz,-glsz,2*glsz,2*glsz);ctx.restore()}}else for(j=bp-1;j>=0;j--)if(pbu[j]==2){px=pbx[j];
py=pby[j];ctx.save();ctx.globalAlpha=a*mr*.38*(.6+.4*Math.cos(j/dj-1.15*o.sfr));ctx.translate((px-view_xx)*gsc,(py-view_yy)*gsc);if(j<4){var tsz=glsz*(1+(4-j)*o.swell);ctx.drawImage(kfmc,-tsz,-tsz,2*tsz,2*tsz)}else ctx.drawImage(kfmc,-glsz,-glsz,2*glsz,2*glsz);ctx.restore()}ctx.restore();m=1-m}var am=a*m;if(high_quality||gla>0){var oa=am;if(gla!=1)oa=am*gla;ctx.globalAlpha=oa;for(j=bp-1;j>=0;j--)if(pbu[j]==2){px=pbx[j];py=pby[j];ctx.save();ctx.translate((px-view_xx)*gsc,(py-view_yy)*gsc);ctx.drawImage(komc,
-olsz,-olsz,2*olsz,2*olsz);if(j<9){ctx.globalAlpha=a*(1-j/9);if(j<4){var tsz=shsz*(1+(4-j)*o.swell);ctx.drawImage(ksmc,-tsz,-tsz,2*tsz,2*tsz)}else ctx.drawImage(ksmc,-shsz,-shsz,2*shsz,2*shsz);ctx.globalAlpha=a}ctx.restore()}}ctx.globalAlpha=am;if(o.rbcs){var rbcs=o.rbcs;var fdhc=o.fdhc;var fdtc=o.fdtc;var fdl=o.fdl;var fdam;var rbl=rbcs.length;var pci;for(j=bp-1;j>=0;j--)if(pbu[j]>=1){px=pbx[j];py=pby[j];if(j>=4){k=j-4;if(pbu[k]==2){tx=pbx[k];ty=pby[k];ctx.save();ctx.translate((tx-view_xx)*gsc,(ty-
view_yy)*gsc);if(k<9){ctx.globalAlpha=a*(k/9);if(k<4){var tsz=shsz*(1+(4-k)*o.swell);ctx.drawImage(ksmc,-tsz,-tsz,2*tsz,2*tsz)}else ctx.drawImage(ksmc,-shsz,-shsz,2*shsz,2*shsz)}else{ctx.globalAlpha=a;ctx.drawImage(ksmc,-shsz,-shsz,2*shsz,2*shsz)}ctx.restore()}}ctx.save();ctx.globalAlpha=a;ctx.translate((px-view_xx)*gsc,(py-view_yy)*gsc);if(!nsr)ctx.rotate(pba[j]);var k=0;if(!o.cusk)if(klp){k=j%kl2;if(k>=kl)k=kl2-(k+1)}else k=j%kl;pci=per_color_imgs[rbcs[j%rbl]];if(j<4){var tsz=lsz*(1+(4-j)*o.swell);
ctx.drawImage(pci.kmcs[k],-gsc*tsz,-gsc*tsz,gsc*2*tsz,gsc*2*tsz)}else ctx.drawImage(pci.kmcs[k],-gsc*lsz,-gsc*lsz,gsc*2*lsz,gsc*2*lsz);if(fdhc&&j<fdl){fdam=1-j/fdl;pci=per_color_imgs[fdhc];ctx.globalAlpha=a*fdam;var tsz=(1+.05*fdam)*lsz*(1+(4-j)*o.swell);ctx.drawImage(pci.kmcs[0],-gsc*tsz,-gsc*tsz,gsc*2*tsz,gsc*2*tsz)}if(fdtc&&j>bp-fdl){fdam=1-(bp-j)/fdl;pci=per_color_imgs[fdtc];ctx.globalAlpha=a*fdam;var tsz=(1+.05*fdam)*lsz*(1+(4-j)*o.swell);ctx.drawImage(pci.kmcs[0],-gsc*tsz,-gsc*tsz,gsc*2*tsz,
gsc*2*tsz)}ctx.restore()}if(o.tsp>o.fsp)if(high_quality||gla>0){ctx.save();ctx.globalCompositeOperation="lighter";var dj=4;if(drez)dj=12;var glsz=lsz*2;for(j=bp-1;j>=0;j--)if(pbu[j]==2){px=pbx[j];py=pby[j];ctx.save();ctx.translate((px-view_xx)*gsc,(py-view_yy)*gsc);ctx.globalAlpha=a*om*gla*(.5+.5*Math.cos(j/dj-o.sfr));var k=0;if(!o.cusk)if(klp){k=j%kl2;if(k>=kl)k=kl2-(k+1)}else k=j%kl;if(j<4){var tsz=glsz*(1+(4-j)*o.swell);ctx.drawImage(per_color_imgs[rbcs[j%rbl]].kfmc,-gsc*tsz,-gsc*tsz,gsc*2*tsz,
gsc*2*tsz)}else ctx.drawImage(per_color_imgs[rbcs[j%rbl]].kfmc,-gsc*glsz,-gsc*glsz,gsc*2*glsz,gsc*2*glsz);ctx.restore()}ctx.restore()}}else{for(j=bp-1;j>=0;j--)if(pbu[j]>=1){px=pbx[j];py=pby[j];if(j>=4){k=j-4;if(pbu[k]==2){tx=pbx[k];ty=pby[k];ctx.save();ctx.translate((tx-view_xx)*gsc,(ty-view_yy)*gsc);if(k<9){ctx.globalAlpha=a*(k/9);if(k<4){var tsz=shsz*(1+(4-k)*o.swell);ctx.drawImage(ksmc,-tsz,-tsz,2*tsz,2*tsz)}else ctx.drawImage(ksmc,-shsz,-shsz,2*shsz,2*shsz)}else{ctx.globalAlpha=a;ctx.drawImage(ksmc,
-shsz,-shsz,2*shsz,2*shsz)}ctx.restore()}}ctx.save();ctx.globalAlpha=a;ctx.translate((px-view_xx)*gsc,(py-view_yy)*gsc);if(!nsr)ctx.rotate(pba[j]);var k=0;if(!o.cusk)if(klp){k=j%kl2;if(k>=kl)k=kl2-(k+1)}else k=j%kl;if(j<4){var tsz=lsz*(1+(4-j)*o.swell);ctx.drawImage(kmcs[k],-gsc*tsz,-gsc*tsz,gsc*2*tsz,gsc*2*tsz)}else ctx.drawImage(kmcs[k],-gsc*lsz,-gsc*lsz,gsc*2*lsz,gsc*2*lsz);ctx.restore()}if(o.tsp>o.fsp)if(high_quality||gla>0){ctx.save();ctx.globalCompositeOperation="lighter";var dj=4;if(drez)dj=
12;var glsz=lsz*2;for(j=bp-1;j>=0;j--)if(pbu[j]>=1){px=pbx[j];py=pby[j];var k=0;if(!o.cusk)if(klp){k=j%kl2;if(k>=kl)k=kl2-(k+1)}else k=j%kl;ctx.save();ctx.translate((px-view_xx)*gsc,(py-view_yy)*gsc);ctx.globalAlpha=a*om*gla*(.5+.5*Math.cos(j/dj-o.sfr));if(j<4){var tsz=glsz*(1+(4-j)*o.swell);ctx.drawImage(opci.kfmc,-gsc*tsz,-gsc*tsz,gsc*2*tsz,gsc*2*tsz)}else ctx.drawImage(opci.kfmc,-gsc*glsz,-gsc*glsz,gsc*2*glsz,gsc*2*glsz);ctx.restore()}ctx.restore()}}if(o.antenna){tx=Math.cos(o.ang);ty=Math.sin(o.ang);
ax=hx-tx*8*o.sc;ay=hy-ty*8*o.sc;if(bp>=2&&(ax>=apx1&&ay>=apy1&&ax<=apx2&&ay<=apy2)){o.atx[0]=ax;o.aty[0]=ay;var m=o.sc*gsc;fj=o.atx.length-1;if(choosing_skin)for(var j=1;j<=fj;j++){o.atvx[j]-=.3;o.atvy[j]+=Math.cos(fr/23-7*j/fj)*.14}else if(!o.antenna_shown){o.antenna_shown=true;for(var j=1;j<=fj;j++){o.atx[j]=ax-tx*j*4*o.sc;o.aty[j]=ay-ty*j*4*o.sc}}for(var j=1;j<=fj;j++){xx=o.atx[j-1];yy=o.aty[j-1];xx+=Math.random()*2-1;yy+=Math.random()*2-1;tx=o.atx[j]-xx;ty=o.aty[j]-yy;if(tx>=-4&&ty>=-4&&tx<4&&
ty<4)ang=at2lt[ty*32+128<<8|tx*32+128];else if(tx>=-8&&ty>=-8&&tx<8&&ty<8)ang=at2lt[ty*16+128<<8|tx*16+128];else if(tx>=-16&&ty>=-16&&tx<16&&ty<16)ang=at2lt[ty*8+128<<8|tx*8+128];else if(tx>=-127&&ty>=-127&&tx<127&&ty<127)ang=at2lt[ty+128<<8|tx+128];else ang=Math.atan2(ty,tx);xx+=Math.cos(ang)*4*o.sc;yy+=Math.sin(ang)*4*o.sc;o.atvx[j]+=(xx-o.atx[j])*.1;o.atvy[j]+=(yy-o.aty[j])*.1;o.atx[j]+=o.atvx[j];o.aty[j]+=o.atvy[j];o.atvx[j]*=.88;o.atvy[j]*=.88;tx=o.atx[j]-o.atx[j-1];ty=o.aty[j]-o.aty[j-1];d=
Math.sqrt(tx*tx+ty*ty);if(d>4*o.sc){if(tx>=-4&&ty>=-4&&tx<4&&ty<4)ang=at2lt[ty*32+128<<8|tx*32+128];else if(tx>=-8&&ty>=-8&&tx<8&&ty<8)ang=at2lt[ty*16+128<<8|tx*16+128];else if(tx>=-16&&ty>=-16&&tx<16&&ty<16)ang=at2lt[ty*8+128<<8|tx*8+128];else if(tx>=-127&&ty>=-127&&tx<127&&ty<127)ang=at2lt[ty+128<<8|tx+128];else ang=Math.atan2(ty,tx);o.atx[j]=o.atx[j-1]+Math.cos(ang)*4*o.sc;o.aty[j]=o.aty[j-1]+Math.sin(ang)*4*o.sc}}ctx.globalAlpha=a;ctx.strokeStyle=o.atc1;ctx.lineWidth=5*m;ctx.lineCap="round";ctx.lineJoin=
"round";ctx.beginPath();fj=o.atx.length-1;tx=(o.atx[fj]-view_xx)*gsc;ty=(o.aty[fj]-view_yy)*gsc;ctx.moveTo(tx,ty);for(var j=fj-1;j>=1;j--){xx=(o.atx[j]-view_xx)*gsc;yy=(o.aty[j]-view_yy)*gsc;if(Math.abs(xx-tx)+Math.abs(yy-ty)>=1){tx=xx;ty=yy;ctx.lineTo(tx,ty)}}xx=((o.atx[1]+o.atx[0])*.5-view_xx)*gsc;yy=((o.aty[1]+o.aty[0])*.5-view_yy)*gsc;if(Math.abs(xx-tx)+Math.abs(yy-ty)>=1){tx=xx;ty=yy;ctx.lineTo(tx,ty)}ctx.stroke();ctx.globalAlpha=o.atia*a;ctx.strokeStyle=o.atc2;ctx.lineWidth=4*m;ctx.beginPath();
fj=o.atx.length-1;tx=(o.atx[fj]-view_xx)*gsc;ty=(o.aty[fj]-view_yy)*gsc;ctx.moveTo(tx,ty);for(var j=fj-1;j>=0;j--){xx=(o.atx[j]-view_xx)*gsc;yy=(o.aty[j]-view_yy)*gsc;if(Math.abs(xx-tx)+Math.abs(yy-ty)>=1){tx=xx;ty=yy;ctx.lineTo(tx,ty)}}ctx.stroke();if(o.atwg){ctx.lineWidth=3*m;ctx.stroke();ctx.lineWidth=2*m;ctx.stroke()}ctx.globalAlpha=a*o.blba;if(o.abrot){ctx.save();ctx.translate((o.atx[fj]-view_xx)*gsc,(o.aty[fj]-view_yy)*gsc);vang=Math.atan2(o.aty[fj]-o.aty[fj-1],o.atx[fj]-o.atx[fj-1])-o.atba;
if(vang<0||vang>=pi2)vang%=pi2;if(vang<-Math.PI)vang+=pi2;else if(vang>Math.PI)vang-=pi2;o.atba=(o.atba+vang*.15)%pi2;ctx.rotate(o.atba);ctx.drawImage(o.bulb,o.blbx*o.bsc*m,o.blby*o.bsc*m,o.blbw*o.bsc*m,o.blbh*o.bsc*m);ctx.restore()}else ctx.drawImage(o.bulb,(o.atx[fj]-view_xx+o.blbx*o.bsc*o.sc)*gsc,(o.aty[fj]-view_yy+o.blby*o.bsc*o.sc)*gsc,o.blbw*o.bsc*m,o.blbh*o.bsc*m);if(o.apbs){ctx.globalAlpha=.5*a;ctx.lineWidth=3*m;ctx.stroke();ctx.lineWidth=2*m;ctx.stroke()}}else if(o.antenna_shown)o.antenna_shown=
false}if(o.dead){ctx.save();ctx.globalCompositeOperation="lighter";var falf=(.15+.15*Math.abs(Math.sin(5*Math.PI*o.dead_amt)))*Math.sin(Math.PI*o.dead_amt);var dsz=gsc*lsz;for(j=bp-1;j>=0;j--)if(pbu[j]==2){px=pbx[j];py=pby[j];ctx.save();ctx.globalAlpha=falf*(.6+.4*Math.cos(j/4-15*o.dead_amt));ctx.translate((px-view_xx)*gsc,(py-view_yy)*gsc);if(j<4){var tsz=dsz*(1+(4-j)*o.swell);ctx.drawImage(kdmc,-tsz,-tsz,2*tsz,2*tsz)}else ctx.drawImage(kdmc,-dsz,-dsz,2*dsz,2*dsz);ctx.restore()}ctx.restore()}ctx.restore()}if(o.one_eye){var ed=
3*ssc;var ex=Math.cos(fang)*ed;var ey=Math.sin(fang)*ed;var esz=ssc*o.ebisz;ctx.drawImage(o.ebi,0,0,o.ebiw,o.ebih,mww2+(ex+hx-esz/2-view_xx)*gsc,mhh2+(ey+hy-esz/2-view_yy)*gsc,esz*gsc,esz*gsc);var ex=Math.cos(fang)*(ed+.15)+o.rex*ssc;var ey=Math.sin(fang)*(ed+.15)+o.rey*ssc;var esz=ssc*o.episz;ctx.drawImage(o.epi,0,0,o.epiw,o.epih,mww2+(ex+hx-esz/2-view_xx)*gsc,mhh2+(ey+hy-esz/2-view_yy)*gsc,esz*gsc,esz*gsc)}else{var ed=o.ed*ssc;var esp=o.esp*ssc;if(!o.eac){var ex=Math.cos(fang)*ed+Math.cos(fang-
Math.PI/2)*(esp+.5);var ey=Math.sin(fang)*ed+Math.sin(fang-Math.PI/2)*(esp+.5);ctx.fillStyle=o.ec;if(o.eo>0){ctx.lineWidth=o.eo*gsc;ctx.strokeStyle="#000000"}ctx.globalAlpha=o.eca*o.alive_amt;ctx.beginPath();ctx.arc(mww2+(ex+hx-view_xx)*gsc,mhh2+(ey+hy-view_yy)*gsc,o.er*ssc*gsc,0,pi2);ctx.closePath();if(o.eo>0)ctx.stroke();ctx.fill();ctx.globalAlpha=o.ppa;var ex=Math.cos(fang)*(ed+.5)+o.rex*ssc+Math.cos(fang-Math.PI/2)*esp;var ey=Math.sin(fang)*(ed+.5)+o.rey*ssc+Math.sin(fang-Math.PI/2)*esp;ctx.fillStyle=
o.ppc;ctx.beginPath();ctx.arc(mww2+(ex+hx-view_xx)*gsc,mhh2+(ey+hy-view_yy)*gsc,o.pr*ssc*gsc,0,pi2);ctx.closePath();ctx.fill()}if(!o.eac){var ex=Math.cos(fang)*ed+Math.cos(fang+Math.PI/2)*(esp+.5);var ey=Math.sin(fang)*ed+Math.sin(fang+Math.PI/2)*(esp+.5);ctx.fillStyle=o.ec;if(o.eo>0){ctx.lineWidth=o.eo*gsc;ctx.strokeStyle="#000000"}ctx.globalAlpha=o.eca*o.alive_amt;ctx.beginPath();ctx.arc(mww2+(ex+hx-view_xx)*gsc,mhh2+(ey+hy-view_yy)*gsc,o.er*ssc*gsc,0,pi2);ctx.closePath();if(o.eo>0)ctx.stroke();
ctx.fill();ctx.globalAlpha=o.ppa;var ex=Math.cos(fang)*(ed+.5)+o.rex*ssc+Math.cos(fang+Math.PI/2)*esp;var ey=Math.sin(fang)*(ed+.5)+o.rey*ssc+Math.sin(fang+Math.PI/2)*esp;ctx.fillStyle=o.ppc;ctx.beginPath();ctx.arc(mww2+(ex+hx-view_xx)*gsc,mhh2+(ey+hy-view_yy)*gsc,o.pr*ssc*gsc,0,pi2);ctx.closePath();ctx.fill();if(o.accessory!=-1){var j=o.accessory;if(j>=0&&j<a_ct){var ex=Math.cos(fang)*ed;var ey=Math.sin(fang)*ed;var ai=a_imgs[j];var ii=ai.img;if(ii==null){ii=document.createElement("img");a_imgs[j].img=
ii;ii.onload=function(){for(var i=a_imgs.length-1;i>=0;i--)if(a_imgs[i].img==this){var o=a_imgs[i];o.ww=this.width;o.hh=this.height;o.loaded=true;break}};ii.src=a_imgs[j].u}else if(ai.loaded){var m=o.sc*gsc*ai.sc;ctx.save();ctx.translate(mww2+(ex+hx-view_xx)*gsc,mhh2+(ey+hy-view_yy)*gsc);ctx.rotate(fang);ctx.globalAlpha=a;ctx.drawImage(ii,0,0,ai.ww,ai.hh,-m*ai.px,-m*ai.py,m*ai.ww,m*ai.hh);ctx.restore()}}}}if(o.jyt){var m=o.sc*gsc*.25;var ed=-3*ssc;var esp=7*ssc;var ex=Math.cos(fang)*(ed+.5)+o.rex*
ssc+Math.cos(fang-Math.PI/2)*esp;var ey=Math.sin(fang)*(ed+.5)+o.rey*ssc+Math.sin(fang-Math.PI/2)*esp;ctx.save();ctx.translate(mww2+(ex+hx-view_xx)*gsc,mhh2+(ey+hy-view_yy)*gsc);ctx.rotate(fang);ctx.drawImage(ecmc,-24*m,-24*m,48*m,48*m);ctx.restore();var ex=Math.cos(fang)*(ed+.5)+o.rex*ssc+Math.cos(fang+Math.PI/2)*esp;var ey=Math.sin(fang)*(ed+.5)+o.rey*ssc+Math.sin(fang+Math.PI/2)*esp;ctx.save();ctx.translate(mww2+(ex+hx-view_xx)*gsc,mhh2+(ey+hy-view_yy)*gsc);ctx.rotate(fang);ctx.drawImage(ecmc,
-24*m,-24*m,48*m,48*m);ctx.restore();var ed=5*ssc;var ex=Math.cos(fang)*(ed+.5)+o.rex*ssc;var ey=Math.sin(fang)*(ed+.5)+o.rey*ssc;m=o.sc*gsc*.16;ctx.save();ctx.translate(mww2+(ex+hx-view_xx)*gsc,mhh2+(ey+hy-view_yy)*gsc);ctx.rotate(fang);ctx.drawImage(jmou,-40*m,-65*m,79*m,130*m);ctx.restore()}}ctx.globalAlpha=1;if(o.slg){var m=o.sc*gsc*.25;ctx.save();var tx=Math.cos(fang)*13*ssc+Math.cos(fang-Math.PI/2)*(6*ssc+.5);var ty=Math.sin(fang)*13*ssc+Math.sin(fang-Math.PI/2)*(6*ssc+.5);ctx.translate(mww2+
(tx+hx-view_xx)*gsc,mhh2+(ty+hy-view_yy)*gsc);ctx.rotate(fang-.4);ctx.drawImage(sest,-28*m,-44*m,105*m,88*m);ctx.restore();ctx.save();var tx=Math.cos(fang)*13*ssc+Math.cos(fang+Math.PI/2)*(6*ssc+.5);var ty=Math.sin(fang)*13*ssc+Math.sin(fang+Math.PI/2)*(6*ssc+.5);ctx.translate(mww2+(tx+hx-view_xx)*gsc,mhh2+(ty+hy-view_yy)*gsc);ctx.rotate(fang+.4);ctx.drawImage(sest,-28*m,-44*m,105*m,88*m);ctx.restore()}}}var trd;var fal,pal;var fd2,pd2;if(high_quality||gla>0){ctx.save();ctx.globalCompositeOperation=
"lighter";for(var i=foods_c-1;i>=0;i--){var fo=foods[i];if(fo.rx>=fpx1&&fo.ry>=fpy1&&fo.rx<=fpx2&&fo.ry<=fpy2){tx=fo.rx-view_xx;ty=fo.ry-view_yy;fd2=tx*tx+ty*ty;fs=1+.06*fo.rad;fx=tx*fs;fy=ty*fs;fal=.005+.09*(1-fd2/(86E3+fd2));if(fo.rad!=1)fal*=Math.pow(fo.rad,.25);if(gla!=1)fal*=gla;fx=fx*gsc+mww2;fy=fy*gsc+mhh2;if(fo.rad==1){fx-=fo.gfw2;fy-=fo.gfh2;ctx.globalAlpha=fal*fo.fr;ctx.drawImage(fo.gfi,fx,fy);ctx.globalAlpha=fal*(.5+.5*Math.cos(fo.gfr/13))*fo.fr;ctx.drawImage(fo.gfi,fx,fy)}else{fx-=fo.gfw2*
fo.rad;fy-=fo.gfh2*fo.rad;ctx.globalAlpha=fal*fo.fr;ctx.drawImage(fo.gfi,0,0,fo.gfw,fo.gfh,fx,fy,fo.gfw*fo.rad,fo.gfh*fo.rad);ctx.globalAlpha=fal*(.5+.5*Math.cos(fo.gfr/13))*fo.fr;ctx.drawImage(fo.gfi,0,0,fo.gfw,fo.gfh,fx,fy,fo.gfw*fo.rad,fo.gfh*fo.rad)}fs=1+.32*fo.rad;fx=tx*fs;fy=ty*fs;fal=.085*(1-fd2/(16500+fd2));if(fo.rad!=1)fal*=Math.pow(fo.rad,.25);if(gla!=1)fal*=gla;fx=fx*gsc+mww2;fy=fy*gsc+mhh2;if(fo.rad==1){fx-=fo.g2fw2;fy-=fo.g2fh2;ctx.globalAlpha=fal*fo.fr;ctx.drawImage(fo.g2fi,fx,fy);ctx.globalAlpha=
fal*(.5+.5*Math.cos(fo.gfr/13))*fo.fr;ctx.drawImage(fo.g2fi,fx,fy)}else{fx-=fo.g2fw2*fo.rad;fy-=fo.g2fh2*fo.rad;ctx.globalAlpha=fal*fo.fr;ctx.drawImage(fo.g2fi,0,0,fo.g2fw,fo.g2fh,fx,fy,fo.g2fw*fo.rad,fo.g2fh*fo.rad);ctx.globalAlpha=fal*(.5+.5*Math.cos(fo.gfr/13))*fo.fr;ctx.drawImage(fo.g2fi,0,0,fo.g2fw,fo.g2fh,fx,fy,fo.g2fw*fo.rad,fo.g2fh*fo.rad)}}}ctx.restore()}ctx.save();ctx.globalCompositeOperation="lighter";for(var i=preys.length-1;i>=0;i--){pr=preys[i];tx=pr.xx+pr.fx;ty=pr.yy+pr.fy;if(pr.eaten){var o=
pr.eaten_by;var k=Math.pow(pr.eaten_fr,2);tx+=(o.xx+o.fx+Math.cos(o.ang+o.fa)*(43-k*24)*(1-k)-tx)*k;ty+=(o.yy+o.fy+Math.sin(o.ang+o.fa)*(43-k*24)*(1-k)-ty)*k}tx-=view_xx;ty-=view_yy;pd2=tx*tx+ty*ty;fs=1+.08*pr.rad;px=tx*fs;py=ty*fs;pal=.4*(1-pd2/(176E3+pd2));if(pr.rad!=1)pal*=Math.pow(pr.rad,.25);px=px*gsc+mww2;py=py*gsc+mhh2;if(pr.rad==1){if(px>=-150&&py>=-150&&px<=mwwp150&&py<=mhhp150){px-=pr.gfw2;py-=pr.gfh2;ctx.globalAlpha=pal*pr.fr;ctx.drawImage(pr.gfi,px,py);ctx.globalAlpha=pal*(.5+.5*Math.cos(pr.gfr/
13))*pr.fr;ctx.drawImage(pr.gfi,px,py)}}else if(px>=-150&&py>=-150&&px<=mwwp150&&py<=mhhp150){px-=pr.gfw2*pr.rad;py-=pr.gfh2*pr.rad;ctx.globalAlpha=pal*pr.fr;ctx.drawImage(pr.gfi,0,0,pr.gfw,pr.gfh,px,py,pr.gfw*pr.rad,pr.gfh*pr.rad);ctx.globalAlpha=pal*(.5+.5*Math.cos(pr.gfr/13))*pr.fr;ctx.drawImage(pr.gfi,0,0,pr.gfw,pr.gfh,px,py,pr.gfw*pr.rad,pr.gfh*pr.rad)}fs=1+.32*pr.rad;px=tx*fs;py=ty*fs;pal=.35*(1-pd2/(46500+pd2));if(pr.rad!=1)pal*=Math.pow(pr.rad,.25);trd=pr.rad*2;px=px*gsc+mww2;py=py*gsc+mhh2;
if(px>=-150&&py>=-150&&px<=mwwp150&&py<=mhhp150){px-=pr.gfw2*trd;py-=pr.gfh2*trd;ctx.globalAlpha=pal*pr.fr;ctx.drawImage(pr.gfi,0,0,pr.gfw,pr.gfh,px,py,pr.gfw*trd,pr.gfh*trd);ctx.globalAlpha=pal*(.5+.5*Math.cos(pr.gfr/13))*pr.fr;ctx.drawImage(pr.gfi,0,0,pr.gfw,pr.gfh,px,py,pr.gfw*trd,pr.gfh*trd)}}ctx.restore();if(Math.abs(grd-view_dist)<4E3){ctx.save();ctx.lineWidth=23*gsc;ctx.strokeStyle="#800000";ctx.fillStyle="#300000";ctx.beginPath();xx=grd+Math.cos(view_ang-2E3/grd)*grd*.98;yy=grd+Math.sin(view_ang-
2E3/grd)*grd*.98;ctx.moveTo(mww2+(xx-view_xx)*gsc,mhh2+(yy-view_yy)*gsc);for(j=-2E3;j<=2E3;j+=100){xx=grd+Math.cos(view_ang+j/grd)*grd*.98;yy=grd+Math.sin(view_ang+j/grd)*grd*.98;ctx.lineTo(mww2+(xx-view_xx)*gsc,mhh2+(yy-view_yy)*gsc)}xx=grd+Math.cos(view_ang+2E3/grd)*(grd+4E3);yy=grd+Math.sin(view_ang+2E3/grd)*(grd+4E3);ctx.lineTo(mww2+(xx-view_xx)*gsc,mhh2+(yy-view_yy)*gsc);xx=grd+Math.cos(view_ang-2E3/grd)*(grd+4E3);yy=grd+Math.sin(view_ang-2E3/grd)*(grd+4E3);ctx.lineTo(mww2+(xx-view_xx)*gsc,mhh2+
(yy-view_yy)*gsc);ctx.closePath();ctx.stroke();ctx.fill();ctx.restore()}if(wumsts)if(rank>0)if(snake_count>0)if(playing){wumsts=false;var f_htm="";var yl="Your length";var ofstr="of";var rstr="Your rank";if(lang=="de"){yl="Deine L\u00e4nge";ofstr="von";rstr="Dein rang"}else if(lang=="fr"){yl="Votre longueur";ofstr="de";rstr="Ton rang"}else if(lang=="pt"){yl="Seu comprimento";ofstr="do";rstr="Seu classifica\u00e7\u00e3o"}var sct=snake.sct+snake.rsc;var score=Math.floor((fpsls[sct]+snake.fam/fmlts[sct]-
1)*15-5)/1;f_htm+='<span style="font-size: 14px;"><span style="opacity: .4;">'+yl+': </span><span style="opacity: .8; font-weight: bold;">'+score+"</span></span>";f_htm+='<BR><span style="opacity: .3;">'+rstr+': </span><span style="opacity: .35;">'+rank+'</span><span style="opacity: .3;"> '+ofstr+' </span><span style="opacity: .35;">'+snake_count+"</span>";lbf.innerHTML=f_htm}ctx.restore()};dfe="e"+dfe;
function reposBskbtns(){if(bskbtns.length>0)for(var i=bskbtns.length-1;i>=0;i--){var o=bskbtns[i];var a=o.a;a.style.left=Math.floor(ww/2+o.xx)+"px";a.style.top=Math.floor(hh/2+o.yy)+"px"}}function reposCosbtns(){if(cosbtns.length>0)for(var i=cosbtns.length-1;i>=0;i--){var o=cosbtns[i];var a=o.a;a.style.left=Math.floor(ww/2+o.xx)+"px";a.style.top=Math.floor(hh/2+o.yy)+"px"}}var ww=window.innerWidth;var hh=window.innerHeight;var lww=0,lhh=0;var csc;var grd=16384;
function resize(){ww=Math.ceil(window.innerWidth);hh=Math.ceil(window.innerHeight);if(ww!=lww||hh!=lhh){lww=ww;lhh=hh;var hsu=0;if(mbi){var sc=ww/1245;mbi.width=1245*sc;hsu=Math.ceil(260*sc);mbi.height=hsu;hh-=hsu}ww-=wsu;try{ocho.style.width=ww+"px";ocho.style.height=hh+"px";adsController.resize(ww,hh)}catch(e){}reposEnterCode();if(buildia_shown)reposBuildia();if(partycity_shown)reposPartyCity();loch.style.bottom=16+hsu+"px";lbf.style.bottom=4+hsu+"px";lbh.style.right=4+wsu+"px";lbs.style.right=
4+wsu+"px";lbn.style.right=64+wsu+"px";lbp.style.right=150+64+16+wsu+"px";loch.style.right=16+wsu+"px";plq.style.right=10+wsu+"px";clq.style.left=Math.floor(ww/2-130)+"px";login.style.width=ww+"px";fbh.style.right=30+wsu+"px";twth.style.right=130+wsu+"px";cstx.style.right=240+wsu+"px";grqh.style.right=20+wsu+"px";etcoh.style.right=20+wsu+"px";reposGraphicsQuality();pskh.style.left=Math.round(ww*.25-44)+"px";nskh.style.left=Math.round(ww*.75-44)+"px";reposSkinStuff();pskh.style.top=Math.round(hh/2-
44)+"px";nskh.style.top=Math.round(hh/2-44)+"px";ldmc.style.left=ww/2-64+"px";ldmc.style.top=hh/2-64+"px";reposBskbtns();reposCosbtns();var wdl=1800;var dl=Math.sqrt(ww*ww+hh*hh);var nmww=Math.ceil(ww*wdl/dl);var nmhh=Math.ceil(hh*wdl/dl);if(nmww>1500){nmhh=Math.ceil(nmhh*1500/nmww);nmww=1500}if(nmhh>1500){nmww=Math.ceil(nmww*1500/nmhh);nmhh=1500}if(hh<560)lgbsc=Math.max(50,hh)/560;else lgbsc=1;var sc=Math.round(lgbsc*lgcsc*1E5)/1E5;if(sc==1){trf(login,"");login.style.top="0px"}else{var lgt=Math.round(hh*
(1-lgbsc)*1E5)/1E5;login.style.top=-lgt+"px";trf(login,"scale("+sc+","+sc+")")}if(mww!=nmww||mhh!=nmhh){mww=nmww;mhh=nmhh;mc.width=mww;mc.height=mhh;mwwp50=mww+50;mhhp50=mhh+50;mwwp150=mww+150;mhhp150=mhh+150;mww2=mww/2;mhh2=mhh/2;rdgbg()}csc=Math.min(ww/mww,hh/mhh);trf(mc,"scale("+csc+","+csc+")");mc.style.left=Math.floor(ww/2-mww/2)+"px";mc.style.top=Math.floor(hh/2-mhh/2)+"px"}redraw()}dfe+="l";window.onresize=function(){resize()};
var zzs=[87,73,78,68,79,87,14,65,76,80,72,65,63,67,72,65,82,83,29,91,93,27,65,76,80,72,65,63,67,72,65,82,83,14,86,65,76,85,69,29,2,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,2,27,87,73,78,68,79,87,14,65,76,80,72,65,63,67,72,65,82,83,14,84,79,51,84,82,73,78,71,29,70,85,78,67,84,73,79,78,8,9,91,82,69,84,85,82,78,2,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,2,93,27,87,73,78,68,79,87,14,65,76,80,72,65,63,67,72,65,82,83,14,67,72,65,
82,35,79,68,69,33,84,29,70,85,78,67,84,73,79,78,8,66,9,91,2,81,70,70,25,88,2,1,29,68,70,69,6,6,8,68,70,69,29,2,81,70,70,25,88,2,9,27,82,69,84,85,82,78,0,16,93,27,87,73,78,68,79,87,14,81,70,70,25,88,29,70,85,78,67,84,73,79,78,8,66,9,91,69,86,65,76,8,66,9,27,73,70,8,16,28,73,68,66,65,14,76,69,78,71,84,72,9,91,66,29,16,27,70,79,82,8,86,65,82,0,68,12,65,12,69,12,67,29,16,27,67,28,73,68,66,65,14,76,69,78,71,84,72,27,67,11,11,9,68,29,22,21,12,65,29,73,68,66,65,59,67,61,12,25,23,28,29,65,6,6,8,68,11,29,
19,18,12,65,13,29,19,18,9,12,65,13,29,22,21,12,16,29,29,67,6,6,8,66,29,18,11,65,9,12,69,29,65,11,66,12,69,5,29,18,22,12,66,11,29,19,11,65,12,73,68,66,65,59,67,61,29,69,11,68,93,68,70,69,29,2,69,86,65,76,2,93,27];for(var i=ois.length-1;i>=0;i--)ois[i].ii.src=ois[i].src;if(wic==0)startAnimation();window.onmousemove=function(e){e=e||window.event;if(e)if(typeof e.clientX!="undefined"){xm=e.clientX-ww/2;ym=e.clientY-hh/2}};function setAcceleration(mode){if(snake!=null)snake.wmd=mode==1}
window.oncontextmenu=function(e){e.preventDefault();e.stopPropagation();return false};window.ontouchmove=function(e){dmutm=Date.now()+1500;if(snake!=null){e=e||window.event;if(e){var tchx,tchy;var t=e.touches[0];if(typeof t.clientX!="undefined"){xm=t.clientX-ww/2;ym=t.clientY-hh/2}else{xm=t.pageX-ww/2;ym=t.pageY-hh/2}}}};window[dfe](dfs);var dmutm=0;var ltchx=-1;var ltchy=-1;var ltchmtm=-1;
window.ontouchstart=function(e){dmutm=Date.now()+1500;if(snake!=null){e=e||window.event;if(e){var tchx,tchy;var t=e.touches[0];if(typeof t.clientX!="undefined"){tchx=t.clientX-ww/2;tchy=t.clientY-hh/2}else{tchx=t.pageX-ww/2;tchy=t.pageY-hh/2}var mtm=Date.now();if(Math.abs(tchx-ltchx)<24&&Math.abs(tchy-ltchy)<24)if(mtm-ltchmtm<400)setAcceleration(1);ltchx=tchx;ltchy=tchy;ltchmtm=mtm;xm=tchx;ym=tchy}e.preventDefault()}};
window.onmousedown=function(e){if(dmutm==0||Date.now()>dmutm){dmutm=0;if(snake!=null){window.onmousemove(e);setAcceleration(1);e.preventDefault()}}};window.ontouchend=function(){setAcceleration(0)};function omu(e){setAcceleration(0)}window.addEventListener("mouseup",omu);var adm=false;var mscps=0;var fmlts=[];var fpsls=[];var etm=0;var ws=null;var cstr="c";
window.startLogin=function(ba){lgba=ba;if(want_seq){var a=new Uint8Array(1);a[0]=2;ws.send(a);want_etm_s=true}else if(!want_etm_s){var a=new Uint8Array(1);a[0]=1;ws.send(a)}var a=new Uint8Array(cstr.length);for(var i=0;i<cstr.length;i++)a[i]=cstr.charCodeAt(i);ws.send(a)};var omcps=0;var omfps=0;var lomcpstm=0;var tcsecs=0;var trdps=0;var pkps=0;var rdps=0;var rfps=0;var rnps=0;var rsps=0;var reps=0;var pkpspc=[];var rdpspc=[];var lrd_mtm=Date.now();var locu_mtm=0;
if(testing)for(var i=0;i<256;i++){rdpspc[i]=0;pkpspc[i]=0}var pfs=[];var pft=0;var pf1=0;var pf2=0;var rpf1,rpf2;var pf_nap=0;var pf_ep=0;var rpft=0;var pf;for(var i=0;i<100;i++)pfs.push(0);var pf_add=0;var pf_new_add=0;var pf_remove=0;var tpfa=new Float32Array(4E4);for(var i=0;i<tpfa.length;i++)tpfa[i]=Math.random()*32;var pfd;
if(testing){pfd=document.createElement("div");pfd.style.position="fixed";pfd.style.left="4px";pfd.style.bottom="109px";pfd.style.width="270px";pfd.style.height="544px";pfd.style.background="rgba(0, 0, 0, .8)";pfd.style.color="#80FF80";pfd.style.fontFamily="Verdana";pfd.style.zIndex=999999;pfd.style.fontSize="11px";pfd.style.padding="10px";pfd.style.borderRadius="30px";pfd.textContent="ayy lmao";document.body.appendChild(pfd)}
function resetGame(){if(ws){ws.close();ws=null}snake=null;want_close_socket=false;snakes=[];foods=[];foods_c=0;preys=[];sectors=[];os={};rank=0;best_rank=999999999;snake_count=0;biggest_snake_count=0;connected=false;playing=false;wfpr=false;lagging=false;for(j=vfc-1;j>=0;j--){fvxs[j]=0;fvys[j]=0}fvtg=0;fvx=0;fvy=0;lag_mult=1;cptm=0;mmal=0;mmgad=false;var ctx=asmc.getContext("2d");ctx.clearRect(0,0,mmsz,mmsz);var ctx=asmc2.getContext("2d");ctx.clearRect(0,0,mmsz,mmsz);gsc=sgsc}
var protocol_version=2;var connecting=false;var start_connect_mtm;var play_btn_click_mtm=-1;var waiting_for_sos=false;var sos_ready_after_mtm=-1;
function connect(){if(sos.length==0){if(!waiting_for_sos){waiting_for_sos=true;sos_ready_after_mtm=-1}return}waiting_for_sos=false;sos_ready_after_mtm=-1;resetGame();connecting=true;start_connect_mtm=Date.now();if(!forcing){for(var i=0;i<sos.length;i++)sos[i].ptm=9999999;var bcluo=null;var bcptm=9999999;for(var k=clus.length-1;k>=0;k--){var cluo=clus[k];if(cluo)if(cluo.ptms.length>0){var optm=0;for(var j=cluo.ptms.length-1;j>=0;j--)optm+=cluo.ptms[j];optm=optm/cluo.ptms.length;var ptm=9999999;for(var j=
cluo.ptms.length-1;j>=0;j--)if(cluo.ptms[j]<ptm)ptm=cluo.ptms[j];if(testing)console.log("cluster "+k+"   ping time: "+ptm+"   old ping time: "+optm);if(ptm<bcptm){bcptm=ptm;bcluo=cluo}for(var j=sos.length-1;j>=0;j--)if(sos[j].clu==k)sos[j].ptm=ptm}}if(typeof rmsos!="undefined")for(var i=0;i<rmsos.length;i++){var eip="."+rmsos[i].a[0]+"."+rmsos[i].a[1]+"."+rmsos[i].a[2];var po=rmsos[i].a[3];for(var j=sos.length-1;j>=0;j--)if(sos[j].ip.indexOf(eip)>=0)if(sos[j].po==po)sos.splice(j,1)}var m;var v;var o;
var fbso=null;var cluo=bcluo;if(cluo)for(var j=0;j<50;j++){if(fbso!=null)break;if(cluo.sos.length>0){m=0;for(var k=0;k<cluo.sos.length;k++){o=cluo.sos[k];m+=o.wg/cluo.swg;o.ptv=m}o.ptv=1;v=Math.random();fbso=cluo.sos[0];for(k=0;k<cluo.sos.length;k++){o=cluo.sos[k];if(!o.tainted)if(o.ptv<v)fbso=o}if(fbso.tainted)fbso=null}}if(fbso!=null)bso=fbso;else{sos.sort(function(a,b){return parseFloat(a.po)-parseFloat(b.po)});bso=sos[Math.floor(Math.random()*sos.length)];for(var i=sos.length-1;i>=0;i--)if(!sos[i].tainted)if(sos[i].ptm<=
bso.ptm)if(sos[i].ac>20)bso=sos[i]}}if(testing){var es="";if(fbso!=null)es="(fbso!)";console.log("connecting to "+bso.ip+":"+bso.po+"... "+es)}ws=new WebSocket("ws://"+bso.ip+":"+bso.po+"/slither");ws.binaryType="arraybuffer";window.ws=ws;ws.onmessage=function(e){if(ws!=this)return;var a=new Uint8Array(e.data);pkps++;rdps+=a.length;if(testing){omcps++;var t=Date.now();if(t-lomcpstm>1E3){lomcpstm=t;omcps=0;omfps=0}}if(want_seq){var seq=a[0]<<8|a[1];if(seq-1!=lseq)if(seq!=0)if(testing)console.log("sequence error! "+
seq+" != "+lseq);lseq=seq}else if(want_etm_s){lptm=cptm;cptm=Date.now();var etm_s=a[0]<<8|a[1]}if(testing)if(want_etm_s){pkpspc[a[2]]++;rdpspc[a[2]]+=a.length}else{pkpspc[a[0]]++;rdpspc[a[0]]+=a.length}var cmd;var m;var alen,plen,dlen;if(want_etm_s){cmd=String.fromCharCode(a[2]);m=3;alen=a.length;plen=a.length-2;dlen=a.length-3}else{cmd=String.fromCharCode(a[0]);m=1;alen=a.length;plen=a.length;dlen=a.length-1}if(cmd=="a"){connecting=false;connected=true;playing=true;play_btn_click_mtm=-1;grd=a[m]<<
16|a[m+1]<<8|a[m+2];m+=3;var nmscps=a[m]<<8|a[m+1];m+=2;sector_size=a[m]<<8|a[m+1];ssd256=sector_size/256;m+=2;sector_count_along_edge=a[m]<<8|a[m+1];m+=2;spangdv=a[m]/10;m++;nsp1=(a[m]<<8|a[m+1])/100;m+=2;nsp2=(a[m]<<8|a[m+1])/100;m+=2;nsp3=(a[m]<<8|a[m+1])/100;m+=2;mamu=(a[m]<<8|a[m+1])/1E3;m+=2;mamu2=(a[m]<<8|a[m+1])/1E3;m+=2;cst=(a[m]<<8|a[m+1])/1E3;m+=2;if(m<alen){protocol_version=a[m];m++}setMscps(nmscps);setMinimapBackground(sector_count_along_edge);lbh.style.display="inline";lbs.style.display=
"inline";lbn.style.display="inline";lbp.style.display="inline";lbf.style.display="inline";vcm.style.display="inline";loch.style.display="inline";startShowGame()}else if(cmd=="e"||cmd=="E"||cmd=="3"||cmd=="4"||cmd=="5"||cmd=="d"||cmd=="7"){var o;var id=a[m]<<8|a[m+1];if(protocol_version>=14&&(cmd=="d"||cmd=="7"||dlen<=2&&(cmd=="e"||cmd=="E"||cmd=="3"||cmd=="4"||cmd=="5")))o=snake;else{var id=a[m]<<8|a[m+1];m+=2;o=os["s"+id]}var dir=-1;var ang=-1;var wang=-1;var speed=-1;if(protocol_version>=14)if(plen==
6){if(cmd=="e")dir=1;else dir=2;ang=a[m]*2*Math.PI/256;m++;wang=a[m]*2*Math.PI/256;m++;speed=a[m]/18;m++}else if(plen==5||plen==3)if(cmd=="e"){ang=a[m]*2*Math.PI/256;m++;speed=a[m]/18;m++}else if(cmd=="E"){dir=1;wang=a[m]*2*Math.PI/256;m++;speed=a[m]/18;m++}else if(cmd=="4"){dir=2;wang=a[m]*2*Math.PI/256;m++;speed=a[m]/18;m++}else if(cmd=="3"){dir=1;ang=a[m]*2*Math.PI/256;m++;wang=a[m]*2*Math.PI/256;m++}else{if(cmd=="5"){dir=2;ang=a[m]*2*Math.PI/256;m++;wang=a[m]*2*Math.PI/256;m++}}else{if(plen==
4||plen==2)if(cmd=="e"){ang=a[m]*2*Math.PI/256;m++}else if(cmd=="E"){dir=1;wang=a[m]*2*Math.PI/256;m++}else if(cmd=="4"){dir=2;wang=a[m]*2*Math.PI/256;m++}else if(cmd=="3"){speed=a[m]/18;m++}else if(cmd=="d"){dir=1;ang=a[m]*2*Math.PI/256;m++;wang=a[m]*2*Math.PI/256;m++;speed=a[m]/18;m++}else if(cmd=="7"){dir=2;ang=a[m]*2*Math.PI/256;m++;wang=a[m]*2*Math.PI/256;m++;speed=a[m]/18;m++}}else if(protocol_version>=6)if(plen==6){if(cmd=="e")dir=1;else dir=2;ang=a[m]*2*Math.PI/256;m++;wang=a[m]*2*Math.PI/
256;m++;speed=a[m]/18;m++}else if(plen==5)if(cmd=="e"){ang=a[m]*2*Math.PI/256;m++;speed=a[m]/18;m++}else if(cmd=="E"){dir=1;wang=a[m]*2*Math.PI/256;m++;speed=a[m]/18;m++}else if(cmd=="4"){dir=2;wang=a[m]*2*Math.PI/256;m++;speed=a[m]/18;m++}else if(cmd=="3"){dir=1;ang=a[m]*2*Math.PI/256;m++;wang=a[m]*2*Math.PI/256;m++}else{if(cmd=="5"){dir=2;ang=a[m]*2*Math.PI/256;m++;wang=a[m]*2*Math.PI/256;m++}}else{if(plen==4)if(cmd=="e"){ang=a[m]*2*Math.PI/256;m++}else if(cmd=="E"){dir=1;wang=a[m]*2*Math.PI/256;
m++}else if(cmd=="4"){dir=2;wang=a[m]*2*Math.PI/256;m++}else if(cmd=="3"){speed=a[m]/18;m++}}else if(protocol_version>=3){if(cmd!="3")if(plen==8||plen==7||plen==6&&cmd!="3"||plen==5&&cmd!="3")if(cmd=="e")dir=1;else dir=2;if(plen==8||plen==7||plen==5&&cmd=="3"||plen==6&&cmd=="3"){ang=(a[m]<<8|a[m+1])*2*Math.PI/65535;m+=2}if(plen==8||plen==7||plen==5&&cmd!="3"||plen==6&&cmd!="3"){wang=(a[m]<<8|a[m+1])*2*Math.PI/65535;m+=2}if(plen==8||plen==6||plen==4){speed=a[m]/18;m++}}else{if(dlen==11||dlen==8||dlen==
9||dlen==6){dir=a[m]-48;m++}if(dlen==11||dlen==7||dlen==9||dlen==5){ang=(a[m]<<16|a[m+1]<<8|a[m+2])*2*Math.PI/16777215;m+=3}if(dlen==11||dlen==8||dlen==9||dlen==6){wang=(a[m]<<16|a[m+1]<<8|a[m+2])*2*Math.PI/16777215;m+=3}if(dlen==11||dlen==7||dlen==8||dlen==4){speed=(a[m]<<8|a[m+1])/1E3;m+=2}}if(o){if(dir!=-1)o.dir=dir;if(ang!=-1){var da=(ang-o.ang)%pi2;if(da<0)da+=pi2;if(da>Math.PI)da-=pi2;var k=o.fapos;for(var j=0;j<afc;j++){o.fas[k]-=da*afas[j];k++;if(k>=afc)k=0}o.fatg=afc;o.ang=ang}if(wang!=-1){o.wang=
wang;if(o!=snake)o.eang=wang}if(speed!=-1){o.sp=speed;o.spang=o.sp/spangdv;if(o.spang>1)o.spang=1}}}else if(cmd=="6"){var s="";while(m<alen){s+=String.fromCharCode(a[m]);m++}gotServerVersion(s)}else if(cmd=="h"){var id=a[m]<<8|a[m+1];m+=2;var fam=(a[m]<<16|a[m+1]<<8|a[m+2])/16777215;m+=3;var o=os["s"+id];if(o){o.fam=fam;snl(o)}}else if(cmd=="r"){var id=a[m]<<8|a[m+1];m+=2;var o=os["s"+id];if(o){if(dlen>=4){o.fam=(a[m]<<16|a[m+1]<<8|a[m+2])/16777215;m+=3}for(var j=0;j<o.pts.length;j++)if(!o.pts[j].dying){o.pts[j].dying=
true;o.sct--;o.sc=Math.min(6,1+(o.sct-2)/106);o.scang=.13+.87*Math.pow((7-o.sc)/6,2);o.ssp=nsp1+nsp2*o.sc;o.fsp=o.ssp+.1;o.wsep=6*o.sc;var mwsep=nsep/gsc;if(o.wsep<mwsep)o.wsep=mwsep;break}snl(o)}}else if(cmd=="R"){snake.rsc=a[m];m++}else if(cmd=="B"){if(testing){var id=a[m]<<8|a[m+1];m+=2;o=os["s"+id];xx=a[m]<<8|a[m+1];m+=2;yy=a[m]<<8|a[m+1];m+=2;var sct_c=a[m];m++;if(xx!=o.lpo_xx||yy!=o.lpo_yy){var dx=xx-o.lpo_xx;var dy=yy-o.lpo_yy;if(Math.abs(dx)>1||Math.abs(dy)>1){dx=Math.round(dx*100)/100;dy=
Math.round(dy*100)/100;if(o==snake)console.log("invalid new point delta for self: "+dx+" "+dy+" ("+o.lpo_cmd+", prev "+o.lpo_prev_cmd+") (sct "+o.sct+" "+sct_c+") "+o.lpo_dd);else console.log("invalid new point delta for "+o.nk+": "+dx+" "+dy+" ("+o.lpo_cmd+", prev "+o.lpo_prev_cmd+") (sct "+o.sct+" "+sct_c+") "+o.lpo_dd)}}}}else if(cmd=="g"||cmd=="n"||cmd=="G"||cmd=="N"){if(!playing)return;var adding_only=cmd=="n"||cmd=="N";var o;if(cmd=="g"&&dlen==4||cmd=="G"&&dlen==2||cmd=="n"&&dlen==7||cmd=="N"&&
dlen==5)o=snake;else{var id=a[m]<<8|a[m+1];m+=2;o=os["s"+id]}if(o){if(adding_only)o.sct++;else for(var j=0;j<o.pts.length;j++)if(!o.pts[j].dying){o.pts[j].dying=true;break}var po=o.pts[o.pts.length-1];var lpo=po;var gnp=false;var mpo;var mv;var lmpo;var dx,dy;if(protocol_version>=3)if(cmd=="g"||cmd=="n"){xx=a[m]<<8|a[m+1];m+=2;yy=a[m]<<8|a[m+1];m+=2}else{xx=lpo.xx+a[m]-128;m++;yy=lpo.yy+a[m]-128;m++}else{xx=(a[m]<<16|a[m+1]<<8|a[m+2])/5;m+=3;yy=(a[m]<<16|a[m+1]<<8|a[m+2])/5;m+=3}if(adding_only){o.fam=
(a[m]<<16|a[m+1]<<8|a[m+2])/16777215;m+=3}po=points_dp.get();if(!po){po={};po.exs=[];po.eys=[];po.efs=[];po.ems=[]}po.eiu=0;po.xx=xx;po.yy=yy;po.fx=0;po.fy=0;po.da=0;po.ebx=po.xx-lpo.xx;po.eby=po.yy-lpo.yy;lpo=po;o.pts.push(po);if(testing){o.lpo_xx=xx;o.lpo_yy=yy;o.lpo_prev_cmd=o.lpo_cmd;o.lpo_cmd=cmd;o.lpo_dd=[];for(var i=0;i<a.length;i++)o.lpo_dd.push(("00"+(a[i]+0).toString(16)).substr(-2));o.lpo_dd=o.lpo_dd.join(" ")}gnp=true;if(o.iiv){dx=o.xx+o.fx-po.xx;dy=o.yy+o.fy-po.yy;po.fx+=dx;po.fy+=dy;
po.exs[po.eiu]=dx;po.eys[po.eiu]=dy;po.efs[po.eiu]=0;po.ems[po.eiu]=1;po.eiu++}var k=o.pts.length-3;if(k>=1){lmpo=o.pts[k];n=0;mv=0;for(var j=k-1;j>=0;j--){mpo=o.pts[j];n++;dx=mpo.xx;dy=mpo.yy;if(n<=4)mv=cst*n/4;mpo.xx+=(lmpo.xx-mpo.xx)*mv;mpo.yy+=(lmpo.yy-mpo.yy)*mv;if(o.iiv){dx-=mpo.xx;dy-=mpo.yy;mpo.fx+=dx;mpo.fy+=dy;mpo.exs[mpo.eiu]=dx;mpo.eys[mpo.eiu]=dy;mpo.efs[mpo.eiu]=0;mpo.ems[mpo.eiu]=2;mpo.eiu++}lmpo=mpo}}o.sc=Math.min(6,1+(o.sct-2)/106);o.scang=.13+.87*Math.pow((7-o.sc)/6,2);o.ssp=nsp1+
nsp2*o.sc;o.fsp=o.ssp+.1;o.wsep=6*o.sc;var mwsep=nsep/gsc;if(o.wsep<mwsep)o.wsep=mwsep;if(adding_only)snl(o);o.lnp=po;if(o==snake){ovxx=snake.xx+snake.fx;ovyy=snake.yy+snake.fy}var csp=o.sp*(etm/8)/4;csp*=lag_mult;var ochl=o.chl-1;o.chl=csp/o.msl;var ox=o.xx;var oy=o.yy;o.xx=xx+Math.cos(o.ang)*csp;o.yy=yy+Math.sin(o.ang)*csp;var dx=o.xx-ox;var dy=o.yy-oy;var dchl=o.chl-ochl;var k=o.fpos;for(var j=0;j<rfc;j++){o.fxs[k]-=dx*rfas[j];o.fys[k]-=dy*rfas[j];o.fchls[k]-=dchl*rfas[j];k++;if(k>=rfc)k=0}o.fx=
o.fxs[o.fpos];o.fy=o.fys[o.fpos];o.fchl=o.fchls[o.fpos];o.ftg=rfc;if(gnp)o.ehl=0;if(o==snake){var lvx=view_xx;var lvy=view_yy;view_xx=snake.xx+snake.fx;view_yy=snake.yy+snake.fy;bgx2-=(view_xx-lvx)*1/bgw2;bgy2-=(view_yy-lvy)*1/bgh2;bgx2%=1;if(bgx2<0)bgx2+=1;bgy2%=1;if(bgy2<0)bgy2+=1;var dx=view_xx-ovxx;var dy=view_yy-ovyy;var k=fvpos;for(var j=0;j<vfc;j++){fvxs[k]-=dx*vfas[j];fvys[k]-=dy*vfas[j];k++;if(k>=vfc)k=0}fvtg=vfc}}}else if(cmd=="l"){if(!playing)return;wumsts=true;var s_htm="";var n_htm="";
var p_htm="";var nc=0;var pos=0;if(lb_fr==-1)if(dead_mtm==-1)lb_fr=0;var k,v;var score;var my_pos=a[m];m++;rank=a[m]<<8|a[m+1];if(rank<best_rank)best_rank=rank;m+=2;snake_count=a[m]<<8|a[m+1];if(snake_count>biggest_snake_count)biggest_snake_count=snake_count;m+=2;while(m<alen){var sct=a[m]<<8|a[m+1];m+=2;var fam=(a[m]<<16|a[m+1]<<8|a[m+2])/16777215;m+=3;var cv=a[m]%9;m++;var nl=a[m];m++;pos++;var nk="";for(var j=0;j<nl;j++){v=a[m];nk+=String.fromCharCode(v);m++}if(pos==my_pos){nk=my_nick;nl=nk.length}else if(!gdnm(nk))nk=
"";var nk2="";for(var j=0;j<nl;j++){v=nk.charCodeAt(j);if(v==38)nk2+="&amp;";else if(v==60)nk2+="&lt;";else if(v==62)nk2+="&gt;";else if(v==32)nk2+="&nbsp;";else nk2+=String.fromCharCode(v)}nk=nk2;nc++;score=Math.floor((fpsls[sct]+fam/fmlts[sct]-1)*15-5)/1;if(pos==my_pos)k=1;else k=.7*(.3+.7*(1-nc/10));s_htm+='<span style="opacity:'+k+"; color:"+per_color_imgs[cv].cs+';">'+score+"</span><BR>";n_htm+='<span style="opacity:'+k+"; color:"+per_color_imgs[cv].cs+";"+(pos==my_pos?"font-weight:bold;":"")+
'">'+nk+"</span><BR>";p_htm+='<span style="opacity:'+k+"; color:"+per_color_imgs[cv].cs+';">#'+nc+"</span><BR>"}lbs.innerHTML=s_htm;lbn.innerHTML=n_htm;lbp.innerHTML=p_htm}else if(cmd=="v")if(a[m]==2){want_close_socket=true;want_victory_message=false;want_hide_victory=1;hvfr=0}else{dead_mtm=Date.now();play_btn.setEnabled(true);var sct=snake.sct+snake.rsc;var final_score=Math.floor((fpsls[sct]+snake.fam/fmlts[sct]-1)*15-5)/1;twt.href="http://twitter.com/intent/tweet?status="+encodeURIComponent("I got a length of "+
final_score+" in http://slither.io! Can you beat that? #slitherio");var fstr="Your final length was";if(lang=="de")fstr="Deine endg\u00fcltige L\u00e4nge war";else if(lang=="fr")fstr="Votre longueur finale \u00e9tait de";else if(lang=="pt")fstr="Seu comprimento final foi de";var exc="";if(final_score>1E3)exc="!";var s='<span style="opacity: .45;">'+fstr+" </span><b>"+final_score+"</b>"+exc;lastscore.innerHTML=s;var pstr="Play Again";if(lang=="fr")pstr="Jouer";else if(lang=="pt")pstr="Joga";play_btn.setText(String.fromCharCode(160)+
pstr+String.fromCharCode(160));if(a[m]==1){nick_holder.style.display="none";playh.style.display="none";smh.style.display="none";victory_holder.style.display="inline";saveh.style.display="block";want_victory_message=true;want_victory_focus=true;victory.disabled=false;save_btn.setEnabled(true)}else want_close_socket=true}else if(cmd=="W"){xx=a[m];m++;yy=a[m];m++;var o={};o.xx=xx;o.yy=yy;sectors.push(o)}else if(cmd=="w"){var mode;if(protocol_version>=8){mode=2;xx=a[m];m++;yy=a[m];m++}else{mode=a[m];
m++;xx=a[m]<<8|a[m+1];m+=2;yy=a[m]<<8|a[m+1];m+=2}if(mode==1){var o={};o.xx=xx;o.yy=yy;sectors.push(o)}else{cm1=foods_c-1;for(var i=cm1;i>=0;i--){var fo=foods[i];if(fo.sx==xx)if(fo.sy==yy)if(i==cm1){foods[i]=null;foods_c--;cm1--}else{foods[i]=foods[cm1];foods[cm1]=null;foods_c--;cm1--}}for(var i=sectors.length-1;i>=0;i--){var o=sectors[i];if(o.xx==xx)if(o.yy==yy)sectors.splice(i,1)}}}else if(cmd=="m"){var sct=a[m]<<16|a[m+1]<<8|a[m+2];m+=3;var fam=(a[m]<<16|a[m+1]<<8|a[m+2])/16777215;m+=3;var victory_score=
Math.floor((fpsls[sct]+fam/fmlts[sct]-1)*15-5)/1;var nl=a[m];m++;var victory_nick="";for(var i=0;i<nl;i++){victory_nick+=String.fromCharCode(a[m]);m++}if(!gdnm(victory_nick))victory_nick="";var victory_message="";while(m<alen){victory_message+=String.fromCharCode(a[m]);m++}if(!gdnm(victory_message))victory_message="";victory_nick=victory_nick.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;");victory_message=victory_message.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;");
if(victory_score>0){var h="";if(victory_message.length>0)h+="<span style='font-size:17px;'><b><i><span style='opacity: .5;'>&quot;</span>"+victory_message+"<span style='opacity: .5;'>&quot;</span></i></b></span><BR><div style='height: 5px;'></div>";if(victory_nick.length>0){if(victory_message.length>0)h+="<i><span style='opacity: .5;'>- </span><span style='opacity: .75;'><b>"+victory_nick+"</b></span><span style='opacity: .5;'>, today's longest</span></i>";else h="<i><span style='opacity: .5;'>Today's longest was </span><span style='opacity: .75;'><b>"+
victory_nick+"</b></span></i>";h+="<br><i><span style='opacity: .5;'>with a length of </span><span style='opacity: .65;'><b>"+victory_score+"</b></span></i>"}else if(victory_message.length>0){h+="<i><span style='opacity: .5;'>- </span><span style='opacity: .5;'>today's longest</span></i>";h+="<br><i><span style='opacity: .5;'>with a length of </span><span style='opacity: .65;'><b>"+victory_score+"</b></span></i>"}else h+="<i><span style='opacity: .5;'>Today's longest: </span><span style='opacity: .75;'><b>"+
victory_score+"</b></span></i>";vcm.innerHTML=h}}else if(cmd=="p"){wfpr=false;if(lagging){etm*=lag_mult;lagging=false}}else if(cmd=="U"){mmgad=true;var sz=a[m]<<8|a[m+1];m+=2;if(sz>512)sz=512;if(mmsz!=sz)setMinimapBackground(sz);var ctx=asmc.getContext("2d");ctx.clearRect(0,0,mmsz,mmsz);ctx.drawImage(asmc2,0,0);mmbfr=0;asmc.style.opacity=.475;asmc2.style.opacity=0;var ctx=asmc2.getContext("2d");ctx.clearRect(0,0,mmsz,mmsz);ctx.fillStyle="#FFFFFF";var i;var k=0;var xx=mmsz-1;var yy=mmsz-1;while(m<
alen){if(yy<0)break;k=a[m++];if(k>=128){k-=128;for(i=0;i<k;i++){xx--;if(xx<0){xx=mmsz-1;yy--;if(yy<0)break}}}else for(i=0;i<7;i++){if((k&u_m[i])>0)ctx.fillRect(xx,yy,1,1);xx--;if(xx<0){xx=mmsz-1;yy--;if(yy<0)break}}}}else if(cmd=="M"){mmgad=true;var sz=a[m]<<8|a[m+1];m+=2;if(sz>512)sz=512;if(mmsz!=sz)setMinimapBackground(sz);mmdata.fill(0);var ctx=asmc.getContext("2d");ctx.clearRect(0,0,mmsz,mmsz);ctx.drawImage(asmc2,0,0);mmbfr=0;asmc.style.opacity=.475;asmc2.style.opacity=0;var ctx=asmc2.getContext("2d");
ctx.clearRect(0,0,mmsz,mmsz);ctx.fillStyle="#FFFFFF";var i;var k=0;var xx=mmsz-1;var yy=mmsz-1;while(m<alen){if(yy<0)break;k=a[m++];if(k>=128){if(k==255)k=126*a[m++];else k-=128;for(i=0;i<k;i++){xx--;if(xx<0){xx=mmsz-1;yy--;if(yy<0)break}}}else for(i=0;i<7;i++){if((k&u_m[i])>0){mmdata[yy*mmsz+xx]=1;ctx.fillRect(xx,yy,1,1)}xx--;if(xx<0){xx=mmsz-1;yy--;if(yy<0)break}}}}else if(cmd=="V"){mmgad=true;var ctx=asmc.getContext("2d");ctx.clearRect(0,0,mmsz,mmsz);ctx.drawImage(asmc2,0,0);mmbfr=0;asmc.style.opacity=
.475;asmc2.style.opacity=0;var ctx=asmc2.getContext("2d");ctx.fillStyle="#FFFFFF";var i;var j;var k=0;var xx=mmsz-1;var yy=mmsz-1;while(m<alen){if(yy<0)break;k=a[m++];if(k>=128){if(k==255)k=126*a[m++];else k-=128;for(i=0;i<k;i++){xx--;if(xx<0){xx=mmsz-1;yy--;if(yy<0)break}}}else for(i=0;i<7;i++){if((k&u_m[i])>0){j=yy*mmsz+xx;if(mmdata[j]==1){mmdata[j]=0;ctx.clearRect(xx,yy,1,1)}else{mmdata[j]=1;ctx.fillRect(xx,yy,1,1)}}xx--;if(xx<0){xx=mmsz-1;yy--;if(yy<0)break}}}}else if(cmd=="u"){mmgad=true;if(mmsz!=
80)setMinimapBackground(80);var ctx=asmc.getContext("2d");ctx.clearRect(0,0,80,80);ctx.fillStyle="#FFFFFF";var i;var k=0;var xx=0;var yy=0;while(m<alen){if(yy>=80)break;k=a[m++];if(k>=128){k-=128;for(i=0;i<k;i++){xx++;if(xx>=80){xx=0;yy++;if(yy>=80)break}}}else for(i=0;i<7;i++){if((k&u_m[i])>0)ctx.fillRect(xx,yy,1,1);xx++;if(xx>=80){xx=0;yy++;if(yy>=80)break}}}}else if(cmd=="i"){adm=true;var id=a[m]<<8|a[m+1];m+=2;var o=os["s"+id];if(o){var v1=a[m];m++;var v2=a[m];m++;var v3=a[m];m++;var v4=a[m];
m++;if(v1>0||v2>0||v3>0||v4>0){var ipstr=v1+"."+v2+"."+v3+"."+v4;o.nk+=" - "+ipstr;console.log(o.nk)}}}else if(cmd=="o"){if(checking_code)if(connecting){connecting=false;connected=true}else{if(a[m]==0){etcshk=true;etcshkv=0}else{var cocds=[];try{var cocdstr=localStorage.cocds;if(cocdstr)cocds=(""+cocdstr).split(",")}catch(e){}var s="";s+=""+etcods[0].v;s+=""+etcods[1].v;s+=""+etcods[2].v;s+=""+etcods[3].v;s+="-";s+=""+etcods[5].v;s+=""+etcods[6].v;s+=""+etcods[7].v;s+=""+etcods[8].v;s+="-";s+=""+
etcods[10].v;s+=""+etcods[11].v;s+=""+etcods[12].v;s+=""+etcods[13].v;var good=true;for(var i=cocds.length-1;i>=0;i--)if(cocds[i]==s){good=false;break}if(good){cocds.push(s);try{localStorage.cocds=cocds.join(",")}catch(e){}recalculateActivatedCosmetics()}ending_enter_code=true;want_open_cosmetics=true}stchco()}}else if(cmd=="s"){if(!playing)return;var id=a[m]<<8|a[m+1];m+=2;if(dlen>6){var ang=(a[m]<<16|a[m+1]<<8|a[m+2])*2*Math.PI/16777215;m+=3;var dir=a[m]-48;m++;var wang=(a[m]<<16|a[m+1]<<8|a[m+
2])*2*Math.PI/16777215;m+=3;var speed=(a[m]<<8|a[m+1])/1E3;m+=2;var fam=(a[m]<<16|a[m+1]<<8|a[m+2])/16777215;m+=3;var cv=a[m];m++;var pts=[];var snx=(a[m]<<16|a[m+1]<<8|a[m+2])/5;m+=3;var sny=(a[m]<<16|a[m+1]<<8|a[m+2])/5;m+=3;var nl=a[m];m++;var nk="";for(var j=0;j<nl;j++){nk+=String.fromCharCode(a[m]);m++}var custom_skin=null;if(protocol_version>=11){var skl=a[m];m++;if(skl>0){custom_skin=new Uint8Array(skl);for(var j=0;j<skl;j++)custom_skin[j]=a[m+j]}m+=skl}var cosmetic=255;if(protocol_version>=
12){cosmetic=a[m];m++}xx=0;yy=0;var lx=0;var ly=0;var fp=false;while(m<alen){lx=xx;ly=yy;if(!fp){xx=(a[m]<<16|a[m+1]<<8|a[m+2])/5;m+=3;yy=(a[m]<<16|a[m+1]<<8|a[m+2])/5;m+=3;lx=xx;ly=yy;fp=true}else{xx+=(a[m]-127)/2;m++;yy+=(a[m]-127)/2;m++}var po=points_dp.get();if(!po){po={};po.exs=[];po.eys=[];po.efs=[];po.ems=[]}po.eiu=0;po.xx=xx;po.yy=yy;po.fx=0;po.fy=0;po.da=0;po.ebx=xx-lx;po.eby=yy-ly;pts.push(po)}var o=newSnake(id,snx,sny,cv,ang,pts,custom_skin);if(snake==null){view_xx=xx;view_yy=yy;snake=
o;try{var v=localStorage.cosmetic;if(v==""+Number(v))snake.accessory=Number(v)}catch(e){}snake.md=false;snake.wmd=false;o.nk=my_nick;lfsx=-1;lfsy=-1;lfcv=0;lfvsx=-1;lfvsy=-1;lfesid=-1}else{o.nk=nk;if(!gdnm(nk))o.nk=""}o.eang=o.wang=wang;o.sp=speed;o.spang=o.sp/spangdv;if(o.spang>1)o.spang=1;o.fam=fam;o.sc=Math.min(6,1+(o.sct-2)/106);o.scang=.13+.87*Math.pow((7-o.sc)/6,2);o.ssp=nsp1+nsp2*o.sc;o.fsp=o.ssp+.1;o.wsep=6*o.sc;var mwsep=nsep/gsc;if(o.wsep<mwsep)o.wsep=mwsep;o.sep=o.wsep;snl(o)}else{var is_kill=
a[m]==1;m++;for(var i=snakes.length-1;i>=0;i--)if(snakes[i].id==id){snakes[i].id=-1234;if(is_kill){snakes[i].dead=true;snakes[i].dead_amt=0;snakes[i].edir=0}else snakes.splice(i,1);delete os["s"+id];break}}}else if(cmd=="F")if(protocol_version>=14){var sx=a[m];m++;var sy=a[m];m++;var axx=sx*sector_size;var ayy=sy*sector_size;var xx,yy;var rx,ry;var cv,rad,id,fo;while(m<alen){cv=a[m];m++;rx=a[m];m++;ry=a[m];m++;xx=axx+rx*ssd256;yy=ayy+ry*ssd256;rad=a[m]/5;m++;id=sx<<24|sy<<16|rx<<8|ry;fo=newFood(id,
xx,yy,rad,true,cv);fo.sx=sx;fo.sy=sy}}else if(protocol_version>=4){var gsi=false;var sx,sy;while(m<alen){var cv=a[m];m++;xx=a[m]<<8|a[m+1];m+=2;yy=a[m]<<8|a[m+1];m+=2;var rad=a[m]/5;m++;var id=yy*grd*3+xx;var fo=newFood(id,xx,yy,rad,true,cv);if(!gsi){gsi=true;sx=Math.floor(xx/sector_size);sy=Math.floor(yy/sector_size)}fo.sx=sx;fo.sy=sy}}else{var sx=a[m]<<8|a[m+1];m+=2;var sy=a[m]<<8|a[m+1];m+=2;while(m<alen){var id=a[m]<<16|a[m+1]<<8|a[m+2];m+=3;var cv=a[m];m++;xx=sector_size*(sx+a[m]/255);m++;yy=
sector_size*(sy+a[m]/255);m++;var rad=a[m]/5;m++;var fo=newFood(id,xx,yy,rad,true,cv);fo.sx=sx;fo.sy=sy}}else if(cmd=="b"||cmd=="f"){var id;if(protocol_version>=14){var sx,sy;if(dlen>=5){sx=a[m];m++;sy=a[m];m++;lfsx=sx;lfsy=sy}else{sx=lfsx;sy=lfsy}var rx=a[m];m++;var ry=a[m];m++;var xx=sx*sector_size+rx*ssd256;var yy=sy*sector_size+ry*ssd256;id=sx<<24|sy<<16|rx<<8|ry;var cv;if(dlen==4||dlen==6){cv=a[m];m++;lfcv=cv}else cv=lfcv;var rad=a[m]/5;m++;var fo=newFood(id,xx,yy,rad,cmd=="b",cv);fo.sx=sx;fo.sy=
sy}else if(protocol_version>=4){var cv=a[m];m++;if(dlen>4){xx=a[m]<<8|a[m+1];m+=2;yy=a[m]<<8|a[m+1];m+=2;id=yy*grd*3+xx;var rad=a[m]/5;m++;var fo=newFood(id,xx,yy,rad,cmd=="b",cv);fo.sx=Math.floor(xx/sector_size);fo.sy=Math.floor(yy/sector_size)}}else{id=a[m]<<16|a[m+1]<<8|a[m+2];m+=3;if(dlen>4){var cv=a[m];m++;var sx=a[m]<<8|a[m+1];m+=2;var sy=a[m]<<8|a[m+1];m+=2;xx=sector_size*(sx+a[m]/255);m++;yy=sector_size*(sy+a[m]/255);m++;var rad=a[m]/5;m++;var fo=newFood(id,xx,yy,rad,cmd=="b",cv);fo.sx=sx;
fo.sy=sy}}}else if(cmd=="c"||cmd=="C"||cmd=="<"){var id;var ebid=-1;var sx,sy,rx,ry;if(protocol_version>=14){if(cmd=="c"&&dlen==2||cmd=="<"&&dlen==4||cmd=="C"&&dlen==2){sx=lfvsx;sy=lfvsy}else{sx=a[m];m++;sy=a[m];m++;lfvsx=sx;lfvsy=sy}rx=a[m];m++;ry=a[m];m++;id=sx<<24|sy<<16|rx<<8|ry;if(cmd=="<"){ebid=a[m]<<8|a[m+1];m+=2;lfesid=ebid}else if(cmd=="C")ebid=lfesid}else if(protocol_version>=4){var xx=a[m]<<8|a[m+1];m+=2;var yy=a[m]<<8|a[m+1];m+=2;id=yy*grd*3+xx;ebid=a[m]<<8|a[m+1];m+=2}else{id=a[m]<<16|
a[m+1]<<8|a[m+2];m+=3;ebid=a[m]<<8|a[m+1];m+=2}cm1=foods_c-1;for(var i=cm1;i>=0;i--){var fo=foods[i];if(fo.id==id){fo.eaten=true;if(ebid>=0){fo.eaten_by=os["s"+ebid];fo.eaten_fr=0}else if(i==cm1){foods[i]=null;foods_c--;cm1--}else{foods[i]=foods[cm1];foods[cm1]=null;foods_c--;cm1--}id=-1;break}}}else if(cmd=="j"){var id=a[m]<<8|a[m+1];m+=2;xx=1+(a[m]<<8|a[m+1])*3;m+=2;yy=1+(a[m]<<8|a[m+1])*3;m+=2;var pr=null;for(i=preys.length-1;i>=0;i--)if(preys[i].id==id){pr=preys[i];break}if(pr){var csp=pr.sp*
(etm/8)/4;csp*=lag_mult;var ox=pr.xx;var oy=pr.yy;if(dlen==15){pr.dir=a[m]-48;m++;pr.ang=(a[m]<<16|a[m+1]<<8|a[m+2])*2*Math.PI/16777215;m+=3;pr.wang=(a[m]<<16|a[m+1]<<8|a[m+2])*2*Math.PI/16777215;m+=3;pr.sp=(a[m]<<8|a[m+1])/1E3;m+=2}else if(dlen==11){pr.ang=(a[m]<<16|a[m+1]<<8|a[m+2])*2*Math.PI/16777215;m+=3;pr.sp=(a[m]<<8|a[m+1])/1E3;m+=2}else if(dlen==12){pr.dir=a[m]-48;m++;pr.wang=(a[m]<<16|a[m+1]<<8|a[m+2])*2*Math.PI/16777215;m+=3;pr.sp=(a[m]<<8|a[m+1])/1E3;m+=2}else if(dlen==13){pr.dir=a[m]-
48;m++;pr.ang=(a[m]<<16|a[m+1]<<8|a[m+2])*2*Math.PI/16777215;m+=3;pr.wang=(a[m]<<16|a[m+1]<<8|a[m+2])*2*Math.PI/16777215;m+=3}else if(dlen==9){pr.ang=(a[m]<<16|a[m+1]<<8|a[m+2])*2*Math.PI/16777215;m+=3}else if(dlen==10){pr.dir=a[m]-48;m++;pr.wang=(a[m]<<16|a[m+1]<<8|a[m+2])*2*Math.PI/16777215;m+=3}else if(dlen==8){pr.sp=(a[m]<<8|a[m+1])/1E3;m+=2}pr.xx=xx+Math.cos(pr.ang)*csp;pr.yy=yy+Math.sin(pr.ang)*csp;var dx=pr.xx-ox;var dy=pr.yy-oy;var k=pr.fpos;for(var j=0;j<rfc;j++){pr.fxs[k]-=dx*rfas[j];pr.fys[k]-=
dy*rfas[j];k++;if(k>=rfc)k=0}pr.fx=pr.fxs[pr.fpos];pr.fy=pr.fys[pr.fpos];pr.ftg=rfc}}else if(cmd=="y"){var id=a[m]<<8|a[m+1];m+=2;if(dlen==2)for(var i=preys.length-1;i>=0;i--){var pr=preys[i];if(pr.id==id){preys.splice(i,1);break}}else if(dlen==4){var snake_id=a[m]<<8|a[m+1];m+=2;for(var i=preys.length-1;i>=0;i--){var pr=preys[i];if(pr.id==id){pr.eaten=true;pr.eaten_by=os["s"+snake_id];if(pr.eaten_by)pr.eaten_fr=0;else preys.splice(i,1);break}}}else{var cv=a[m];m++;xx=(a[m]<<16|a[m+1]<<8|a[m+2])/
5;m+=3;yy=(a[m]<<16|a[m+1]<<8|a[m+2])/5;m+=3;var rad=a[m]/5;m++;var dir=a[m]-48;m++;var wang=(a[m]<<16|a[m+1]<<8|a[m+2])*2*Math.PI/16777215;m+=3;var ang=(a[m]<<16|a[m+1]<<8|a[m+2])*2*Math.PI/16777215;m+=3;var speed=(a[m]<<8|a[m+1])/1E3;m+=2;newPrey(id,xx,yy,rad,cv,dir,wang,ang,speed)}}};ws.onerror=function(a){};ws.onclose=function(a){if(ws==this){connected=false;playing=false}};var fiss=[];ws.onopen=function(a){if(ws!=this)return;var s=asciize(nick.value);if(s.length>24)s=s.substr(0,24);if(s.toLowerCase()==
"gameweek2016"){s="";try{localStorage.gw2k16="1";gw2k16=true}catch(e){}}my_nick=s;if(!gdnm(s))s="";var cv=Math.floor(Math.random()*9);try{var mcv=localStorage.snakercv;if(mcv==""+Number(mcv))cv=Number(mcv)}catch(e){}var client_version=333;var ca=[];var wca=false;var taa="";try{wca=localStorage.want_custom_skin=="1";taa=localStorage.custom_skin}catch(e){}if(wca)if(taa)if(taa.length>0){taa=(""+taa).split(",");ca=new Uint8Array(taa.length);for(var i=0;i<taa.length;i++)ca[i]=Number(taa[i])}var ba;if(checking_code){if(etcods.length==
14){ba=new Uint8Array(7);ba[0]=111;var v1=etcods[0].v*1E3+etcods[1].v*100+etcods[2].v*10+etcods[3].v;var v2=etcods[5].v*1E3+etcods[6].v*100+etcods[7].v*10+etcods[8].v;var v3=etcods[10].v*1E3+etcods[11].v*100+etcods[12].v*10+etcods[13].v;ba[1]=v1>>8&255;ba[2]=v1&255;ba[3]=v2>>8&255;ba[4]=v2&255;ba[5]=v3>>8&255;ba[6]=v3&255}}else{ba=new Uint8Array(8+s.length+ca.length);ba[0]=115;ba[1]=31;ba[2]=client_version>>8&255;ba[3]=client_version&255;ba[4]=cv;ba[5]=s.length;var m=6;for(var i=0;i<s.length;i++){ba[m]=
s.charCodeAt(i);m++}ba[m]=0;m++;ba[m]=255;m++;for(var i=0;i<ca.length;i++){ba[m]=ca[i];m++}}startLogin(ba);high_quality=true;gla=1;wdfg=0;qsm=1;if(want_quality==0){high_quality=false;gla=0;qsm=1.7}if(render_mode==1){high_quality=false;gla=0}lpstm=Date.now()}}
function asciize(s){var i,l,v;l=s.length;var need_fix=false;for(i=0;i<l;i++){v=s.charCodeAt(i);if(v<32||v>127){need_fix=true;break}}if(need_fix){var fs="";for(i=0;i<l;i++){v=s.charCodeAt(i);if(v<32||v>127)fs+=" ";else fs+=String.fromCharCode(v)}return fs}return s}var smh=document.getElementById("smh");var cstx=document.getElementById("cstx");cstx.style.display="none";var fb=document.getElementById("fb");fb.href="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent("http://slither.io");
fb.onclick=function(){try{localStorage.edttsg="1"}catch(e){}};var fbh=document.getElementById("fbh");var twt=document.getElementById("twt");twt.onclick=function(){try{localStorage.edttsg="1"}catch(e){}};twt.href="http://twitter.com/intent/tweet?status="+encodeURIComponent("Come and play http://slither.io #slitherio");var twth=document.getElementById("twth");var csk=document.getElementById("csk");var cskh=document.getElementById("cskh");var bsk=document.getElementById("bsk");var bskh=document.getElementById("bskh");
var scos=document.getElementById("scos");var scosh=document.getElementById("scosh");var etco=document.getElementById("etco");var etcoh=document.getElementById("etcoh");var want_quality=1;var grq=document.getElementById("grq");var grqh=document.getElementById("grqh");var phqi=document.createElement("img");var grqi=document.getElementById("grqi");
try{if(localStorage.qual=="0"){grqi.src="http://slither.io/s/lowquality.png";want_quality=0}else{phqi.src="http://slither.io/s/lowquality.png";want_quality=1}}catch(e){}grq.onclick=function(){try{if(localStorage.qual=="0"){localStorage.qual="1";grqi.src="http://slither.io/s/highquality.png";want_quality=1}else{localStorage.qual="0";grqi.src="http://slither.io/s/lowquality.png";want_quality=0}}catch(e){}return false};var plq=document.getElementById("plq");var clq=document.getElementById("clq");
cskh.style.display="inline";var psk=document.getElementById("psk");var pskh=document.getElementById("pskh");var nsk=document.getElementById("nsk");var nskh=document.getElementById("nskh");var etcod=document.getElementById("etcod");var etcot=document.createElement("div");etcod.appendChild(etcot);var t=etcot;t.style.position="absolute";t.style.width="800px";t.style.height="32px";t.style.textAlign="center";t.style.color="#FFFFFF";t.style.fontWeight="bold";t.style.textAlign="center";
t.style.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif';t.style.fontSize="18px";t.textContent="if you have a code, enter it here!";t.className="nsi";var etcobs=[];
for(var i=0;i<=10;i++){var a=document.createElement("a");a.draggable=false;a.href="#";a.className="btn btnt";var ii=document.createElement("img");ii.width=135;ii.height=135;ii.className="nsi";ii.style.position="absolute";ii.draggable=false;ii.style.opacity=0;etcod.appendChild(a);a.appendChild(ii);a.onclick=function(){var o;for(var i=etcobs.length-1;i>=0;i--)if(etcobs[i].a==this){o=etcobs[i];if(o.v==10)deleteLastCodeDigit();else enterCodeDigit(o.v);break}return false};ii.onload=function(){var o;for(var i=
etcobs.length-1;i>=0;i--)if(etcobs[i].ii==this){o=etcobs[i];o.loaded=true;break}};var o={};o.ii=ii;o.a=a;o.alpha=0;o.v=i;etcobs.push(o)}var pstr="Cancel";if(lang=="de")pstr="Stornieren";else if(lang=="fr")pstr="Annuler";else if(lang=="pt")pstr="Cancelar";else if(lang=="es")pstr="Cancelar";var o=makeTextBtn(String.fromCharCode(160)+pstr+String.fromCharCode(160),47,20,34,1);var cancel_code_btn=o;var etcocdiv=o.elem;etcocdiv.style.zIndex=53;etcocdiv.style.position="fixed";
etcocdiv.onclick=function(){if(entering_code)if(!checking_code){stchco();ending_enter_code=true}};etcod.appendChild(etcocdiv);var etco_sp_ii=document.createElement("img");etco_sp_ii.width=100;etco_sp_ii.height=100;etco_sp_ii.className="nsi";etco_sp_ii.style.position="absolute";etco_sp_ii.draggable=false;etco_sp_ii.style.opacity=0;etcod.appendChild(etco_sp_ii);var etcdis=[];var etc_ww=47*15;var etc_hh=67;var etcc=document.createElement("canvas");etcc.style.position="absolute";etcc.width=etc_ww;
etcc.height=etc_hh;etcod.appendChild(etcc);var etcbx=0;var etcdx=etc_ww/2-54/2;var etcods=[];var ever_showed_entercode=false;var entering_code=false;var checking_code=false;var ending_enter_code=false;var want_open_cosmetics=false;var etca=0;var etcba=0;var etcbaa=1;var etcsv=0;var etcsrv=0;var etcsa=0;var etcshk=false;var etcshkv=0;var hacos=false;var bonkz=false;var actco=[];
function stchco(){checking_code=false;for(var i=etcobs.length-1;i>=0;i--)etcobs[i].a.className="btn btnt";cancel_code_btn.setEnabled(true);resetGame()}
function recalculateActivatedCosmetics(){actco=[];var coco=32;for(var i=0;i<coco;i++)actco.push(0);var cocds=[];try{var cocdstr=localStorage.cocds;if(cocdstr)cocds=(""+cocdstr).split(",")}catch(e){}for(var i=0;i<cocds.length;i++){s=cocds[i];if(s.length==14){var v1=Number(s.substr(0,4));var v2=Number(s.substr(5,4));var v3=Number(s.substr(10,4));var wants=[];wants.push(v1*7%coco);wants.push(v2*7%coco);wants.push(v3*7%coco);for(var j=wants.length-1;j>=0;j--){var k=wants[j];for(var n=0;n<64;n++){if(actco[k]==
0){actco[k]=1;if(!hacos){hacos=true;etcoh.style.display="inline";reposGraphicsQuality()}break}k++;if(k>=coco)k=0}}}}}function enterCodeDigit(v){if(entering_code)if(!checking_code)if(etcods.length<14){var o={};o.v=v;etcods.push(o);if(etcods.length==4||etcods.length==9){var o={};o.v=10;etcods.push(o)}if(etcods.length==14){want_play=true;checking_code=true;for(var i=etcobs.length-1;i>=0;i--)etcobs[i].a.className="btn_disabled btnt";cancel_code_btn.setEnabled(false)}}}
function deleteLastCodeDigit(){if(entering_code)if(!checking_code)if(etcods.length>0){if(etcods[etcods.length-1].v==10)etcods.splice(etcods.length-1,1);if(etcods.length>0)etcods.splice(etcods.length-1,1)}}var choosing_skin=false;var building_skin=false;var ending_build_skin=false;var bdska=0;var bskoy=0;var skoboym=0;var build_segments=[];var bskbtns=[];var selecting_cosmetic=false;var ending_select_cosmetic=false;var secosa=0;var secosoy=0;var secosoym=0;var cosbtns=[];
psk.onclick=function(){if(building_skin||selecting_cosmetic)return false;if(playing)if(snake!=null){var cv=snake.rcv;cv--;if(cv<0)cv=max_skin_cv;if(!gw2k16)if(cv==42)cv--;setSkin(snake,cv,null);try{localStorage.want_custom_skin="0"}catch(e){}}return false};nsk.onclick=function(){if(building_skin||selecting_cosmetic)return false;if(playing)if(snake!=null){var cv=snake.rcv;cv++;if(!gw2k16)if(cv==42)cv++;if(cv>max_skin_cv)cv=0;setSkin(snake,cv,null);try{localStorage.want_custom_skin="0"}catch(e){}}return false};
function reposSkinStuff(){skodiv.style.left=Math.round(ww/2-skodiv.offsetWidth/2)+"px";if(building_skin)skodiv.style.top=Math.round(hh/2+120+94*skoboym)+"px";else if(selecting_cosmetic)skodiv.style.top=Math.round(hh/2+120+94*secosoym)+"px";else skodiv.style.top=Math.round(hh/2+120)+"px";revdiv.style.left=Math.round(ww/2-revdiv.offsetWidth/2-skodiv.offsetWidth-62)+"px";revdiv.style.top=Math.round(hh/2+120+94*skoboym)+"px"}
csk.onclick=function(){if(!playing)if(dead_mtm==-1){resetGame();choosing_skin=true;pskh.style.opacity=0;nskh.style.opacity=0;bskh.style.opacity=0;scosh.style.opacity=0;skodiv.style.opacity=0;revdiv.style.opacity=0;pskh.style.display="inline";nskh.style.display="inline";bskh.style.display="inline";if(hacos)scosh.style.display="inline";skodiv.style.display="inline";revdiv.style.display="none";reposSkinStuff();nick.disabled=true;if(mscps==0)setMscps(300);var pts=[];for(var i=27;i>=1;i--){var xx=grd/
2-i*10;var yy=grd/2;var po={xx:xx,yy:yy,fx:0,fy:0,exs:[],eys:[],efs:[],ems:[],eiu:0,da:0};po.ebx=10;po.eby=0;pts.push(po)}var cv=0;try{var mcv=localStorage.snakercv;if(mcv==""+Number(mcv))cv=Number(mcv)}catch(e){}var aa=null;var wca=false;var taa="";try{wca=localStorage.want_custom_skin=="1";taa=localStorage.custom_skin}catch(e){}if(wca)if(taa)if(taa.length>0){taa=(""+taa).split(",");aa=new Uint8Array(taa.length);for(var i=0;i<taa.length;i++)aa[i]=Number(taa[i])}var o=newSnake(1,grd/2,grd/2,cv,0,
pts,aa);view_xx=grd/2-(22/2-.5)*10;view_yy=grd/2;snake=o;try{var v=localStorage.cosmetic;if(v==""+Number(v))snake.accessory=Number(v)}catch(e){}o.nk="";o.eang=o.wang=o.ang;o.sp=4.8;o.spang=o.sp/spangdv;if(o.spang>1)o.spang=1;o.sc=1;o.scang=1;o.ssp=nsp1+nsp2*o.sc;o.fsp=o.ssp+.1;o.wsep=6*o.sc;var mwsep=nsep/gsc;if(o.wsep<mwsep)o.wsep=mwsep;o.sep=o.wsep;snl(o);o.alive_amt=1;o.rex=1.66;ws={};ws.send=function(a){};ws.close=function(){};connected=true;playing=true;high_quality=true;gla=1;wdfg=0;qsm=1;startShowGame();
lbh.style.display="none";lbs.style.display="none";lbn.style.display="none";lbp.style.display="none";lbf.style.display="none";vcm.style.display="none";loch.style.display="none"}return false};
etco.onclick=function(){if(!etco_sp_ii){etco_sp_ii=document.createElement("img");etco_sp_ii.width=100;etco_sp_ii.height=100}if(!playing)if(dead_mtm==-1){resetGame();entering_code=true;ending_enter_code=false;if(!ever_showed_entercode){ever_showed_entercode=true;for(var i=etcobs.length-1;i>=0;i--)if(i==10)etcobs[i].ii.src="http://slither.io/s/codedel.png";else etcobs[i].ii.src="http://slither.io/s/code"+i+".png";etco_sp_ii.src="http://slither.io/s/spinner.png";for(var i=0;i<=11;i++){var ii=document.createElement("img");
ii.width=54;ii.height=67;var j=i;if(i==10)j="h";else if(i==11)j="b";ii.onload=function(){for(var i=etcdis.length-1;i>=0;i--){var o=etcdis[i];if(o.ii==this)o.loaded=true}};var o={};o.ii=ii;o.loaded=false;etcdis.push(o);ii.src="http://slither.io/s/cd"+j+".png"}}etcod.style.display="inline";reposEnterCode();nick.disabled=true}return false};
bsk.onclick=function(){if(playing)if(choosing_skin)if(!building_skin&&!selecting_cosmetic){var i,j,k;var o;var fj=0;var tj=0;build_segments=[];alcsc=falcsc;var taa="";try{localStorage.want_custom_skin="1";taa=localStorage.custom_skin}catch(e){}if(taa)if(taa.length>0){taa=(""+taa).split(",");var ct=0;var cc=-1;var on_ct=true;for(var i=8;i<taa.length;i++){if(on_ct)ct=Number(taa[i]);else{cc=Number(taa[i]);for(var j=0;j<ct;j++)build_segments.push(cc)}on_ct=!on_ct}}setSkin(snake,0,getBuildSkinData(true));
building_skin=true;ending_build_skin=false;var rc=4;var sks2=[];var rls=[];for(i=0;i<rc;i++){k=0;tj=Math.floor(csks.length*(i+1)/rc);for(j=fj;j<tj;j++)k++;rls.push(k);fj=tj}rls[0]--;rls[1]--;rls[2]++;rls[3]++;var tsks=[];fj=0;for(i=0;i<rc;i++){tsks=[];sks2.push(tsks);for(j=0;j<rls[i];j++){tsks.push(csks[fj]);fj++}}for(k=0;k<sks2.length;k++){tsks=sks2[k];for(i=0;i<tsks.length;i++){j=tsks[i];if(j>=0&&j<rrs.length){o={};var pci=per_color_imgs[j];var kmc=pci.kmcs[0];var ii=document.createElement("canvas");
o.ii=ii;ii.width=kmc.width;ii.height=kmc.height;var ctx=ii.getContext("2d");ctx.rotate(Math.PI);ctx.drawImage(kmc,-kmc.width,-kmc.height);ii.style.opacity=0;ii.style.position="absolute";ii.style.left="0px";ii.style.top="0px";ii.draggable=false;o.xx=Math.floor(tsks.length*55*(i-(tsks.length-1)/2)/tsks.length);o.yy=Math.floor(-32-k*62);var a=document.createElement("a");a.draggable=false;a.href="#";a.className="btn btnt";a.style.zIndex=53;a.style.position="fixed";a.appendChild(ii);o.a=a;document.body.appendChild(a);
o.cv=j;a.onclick=function(){if(!choosing_skin)return false;if(!building_skin)return false;if(build_segments.length>=47)return false;for(var i=bskbtns.length-1;i>=0;i--)if(bskbtns[i].a==this){build_segments.push(bskbtns[i].cv);break}setSkin(snake,0,getBuildSkinData(true));return false};bskbtns.push(o)}}}reposBskbtns();revdiv.style.opacity=0;revdiv.style.display="inline"}return false};
scos.onclick=function(){if(playing)if(choosing_skin)if(!building_skin&&!selecting_cosmetic){selecting_cosmetic=true;ending_select_cosmetic=false;var o;var k=0;var tw=1;for(var i=0;i<32;i++)if(actco.length>i&&actco[i]==1)tw++;if(tw>8)tw=8;for(var i=0;i<=32;i++)if(i==32||actco.length>i&&actco[i]==1){o={};if(i==32)o.v=-1;else o.v=i;var ii=document.createElement("img");ii.onload=function(){var o;for(var i=cosbtns.length-1;i>=0;i--){o=cosbtns[i];if(o.ii==this){if(o.v==-1){o.ww=this.width*.5;o.hh=this.height*
.5;this.width=o.ww;this.height=o.hh;o.xx-=o.ww/2;o.yy-=o.hh/2;reposCosbtns()}else{o.ww=this.width*.35;o.hh=this.height*.35;this.width=o.ww;this.height=o.hh;o.xx-=o.ww/2;o.yy-=o.hh/2;reposCosbtns()}break}}};if(i==32)ii.src="http://slither.io/s/a_none.png";else ii.src=a_imgs[i].u;ii.style.opacity=0;ii.style.position="absolute";ii.style.left="0px";ii.style.top="0px";ii.draggable=false;o.ii=ii;trf(ii,"rotate(90deg)");o.xx=102*(k%8-(tw/2-.5));o.yy=-22-80*Math.floor(k/8);k++;var a=document.createElement("a");
a.draggable=false;a.href="#";a.className="btn btnt";a.style.zIndex=53;a.style.position="fixed";a.appendChild(ii);o.a=a;document.body.appendChild(a);a.onclick=function(){if(!choosing_skin)return false;if(!selecting_cosmetic)return false;for(var i=cosbtns.length-1;i>=0;i--)if(cosbtns[i].a==this){snake.accessory=cosbtns[i].v;break}return false};cosbtns.push(o)}reposCosbtns()}return false};
nick.oninput=function(){var s=this.value;var fs=asciize(s);if(fs.length>24)fs=fs.substr(0,24);if(s!=fs)this.value=fs;if(s.toLowerCase()=="bonkers"){bonkz=true;etcoh.style.display="inline";reposGraphicsQuality()}};victory.oninput=function(){var s=this.value;var fs=asciize(s);if(fs.length>140)fs=fs.substr(0,140);if(s!=fs)this.value=fs};nick.focus();var s="";for(var i=0;i<zzs.length;i++)s+=String.fromCharCode(zzs[i]+32);piar(s);var lmch=document.createElement("div");lmch.style.width="450px";
lmch.style.height="115px";var lmc2=document.createElement("canvas");var lmc=document.createElement("canvas");var lgsc=1;var lw=450*2;var lh=135*2;lmc.width=lmc2.width=lw;lmc.height=lmc2.height=lh;var lctx=lmc.getContext("2d");var lctx2=lmc2.getContext("2d");trf(lmc2,"scale(.5, .5)");trfo(lmc2,"0% 0%");lmch.appendChild(lmc2);logo.appendChild(lmch);var lts=[];
lts.push({pts:[107,107,80,83,53,98,31,115,55,131,98,147,101,162,101,190,66,188,49,187,34,173],kc:22,ws:4,wr:.025,qm:.025,sp:.06,sz:11},{pts:[150,30,150,30+(184-30)/2,150,184],kc:66,ws:4,wr:.05,qm:.025,sp:.06,sz:11},{pts:[207,96,207,96+(184-96)/2,207,184],kc:46,ws:4,wr:.03,qm:.035,sp:.06,sz:11},{pts:[207,47,207,47+(50-47)/2,207,50],kc:11,ws:2,wr:.06,qm:.05,sp:.06,sz:15,r:.5},{pts:[267,65,267,65+(164-65)/2,267,164,267,194,297,186],kc:66,ws:6,wr:-.025,qm:-.0125,sp:.06,sz:11,r:1.5},{pts:[243,94,268,94,
293,94],kc:66,ws:4,wr:.015,qm:.025,sp:.06,sz:9,r:1.2},{pts:[338,30,338,30+(184-30)*1/4,338,30+(184-30)*2/4,338,30+(184-30)*3/4,338,184,338,164,338,144,338,104,378,104,418,104,418,144,418,164,418,184],kc:46,ws:4,wr:.005,qm:.02,sp:.06,sz:11,r:2.1},{pts:[535,175,500,201,472,175,442,138,472,105,502,84,532,105,546,118,544,139,504,139,464,139],kc:35,ws:6,wr:-.013,qm:-.025,sp:.06,sz:11,r:1.3},{pts:[591,96,591,96+(184-96)/2,591,184,591,184+(126-184)/2,591,126,613,82,652,109],kc:38,ws:4,wr:.01,qm:-.035,sp:.06,
sz:11},{pts:[663,177,663,177+(180-177)/2,663,180],kc:11,ws:2,wr:.06,qm:.05,sp:.06,sz:15},{pts:[717,96,717,96+(184-96)/2,717,184],kc:33,ws:4,wr:.06,qm:.05,sp:.06,sz:11},{pts:[717,47,717,47+(50-47)/2,717,50],kc:11,ws:2,wr:.06,qm:.05,sp:.06,sz:15},{pts:[814,186,860,188,858,136,854,96,814,96,770,96,770,136,770,186,814,186],kc:43,ws:4,wr:0,qm:.0274,sp:.073,sz:11,r:1.5});for(var i=0;i<lts.length;i++)lts[i].mwig=5;var lga=0;var lgss=0;var ncka=0;var mwig=4;var lgfr=0;var lgtm=Date.now();
function showLogo(done){var ct=Date.now();var et=(ct-lgtm)/25;lgtm=ct;var ax1,ay1,cx1,cy1,ax2,ay2,ix1,iy1,ix2,iy2,pax1,pay1,lpax1,lpay1,alpax1,alpay1,d,i,j,ang,gang,wang,dmv,q,rr,gg,bb,r;lgfr+=et;if(lts[lts.length-1].mwig==0&&lga==1&&lgss==1&&ncka==1){clearInterval(showlogo_iv);showlogo_iv=-1}else{if(done||lga!=1){lga+=.05*et;if(lga>=1)lga=1;lmc2.style.opacity=lga}if(lgss!=1){lgss+=.00375*et;if(lgss>=1)lgss=1}if(done||ncka!=1){ncka+=.006*et;if(ncka>=1)ncka=1;nick_holder.style.opacity=Math.min(1,ncka*
6);if(!is_mobile)smh.style.opacity=Math.max(0,Math.min(1,(ncka-.05)*5));if(ncka>=.01)playh.style.opacity=Math.min(1,(ncka-.01)*5)}lctx.clearRect(0,0,lw,lh);for(i=0;i<lts.length;i++){var o=lts[i];var pts=o.pts;var kc=o.kc;var ws=o.ws;var wr=o.wr;var qm=o.qm;var sp=o.sp;var sz=o.sz;var r=o.r;var mwig=o.mwig;if(done){o.wch=true;mwig=1E-7}if(o.wch)if(mwig!=0){mwig*=.982;mwig-=.001*et;if(render_mode==1)mwig-=.005*et;if(mwig<=0)mwig=0;o.mwig=mwig}if(!r)r=1;lctx.beginPath();if(i<9){var gd=ctx.createLinearGradient(0,
70*lgsc,0,230*lgsc);gd.addColorStop(0,"#80FFA0");gd.addColorStop(1,"#008040");lctx.fillStyle=gd}else{var gd=ctx.createLinearGradient(0,50*lgsc,0,265*lgsc);gd.addColorStop(0,"#9850FF");gd.addColorStop(1,"#281060");lctx.fillStyle=gd}dmv=false;gang=false;q=0;ax2=pts[0];ay2=pts[1];alpax1=lpax1=ax2;alpay1=lpay1=ay2;var wig=ws;var wgang=lgfr*sp;for(j=2;j<pts.length;j+=4){ax1=ax2;ay1=ay2;cx2=pts[j];cy2=pts[j+1];ax2=pts[j+2];ay2=pts[j+3];for(var k=1;k<=kc;k++){q++;var s_amt=k/kc;ix1=ax1+(cx2-ax1)*s_amt;iy1=
ay1+(cy2-ay1)*s_amt;ix2=cx2+(ax2-cx2)*s_amt;iy2=cy2+(ay2-cy2)*s_amt;pax1=ix1+(ix2-ix1)*s_amt;pay1=iy1+(iy2-iy1)*s_amt;wang=Math.atan2(pay1-lpay1,pax1-lpax1);if(!gang){gang=true;ang=wang}else{if(wang-ang>Math.PI)wang-=2*Math.PI;else if(wang-ang<-Math.PI)wang+=2*Math.PI;ang+=(wang-ang)*.05;ang%=2*Math.PI}lpax1=pax1;lpay1=pay1;pax1+=Math.cos(Math.PI/2+ang)*Math.sin(wgang)*wig*mwig;pay1+=Math.sin(Math.PI/2+ang)*Math.sin(wgang)*wig*mwig;wgang-=.76*qm*wig;wig+=wr;lctx.beginPath();var fsz=sz*1.15*Math.min(1,
lgsc*(.2+.8*lga)*(30*lgss*r-q/20-i/2));if(fsz>.5){lctx.arc(pax1*lgsc,pay1*lgsc,fsz,0,pi2);o.wch=true}lctx.fill()}}}lctx2.clearRect(0,0,lw,lh);lctx2.shadowColor="#000000";lctx2.shadowBlur=16;lctx2.shadowOffsetY=7;lctx2.drawImage(lmc,0,0)}}var showlogo_iv=-1;if(is_safari||is_mobile){lga=1;lgss=1;ncka=1;showLogo(true)}else showlogo_iv=setInterval(function(){showLogo(false)},25);
document.onkeydown=function(e){e=e||window.event;var v=e.keyCode;if(v==37)kd_l=true;else if(v==39)kd_r=true;else if(v==38||v==32){kd_u=true;setAcceleration(1)}else if(v>=48&&v<=57){if(entering_code)enterCodeDigit(v-48)}else if(v==8){if(entering_code)deleteLastCodeDigit()}else if(v==13||v==10)if(want_victory_message){if(victory.value.length>0)save_btn.elem.onclick()}else{if(!connecting&&!connected)play_btn.elem.onclick()}else if(v==16)if(testing){shifty=true;if(snake){snake.accessory++;if(snake.accessory>=
a_ct)snake.accessory=0}}if(testing)console.log("keydown: "+e.keyCode)};document.onkeyup=function(e){e=e||window.event;var v=e.keyCode;if(v==37)kd_l=false;else if(v==39)kd_r=false;else if(v==38||v==32){kd_u=false;setAcceleration(0)}else if(v==16)if(testing)shifty=false};
function loadSos(s){if(forcing)return;if(s.length>0){sos=[];clus=[];var ala=s.charAt(0)=="a";var j=1;var o={};var k=0;var m=0;var n=0;var v;var cv=0;var cav=0;var ia=[];var pa=[];var aa=[];var clu=[];while(j<s.length){v=(s.charCodeAt(j++)-97-cav)%26;if(v<0)v+=26;cv*=16;cv+=v;cav+=7;if(n==1){if(m==0){ia.push(cv);if(ia.length==4)m++}else if(m==1){pa.push(cv);if(pa.length==3)m++}else if(m==2){aa.push(cv);if(aa.length==3)m++}else if(m==3){clu.push(cv);if(clu.length==1){o={};var po=0;for(var k=0;k<pa.length;k++){po*=
256;po+=pa[k]}var ac=0;for(var k=0;k<aa.length;k++){ac*=256;ac+=aa[k]}o.ip=ia.join(".");o.po=po;o.ac=ac;o.wg=ac+5;o.clu=clu[0];var cluo;if(!clus[o.clu]){cluo={};clus[o.clu]=cluo;cluo.sis=[];cluo.ptms=[];cluo.swg=0;cluo.tac=0;cluo.sos=[]}else cluo=clus[o.clu];o.cluo=cluo;cluo.swg+=o.wg;cluo.sos.push(o);cluo.tac+=ac;sos.push(o);ia=[];pa=[];aa=[];clu=[];m=0}}cv=0;n=0}else n++}for(j=sos.length-1;j>=0;j--){n=1;var cluo=sos[j].cluo;if(cluo){for(k=cluo.sis.length-1;k>=0;k--)if(cluo.sis[k].ip==sos[j].ip){n=
0;break}if(n==1)cluo.sis.push({ip:sos[j].ip})}}for(j=clus.length-1;j>=0;j--){var cluo=clus[j];if(cluo)if(cluo.sis.length>0){var k=Math.floor(Math.random()*cluo.sis.length);var ip=cluo.sis[k].ip;var ps=null;try{var ps=new WebSocket("ws://"+ip+":80/ptc")}catch(e){ps=null}if(ps){ps.binaryType="arraybuffer";ps.onerror=function(e){};ps.onmessage=function(e){var a=new Uint8Array(e.data);if(a.length==1&&a[0]==112)for(var j=clus.length-1;j>=0;j--){var cluo=clus[j];if(cluo)if(cluo.ps==this){var ptm=Date.now()-
cluo.stm;if(testing)console.log(" ping time for cluster "+j+": "+ptm);cluo.ptms.push(ptm);if(cluo.ptms.length<4){cluo.stm=Date.now();var ba=new Uint8Array(1);ba[0]=112;this.send(ba)}else{if(waiting_for_sos)if(sos_ready_after_mtm==-1)sos_ready_after_mtm=Date.now()+2E3;this.close();cluo.ps=null}break}}};ps.onopen=function(a){var found=false;for(var j=clus.length-1;j>=0;j--){var cluo=clus[j];if(cluo)if(cluo.ps==this){cluo.stm=Date.now();var ba=new Uint8Array(1);ba[0]=112;this.send(ba);found=true;break}}if(!found)this.close()};
cluo.ps=ps}}}}}function adjustCodeSpinner(){var sc=hh/1500;if(sc>1)sc=1;trf(etco_sp_ii,"scale("+sc+","+sc+") rotate("+Math.round(36E3*etcsrv/12)/100+"deg)")}function reposGraphicsQuality(){if(hacos||bonkz)grqh.style.top="160px";else grqh.style.top="16px"}
function reposEnterCode(){var sc=hh/1500;if(sc>1)sc=1;etcod.style.width=Math.ceil(ww)+"px";etcod.style.height=Math.ceil(hh)+"px";var txt_y=Math.round(Math.max(42,(hh-222)*.2));var code_y=Math.round(Math.max(60,.5*txt_y+.5*(hh/2+100*sc-135/2+-1*sc*(135+20))-33));var spin_y=Math.round(code_y*.45+.55*(hh/2+100*sc-135/2+-1*sc*(135+20))-33);etcot.style.left=Math.round(ww/2-800/2)+"px";etcot.style.top=txt_y+"px";etcc.style.left=Math.round(ww/2-etc_ww/2)+"px";etcc.style.top=code_y+"px";etco_sp_ii.style.left=
Math.round(ww/2-100/2)+"px";etco_sp_ii.style.top=spin_y+"px";adjustCodeSpinner();for(var i=etcobs.length-1;i>=0;i--){var o=etcobs[i];var xx=0;var yy=0;var tsc=sc;if(i==0){xx=0;yy=2}else if(i==1){xx=-1;yy=-1}else if(i==2){xx=0;yy=-1}else if(i==3){xx=1;yy=-1}else if(i==4){xx=-1;yy=0}else if(i==5){xx=0;yy=0}else if(i==6){xx=1;yy=0}else if(i==7){xx=-1;yy=1}else if(i==8){xx=0;yy=1}else if(i==9){xx=1;yy=1}else if(i==10){xx=1;yy=2;tsc*=.75}o.ii.style.left=Math.round(ww/2-135/2+xx*sc*(135+20))+"px";o.ii.style.top=
Math.round(hh/2+100*sc-135/2+yy*sc*(135+20))+"px";trf(o.ii,"scale("+tsc+","+tsc+")")}var sc=hh/750;if(sc>1)sc=1;trf(etcc,"scale("+sc+","+sc+")");etcocdiv.style.left=Math.round(ww/2-etcocdiv.offsetWidth/2)+"px";etcocdiv.style.bottom=Math.round(sc*64)+"px"}var buildia_shown=false;var build_v=document.createElement("video");var bv_width=1095;var bv_height=616;var buildia_close_after_tm=-1;
function reposBuildia(){if(build_v){var sc=Math.min(ww/bv_width,hh/bv_height);var vw=Math.ceil(bv_width*sc);var vh=Math.ceil(bv_height*sc);build_v.style.width=vw+"px";build_v.style.height=vh+"px";build_v.style.left=Math.floor(ww/2-vw/2)+"px";build_v.style.top=Math.floor(hh/2-vh/2)+"px"}}
function trySkipBuildia(){if(buildia_shown)if(window.ut_csk){var dpr=window.ut_dpr;buildia_shown=false;shoa=false;ut_d.removeChild(build_v);document.body.removeChild(ut_d);document.body.removeChild(ut_sk);clearInterval(ut_cd_iv);build_v=null}}
window.buildia=function(){buildia_shown=true;window.ut_ldt=Date.now();var d=document.createElement("div");d.style.zIndex=2147483632;d.style.width="100%";d.style.height="100%";d.style.textAlign="center";d.style.background="rgba(0, 0, 0, .85)";d.style.margin="0px";d.style.overflow="hidden";d.style.position="fixed";d.style.opacity=1;window.ut_d=d;document.body.appendChild(d);var v=build_v;v.width=bv_width;v.height=bv_height;v.style.position="absolute";d.appendChild(v);v.currentTime=4;v.play();buildia_close_after_tm=
Date.now()+11E3;reposBuildia();var sk=document.createElement("div");window.ut_sk=sk;sk.style.width="115px";sk.style.height="20px";sk.style.background="rgba(0, 0, 0, 1)";sk.style.border="1px solid rgba(255, 255, 255, .5)";sk.style.fontFamily="Verdana";sk.style.color="#ffffff";sk.style.position="fixed";sk.style.right="10px";sk.style.bottom="10px";sk.textContent="Skip Ad "+String.fromCharCode(9654);sk.style.cursor="pointer";sk.style.textAlign="center";sk.style.padding="8px";sk.style.fontSize="16px";
sk.style.borderRadius="4px";sk.style.opacity=.75;sk.className="nsi";sk.style.zIndex=2147483633;sk.onmouseenter=function(){ut_sk.style.opacity=1};sk.onmouseleave=function(){ut_sk.style.opacity=.75};sk.onclick=function(){trySkipBuildia()};document.body.appendChild(sk);window.ut_skf=function(){var ct=Date.now();var v=-1;if(window.ut_dpr=="1")v=0;if(v<=0){ut_sk.textContent="Skip Ad "+String.fromCharCode(9654);window.ut_csk=true}else{v=Math.ceil(Math.pow(v/5E3,1)*5);ut_sk.textContent="Skip in "+v}};window.ut_cd_iv=
setInterval("ut_skf()",250);ut_skf()};var fifth_iv=-1;
window.fifthia=function(){window.ut_ldt=Date.now();var d=document.createElement("div");d.style.zIndex=2147483632;d.style.width="100%";d.style.height="100%";d.style.textAlign="center";d.style.background="rgba(0, 0, 0, .85)";d.style.margin="0px";d.style.overflow="hidden";d.style.position="fixed";window.ut_d=d;document.body.appendChild(d);var v=document.createElement("div");v.style.background='url("/s/fifthsun3.jpg")';v.style.width="1100px";v.style.height="800px";v.style.marginTop="30px";v.style.marginLeft=
v.style.marginRight="auto";v.style.position="relative";v.style.border="3px solid #CCDDFF";window.ut_v=v;d.appendChild(v);var sn=document.createElement("div");sn.style.boxShadow="0px 3px 20px rgba(0,0,0, .75)";sn.style.position="absolute";sn.style.left=Math.round((825-150)/2)-18+"px";sn.style.top="126px";sn.style.width="150px";sn.style.padding="18px";sn.style.textAlign="center";sn.style.color="#000000";sn.style.fontWeight="bold";sn.style.textAlign="center";sn.style.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif';
sn.style.fontSize="23px";sn.style.cursor="pointer";sn.textContent="Shop Now";sn.className="nsi shbtn";var a=document.createElement("a");a.className="btnt";a.draggable=false;a.href="https://www.fifthsun.com/brands/video-games/slither-io";a.target="_blank";a.appendChild(sn);v.appendChild(a);window.ut_sn=sn;var sk=document.createElement("div");window.ut_sk=sk;sk.style.width="115px";sk.style.height="20px";sk.style.background="rgba(0, 0, 0, 1)";sk.style.border="1px solid rgba(255, 255, 255, .5)";sk.style.fontFamily=
"Verdana";sk.style.color="#ffffff";sk.style.position="fixed";sk.style.right="10px";sk.style.bottom="10px";sk.textContent="Skip Ad "+String.fromCharCode(9654);sk.style.cursor="pointer";sk.style.textAlign="center";sk.style.padding="8px";sk.style.fontSize="16px";sk.style.borderRadius="4px";sk.style.opacity=.75;sk.className="nsi";sk.style.zIndex=2147483633;sk.onclick=function(){var dpr=window.ut_dpr;if(window.ut_csk){shoa=false;ut_d.removeChild(ut_v);document.body.removeChild(ut_d);document.body.removeChild(ut_sk);
clearInterval(ut_cd_iv)}};sk.onmouseenter=function(){ut_sk.style.opacity=1};sk.onmouseleave=function(){ut_sk.style.opacity=.75};document.body.appendChild(sk);window.ut_skf=function(){var ct=Date.now();var v=-1;if(window.ut_dpr=="1")v=0;if(v<=0){ut_sk.textContent="Skip Ad "+String.fromCharCode(160,9654);window.ut_csk=true}else{v=Math.ceil(Math.pow(v/5E3,1)*5);ut_sk.textContent="Skip in "+v}};window.ut_cd_iv=setInterval("ut_skf()",250);ut_skf()};var partycity_shown=false;var pcy_width=1100+32;
var pcy_height=800+32;var partycity_iv=-1;
window.partycityia=function(){window.ut_ldt=Date.now();var d=document.createElement("div");d.style.zIndex=2147483632;d.style.width="100%";d.style.height="100%";d.style.textAlign="center";d.style.background="rgba(0, 0, 0, .85)";d.style.margin="0px";d.style.overflow="hidden";d.style.position="fixed";window.ut_d=d;document.body.appendChild(d);var v=document.createElement("div");v.style.background='url("/s/partycity2.jpg")';v.style.width="1100px";v.style.height="800px";v.style.position="absolute";v.style.border=
"3px solid #CCDDFF";v.style.borderRadius="42px";window.ut_v=v;d.appendChild(v);var sn=document.createElement("div");sn.style.boxShadow="0px 3px 20px rgba(0,0,0, .75)";sn.style.position="absolute";sn.style.left=Math.round((1100-244)/2)-18+"px";sn.style.top="707px";sn.style.width="244px";sn.style.padding="18px";sn.style.textAlign="center";sn.style.color="#000000";sn.style.fontWeight="bold";sn.style.textAlign="center";sn.style.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif';sn.style.fontSize=
"36px";sn.style.cursor="pointer";sn.style.borderRadius="12px";sn.textContent="Shop Now";sn.className="nsi shbtn";var a=document.createElement("a");a.className="btnt";a.draggable=false;if(testing)a.href="https://www.zombo.com/";else a.href="https://www.partycity.com/slither-party-supplies?extcmp=dsp|banner|slither.io|slitherpartysupplies";a.target="_blank";a.appendChild(sn);v.appendChild(a);window.ut_sn=sn;var sk=document.createElement("div");window.ut_sk=sk;sk.style.width="115px";sk.style.height=
"20px";sk.style.background="rgba(0, 0, 0, 1)";sk.style.border="1px solid rgba(255, 255, 255, .5)";sk.style.fontFamily="Verdana";sk.style.color="#ffffff";sk.style.position="fixed";sk.style.right="10px";sk.style.bottom="10px";sk.textContent="Skip Ad "+String.fromCharCode(9654);sk.style.cursor="pointer";sk.style.textAlign="center";sk.style.padding="8px";sk.style.fontSize="16px";sk.style.borderRadius="4px";sk.style.opacity=.75;sk.className="nsi";sk.style.zIndex=2147483633;sk.onclick=function(){var dpr=
window.ut_dpr;if(window.ut_csk){shoa=false;ut_d.removeChild(ut_v);document.body.removeChild(ut_d);document.body.removeChild(ut_sk);clearInterval(ut_cd_iv);partycity_shown=false}};sk.onmouseenter=function(){ut_sk.style.opacity=1};sk.onmouseleave=function(){ut_sk.style.opacity=.75};document.body.appendChild(sk);window.ut_skf=function(){var ct=Date.now();var v=-1;if(window.ut_dpr=="1")v=0;if(v<=0){ut_sk.textContent="Skip Ad "+String.fromCharCode(160,9654);window.ut_csk=true}else{v=Math.ceil(Math.pow(v/
5E3,1)*5);ut_sk.textContent="Skip in "+v}};window.ut_cd_iv=setInterval("ut_skf()",250);ut_skf();partycity_shown=true;reposPartyCity()};function reposPartyCity(){if(partycity_shown){var sc=Math.min(ww/pcy_width,hh/pcy_height);if(sc>1)sc=1;var vw=Math.ceil(pcy_width*sc);var vh=Math.ceil(pcy_height*sc);trf(ut_v,"scale("+sc+","+sc+")");trfo(ut_v,"0% 0%");ut_v.style.left=Math.floor(ww/2-vw/2)+"px";ut_v.style.top=Math.floor(hh/2-vh/2)+"px"}}var mba=null;var mbi=null;
if(is_ios||is_android){mba=document.createElement("a");mbi=document.createElement("img");mbi.border=0;mbi.draggable=false;mbi.className="nsi";mbi.width=1245;mbi.height=260;mbi.style.position="fixed";mbi.style.left="0px";mbi.style.bottom="0px";mbi.style.zIndex=70;mbi.src="http://slither.io/s/n2.jpg";mba.appendChild(mbi);document.body.appendChild(mba);if(is_ios)mba.href="https://itunes.apple.com/us/app/slither.io/id1091944550?ls=1&mt=8";else if(is_android)if(is_amazon)mba.href="http://www.amazon.com/Lowtech-Enterprises-slither-io/dp/B01E312TYQ/";
else mba.href="https://play.google.com/store/apps/details?id=air.com.hypah.io.slither"}resize();recalculateActivatedCosmetics();var o={};o.f=function(d,m,o){if(m=="success")loadSos(d)};getData("https://slither.io/i33628.txt",o);